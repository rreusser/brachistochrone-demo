!function t(n,r,e){function i(o,u){if(!r[o]){if(!n[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};n[o][0].call(l.exports,function(t){var r=n[o][1][t];return i(r?r:t)},l,l.exports,t,n,r,e)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<e.length;o++)i(e[o]);return i}({1:[function(t,n,r){(function(n){function e(){function t(){}try{var n=new Uint8Array(1);return n.foo=function(){return 42},n.constructor=t,42===n.foo()&&n.constructor===t&&"function"==typeof n.subarray&&0===n.subarray(1,1).byteLength}catch(r){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t){return this instanceof a?(this.length=0,this.parent=void 0,"number"==typeof t?o(this,t):"string"==typeof t?u(this,t,arguments.length>1?arguments[1]:"utf8"):s(this,t)):arguments.length>1?new a(t,arguments[1]):new a(t)}function o(t,n){if(t=d(t,0>n?0:0|v(n)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)t[r]=0;return t}function u(t,n,r){("string"!=typeof r||""===r)&&(r="utf8");var e=0|m(n,r);return t=d(t,e),t.write(n,r),t}function s(t,n){if(a.isBuffer(n))return c(t,n);if(G(n))return l(t,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(t,n);if(n instanceof ArrayBuffer)return h(t,n)}return n.length?p(t,n):g(t,n)}function c(t,n){var r=0|v(n.length);return t=d(t,r),n.copy(t,0,0,r),t}function l(t,n){var r=0|v(n.length);t=d(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function f(t,n){var r=0|v(n.length);t=d(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function h(t,n){return a.TYPED_ARRAY_SUPPORT?(n.byteLength,t=a._augment(new Uint8Array(n))):t=f(t,new Uint8Array(n)),t}function p(t,n){var r=0|v(n.length);t=d(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function g(t,n){var r,e=0;"Buffer"===n.type&&G(n.data)&&(r=n.data,e=0|v(r.length)),t=d(t,e);for(var i=0;e>i;i+=1)t[i]=255&r[i];return t}function d(t,n){a.TYPED_ARRAY_SUPPORT?(t=a._augment(new Uint8Array(n)),t.__proto__=a.prototype):(t.length=n,t._isBuffer=!0);var r=0!==n&&n<=a.poolSize>>>1;return r&&(t.parent=J),t}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function y(t,n){if(!(this instanceof y))return new y(t,n);var r=new a(t,n);return delete r.parent,r}function m(t,n){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var e=!1;;)switch(n){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(t).length;default:if(e)return O(t).length;n=(""+n).toLowerCase(),e=!0}}function b(t,n,r){var e=!1;if(n=0|n,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>n&&(n=0),r>this.length&&(r=this.length),n>=r)return"";for(;;)switch(t){case"hex":return j(this,n,r);case"utf8":case"utf-8":return N(this,n,r);case"ascii":return T(this,n,r);case"binary":return I(this,n,r);case"base64":return k(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,n,r);default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}function _(t,n,r,e){r=Number(r)||0;var i=t.length-r;e?(e=Number(e),e>i&&(e=i)):e=i;var a=n.length;if(a%2!==0)throw new Error("Invalid hex string");e>a/2&&(e=a/2);for(var o=0;e>o;o++){var u=parseInt(n.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function x(t,n,r,e){return Z(O(n,t.length-r),t,r,e)}function w(t,n,r,e){return Z(Y(n),t,r,e)}function M(t,n,r,e){return w(t,n,r,e)}function A(t,n,r,e){return Z(X(n),t,r,e)}function E(t,n,r,e){return Z(H(n,t.length-r),t,r,e)}function k(t,n,r){return 0===n&&r===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(n,r))}function N(t,n,r){r=Math.min(t.length,r);for(var e=[],i=n;r>i;){var a=t[i],o=null,u=a>239?4:a>223?3:a>191?2:1;if(r>=i+u){var s,c,l,f;switch(u){case 1:128>a&&(o=a);break;case 2:s=t[i+1],128===(192&s)&&(f=(31&a)<<6|63&s,f>127&&(o=f));break;case 3:s=t[i+1],c=t[i+2],128===(192&s)&&128===(192&c)&&(f=(15&a)<<12|(63&s)<<6|63&c,f>2047&&(55296>f||f>57343)&&(o=f));break;case 4:s=t[i+1],c=t[i+2],l=t[i+3],128===(192&s)&&128===(192&c)&&128===(192&l)&&(f=(15&a)<<18|(63&s)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(o=f))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,e.push(o>>>10&1023|55296),o=56320|1023&o),e.push(o),i+=u}return S(e)}function S(t){var n=t.length;if(K>=n)return String.fromCharCode.apply(String,t);for(var r="",e=0;n>e;)r+=String.fromCharCode.apply(String,t.slice(e,e+=K));return r}function T(t,n,r){var e="";r=Math.min(t.length,r);for(var i=n;r>i;i++)e+=String.fromCharCode(127&t[i]);return e}function I(t,n,r){var e="";r=Math.min(t.length,r);for(var i=n;r>i;i++)e+=String.fromCharCode(t[i]);return e}function j(t,n,r){var e=t.length;(!n||0>n)&&(n=0),(!r||0>r||r>e)&&(r=e);for(var i="",a=n;r>a;a++)i+=F(t[a]);return i}function L(t,n,r){for(var e=t.slice(n,r),i="",a=0;a<e.length;a+=2)i+=String.fromCharCode(e[a]+256*e[a+1]);return i}function U(t,n,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+n>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,n,r,e,i,o){if(!a.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>i||o>n)throw new RangeError("value is out of bounds");if(r+e>t.length)throw new RangeError("index out of range")}function R(t,n,r,e){0>n&&(n=65535+n+1);for(var i=0,a=Math.min(t.length-r,2);a>i;i++)t[r+i]=(n&255<<8*(e?i:1-i))>>>8*(e?i:1-i)}function B(t,n,r,e){0>n&&(n=4294967295+n+1);for(var i=0,a=Math.min(t.length-r,4);a>i;i++)t[r+i]=n>>>8*(e?i:3-i)&255}function P(t,n,r,e,i,a){if(n>i||a>n)throw new RangeError("value is out of bounds");if(r+e>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function q(t,n,r,e,i){return i||P(t,n,r,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(t,n,r,e,23,4),r+4}function D(t,n,r,e,i){return i||P(t,n,r,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(t,n,r,e,52,8),r+8}function V(t){if(t=z(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function F(t){return 16>t?"0"+t.toString(16):t.toString(16)}function O(t,n){n=n||1/0;for(var r,e=t.length,i=null,a=[],o=0;e>o;o++){if(r=t.charCodeAt(o),r>55295&&57344>r){if(!i){if(r>56319){(n-=3)>-1&&a.push(239,191,189);continue}if(o+1===e){(n-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(56320>r){(n-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(n-=3)>-1&&a.push(239,191,189);if(i=null,128>r){if((n-=1)<0)break;a.push(r)}else if(2048>r){if((n-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(65536>r){if((n-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((n-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Y(t){for(var n=[],r=0;r<t.length;r++)n.push(255&t.charCodeAt(r));return n}function H(t,n){for(var r,e,i,a=[],o=0;o<t.length&&!((n-=2)<0);o++)r=t.charCodeAt(o),e=r>>8,i=r%256,a.push(i),a.push(e);return a}function X(t){return $.toByteArray(V(t))}function Z(t,n,r,e){for(var i=0;e>i&&!(i+r>=n.length||i>=t.length);i++)n[i+r]=t[i];return i}var $=t("base64-js"),W=t("ieee754"),G=t("isarray");r.Buffer=a,r.SlowBuffer=y,r.INSPECT_MAX_BYTES=50,a.poolSize=8192;var J={};a.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:e(),a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array),a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,n){if(!a.isBuffer(t)||!a.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,e=n.length,i=0,o=Math.min(r,e);o>i&&t[i]===n[i];)++i;return i!==o&&(r=t[i],e=n[i]),e>r?-1:r>e?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,n){if(!G(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new a(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;r++)n+=t[r].length;var e=new a(n),i=0;for(r=0;r<t.length;r++){var o=t[r];o.copy(e,i),i+=o.length}return e},a.byteLength=m,a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):b.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:a.compare(this,t)},a.prototype.indexOf=function(t,n){function r(t,n,r){for(var e=-1,i=0;r+i<t.length;i++)if(t[r+i]===n[-1===e?0:i-e]){if(-1===e&&(e=i),i-e+1===n.length)return r+e}else e=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,n);if(a.isBuffer(t))return r(this,t,n);if("number"==typeof t)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},a.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},a.prototype.set=function(t,n){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,n)},a.prototype.write=function(t,n,r,e){if(void 0===n)e="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)e=n,r=this.length,n=0;else if(isFinite(n))n=0|n,isFinite(r)?(r=0|r,void 0===e&&(e="utf8")):(e=r,r=void 0);else{var i=e;e=n,n=0|r,r=i}var a=this.length-n;if((void 0===r||r>a)&&(r=a),t.length>0&&(0>r||0>n)||n>this.length)throw new RangeError("attempt to write outside buffer bounds");e||(e="utf8");for(var o=!1;;)switch(e){case"hex":return _(this,t,n,r);case"utf8":case"utf-8":return x(this,t,n,r);case"ascii":return w(this,t,n,r);case"binary":return M(this,t,n,r);case"base64":return A(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;a.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t>n&&(n=t);var e;if(a.TYPED_ARRAY_SUPPORT)e=a._augment(this.subarray(t,n));else{var i=n-t;e=new a(i,void 0);for(var o=0;i>o;o++)e[o]=this[o+t]}return e.length&&(e.parent=this.parent||this),e},a.prototype.readUIntLE=function(t,n,r){t=0|t,n=0|n,r||U(t,n,this.length);for(var e=this[t],i=1,a=0;++a<n&&(i*=256);)e+=this[t+a]*i;return e},a.prototype.readUIntBE=function(t,n,r){t=0|t,n=0|n,r||U(t,n,this.length);for(var e=this[t+--n],i=1;n>0&&(i*=256);)e+=this[t+--n]*i;return e},a.prototype.readUInt8=function(t,n){return n||U(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,n){return n||U(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,n){return n||U(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,n){return n||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,n){return n||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,n,r){t=0|t,n=0|n,r||U(t,n,this.length);for(var e=this[t],i=1,a=0;++a<n&&(i*=256);)e+=this[t+a]*i;return i*=128,e>=i&&(e-=Math.pow(2,8*n)),e},a.prototype.readIntBE=function(t,n,r){t=0|t,n=0|n,r||U(t,n,this.length);for(var e=n,i=1,a=this[t+--e];e>0&&(i*=256);)a+=this[t+--e]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*n)),a},a.prototype.readInt8=function(t,n){return n||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,n){n||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,n){n||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,n){return n||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,n){return n||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,n){return n||U(t,4,this.length),W.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,n){return n||U(t,4,this.length),W.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,n){return n||U(t,8,this.length),W.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,n){return n||U(t,8,this.length),W.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,n,r,e){t=+t,n=0|n,r=0|r,e||C(this,t,n,r,Math.pow(2,8*r),0);var i=1,a=0;for(this[n]=255&t;++a<r&&(i*=256);)this[n+a]=t/i&255;return n+r},a.prototype.writeUIntBE=function(t,n,r,e){t=+t,n=0|n,r=0|r,e||C(this,t,n,r,Math.pow(2,8*r),0);var i=r-1,a=1;for(this[n+i]=255&t;--i>=0&&(a*=256);)this[n+i]=t/a&255;return n+r},a.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},a.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):R(this,t,n,!0),n+2},a.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):R(this,t,n,!1),n+2},a.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):B(this,t,n,!0),n+4},a.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},a.prototype.writeIntLE=function(t,n,r,e){if(t=+t,n=0|n,!e){var i=Math.pow(2,8*r-1);C(this,t,n,r,i-1,-i)}var a=0,o=1,u=0>t?1:0;for(this[n]=255&t;++a<r&&(o*=256);)this[n+a]=(t/o>>0)-u&255;return n+r},a.prototype.writeIntBE=function(t,n,r,e){if(t=+t,n=0|n,!e){var i=Math.pow(2,8*r-1);C(this,t,n,r,i-1,-i)}var a=r-1,o=1,u=0>t?1:0;for(this[n+a]=255&t;--a>=0&&(o*=256);)this[n+a]=(t/o>>0)-u&255;return n+r},a.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},a.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):R(this,t,n,!0),n+2},a.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):R(this,t,n,!1),n+2},a.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):B(this,t,n,!0),n+4},a.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||C(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):B(this,t,n,!1),n+4},a.prototype.writeFloatLE=function(t,n,r){return q(this,t,n,!0,r)},a.prototype.writeFloatBE=function(t,n,r){return q(this,t,n,!1,r)},a.prototype.writeDoubleLE=function(t,n,r){return D(this,t,n,!0,r)},a.prototype.writeDoubleBE=function(t,n,r){return D(this,t,n,!1,r)},a.prototype.copy=function(t,n,r,e){if(r||(r=0),e||0===e||(e=this.length),n>=t.length&&(n=t.length),n||(n=0),e>0&&r>e&&(e=r),e===r)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),t.length-n<e-r&&(e=t.length-n+r);var i,o=e-r;if(this===t&&n>r&&e>n)for(i=o-1;i>=0;i--)t[i+n]=this[i+r];else if(1e3>o||!a.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)t[i+n]=this[i+r];else t._set(this.subarray(r,r+o),n);return o},a.prototype.fill=function(t,n,r){if(t||(t=0),n||(n=0),r||(r=this.length),n>r)throw new RangeError("end < start");if(r!==n&&0!==this.length){if(0>n||n>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var e;if("number"==typeof t)for(e=n;r>e;e++)this[e]=t;else{var i=O(t.toString()),a=i.length;for(e=n;r>e;e++)this[e]=i[e%a]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return new a(this).buffer;for(var t=new Uint8Array(this.length),n=0,r=t.length;r>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=a.prototype;a._augment=function(t){return t.constructor=a,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:3,isarray:4}],2:[function(t,n,r){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function n(t){var n=t.charCodeAt(0);return n===o||n===f?62:n===u||n===h?63:s>n?-1:s+10>n?n-s+26+26:l+26>n?n-l:c+26>n?n-c+26:void 0}function r(t){function r(t){c[f++]=t}var e,i,o,u,s,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;s="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new a(3*t.length/4-s),o=s>0?t.length-4:t.length;var f=0;for(e=0,i=0;o>e;e+=4,i+=3)u=n(t.charAt(e))<<18|n(t.charAt(e+1))<<12|n(t.charAt(e+2))<<6|n(t.charAt(e+3)),r((16711680&u)>>16),r((65280&u)>>8),r(255&u);return 2===s?(u=n(t.charAt(e))<<2|n(t.charAt(e+1))>>4,r(255&u)):1===s&&(u=n(t.charAt(e))<<10|n(t.charAt(e+1))<<4|n(t.charAt(e+2))>>2,r(u>>8&255),r(255&u)),c}function i(t){function n(t){return e.charAt(t)}function r(t){return n(t>>18&63)+n(t>>12&63)+n(t>>6&63)+n(63&t)}var i,a,o,u=t.length%3,s="";for(i=0,o=t.length-u;o>i;i+=3)a=(t[i]<<16)+(t[i+1]<<8)+t[i+2],s+=r(a);switch(u){case 1:a=t[t.length-1],s+=n(a>>2),s+=n(a<<4&63),s+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],s+=n(a>>10),s+=n(a>>4&63),s+=n(a<<2&63),s+="="}return s}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],3:[function(t,n,r){r.read=function(t,n,r,e,i){var a,o,u=8*i-e-1,s=(1<<u)-1,c=s>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[n+f];for(f+=h,a=p&(1<<-l)-1,p>>=-l,l+=u;l>0;a=256*a+t[n+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=e;l>0;o=256*o+t[n+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===s)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,e),a-=c}return(p?-1:1)*o*Math.pow(2,a-e)},r.write=function(t,n,r,e,i,a){var o,u,s,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=e?0:a-1,g=e?1:-1,d=0>n||0===n&&0>1/n?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,o=l):(o=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-o))<1&&(o--,s*=2),n+=o+f>=1?h/s:h*Math.pow(2,1-f),n*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(n*s-1)*Math.pow(2,i),o+=f):(u=n*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&u,p+=g,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;t[r+p]=255&o,p+=g,o/=256,c-=8);t[r+p-g]|=128*d}},{}],4:[function(t,n,r){var e={}.toString;n.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},{}],5:[function(t,n,r){function e(t,n,r,e,i,a){var o=r.length,u=r[0].length;if(2>n)throw new Error("order must be at least 2 (linear)");if(n>o)throw new Error("order must be less than point count");if(!i){i=new Array(o);for(var s=0;o>s;s++)i[s]=1}if(e){if(e.length!==o+n)throw new Error("bad knot vector length")}else for(var e=new Array(o+n),s=0;o+n>s;s++)e[s]=s;var c=[n-1,e.length-1-(n-1)],l=e[c[0]],f=e[c[1]];if(t=t*(f-l)+l,l>t||t>f)throw new Error("out of bounds");for(var h=c[0];h<c[1]&&!(t>=e[h]&&t<=e[h+1]);h++);for(var p=new Array(o),s=0;o>s;s++){p[s]=new Array(u+1);for(var g=0;u>g;g++)p[s][g]=r[s][g]*i[s];p[s][u]=i[s]}for(var d=1;n>=d;d++)for(var s=h;s>h-n+d;s--)for(var v=(t-e[s])/(e[s+n-d]-e[s]),g=0;u+1>g;g++)p[s][g]=(1-v)*p[s-1][g]+v*p[s][g];for(var a=a||new Array(u),s=0;u>s;s++)a[s]=p[h][s]/p[h][u];return a}n.exports=e},{}],6:[function(t,n,r){"use strict";function e(t,n,r,e,i){var a=["function ",t,"(a,l,h,",e.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?n.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",n,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function i(t,n,r,i){var a=new Function([e("A","x"+t+"y",n,["y"],i),e("P","c(x,y)"+t+"0",n,["y","c"],i),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""));return a()}n.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],7:[function(t,n,r){"use strict";function e(t,n,r,e){for(e=e||1e-8;r-n>e;){var i=(r+n)/2;t(i)?r=i:n=i}return n}n.exports=e},{}],8:[function(t,n,r){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function r(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function i(t){return null===t?NaN:+t}function a(t){return!isNaN(t)}function o(t){return{left:function(n,r,e,i){for(arguments.length<3&&(e=0),arguments.length<4&&(i=n.length);i>e;){var a=e+i>>>1;t(n[a],r)<0?e=a+1:i=a}return e},right:function(n,r,e,i){for(arguments.length<3&&(e=0),arguments.length<4&&(i=n.length);i>e;){var a=e+i>>>1;t(n[a],r)>0?i=a:e=a+1}return e}}}function u(t){return t.length}function s(t){for(var n=1;t*n%1;)n*=10;return n}function c(t,n){for(var r in n)Object.defineProperty(t.prototype,r,{value:n[r],enumerable:!1})}function l(){this._=Object.create(null)}function f(t){return(t+="")===wo||t[0]===Mo?Mo+t:t}function h(t){return(t+="")[0]===Mo?t.slice(1):t}function p(t){return f(t)in this._}function g(t){return(t=f(t))in this._&&delete this._[t]}function d(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function b(t){return t}function _(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}function x(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var r=0,e=Ao.length;e>r;++r){var i=Ao[r]+n;if(i in t)return i}}function w(){}function M(){}function A(t){function n(){for(var n,e=r,i=-1,a=e.length;++i<a;)(n=e[i].on)&&n.apply(this,arguments);return t}var r=[],e=new l;return n.on=function(n,i){var a,o=e.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,r=r.slice(0,a=r.indexOf(o)).concat(r.slice(a+1)),e.remove(n)),i&&r.push(e.set(n,{on:i})),t)},n}function E(){so.event.preventDefault()}function k(){for(var t,n=so.event;t=n.sourceEvent;)n=t;return n}function N(t){for(var n=new M,r=0,e=arguments.length;++r<e;)n[arguments[r]]=A(n);return n.of=function(r,e){return function(i){try{var a=i.sourceEvent=so.event;i.target=t,so.event=i,n[i.type].apply(r,e)}finally{so.event=a}}},n}function S(t){return ko(t,Io),t}function T(t){return"function"==typeof t?t:function(){return No(t,this)}}function I(t){return"function"==typeof t?t:function(){return So(t,this)}}function j(t,n){function r(){this.removeAttribute(t)}function e(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function a(){this.setAttributeNS(t.space,t.local,n)}function o(){var r=n.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}function u(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}return t=so.ns.qualify(t),null==n?t.local?e:r:"function"==typeof n?t.local?u:o:t.local?a:i}function L(t){return t.trim().replace(/\s+/g," ")}function U(t){return new RegExp("(?:^|\\s+)"+so.requote(t)+"(?:\\s+|$)","g")}function C(t){return(t+"").trim().split(/^|\s+/)}function R(t,n){function r(){for(var r=-1;++r<i;)t[r](this,n)}function e(){for(var r=-1,e=n.apply(this,arguments);++r<i;)t[r](this,e)}t=C(t).map(B);var i=t.length;return"function"==typeof n?e:r}function B(t){var n=U(t);return function(r,e){if(i=r.classList)return e?i.add(t):i.remove(t);var i=r.getAttribute("class")||"";e?(n.lastIndex=0,n.test(i)||r.setAttribute("class",L(i+" "+t))):r.setAttribute("class",L(i.replace(n," ")))}}function P(t,n,r){function e(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,r)}function a(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}return null==n?e:"function"==typeof n?a:i}function q(t,n){function r(){delete this[t]}function e(){this[t]=n}function i(){var r=n.apply(this,arguments);null==r?delete this[t]:this[t]=r}return null==n?r:"function"==typeof n?i:e}function D(t){function n(){var n=this.ownerDocument,r=this.namespaceURI;return r===jo&&n.documentElement.namespaceURI===jo?n.createElement(t):n.createElementNS(r,t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=so.ns.qualify(t)).local?r:n}function V(){var t=this.parentNode;t&&t.removeChild(this)}function z(t){return{__data__:t}}function F(t){return function(){return To(this,t)}}function O(t){return arguments.length||(t=e),function(n,r){return n&&r?t(n.__data__,r.__data__):!n-!r}}function Y(t,n){for(var r=0,e=t.length;e>r;r++)for(var i,a=t[r],o=0,u=a.length;u>o;o++)(i=a[o])&&n(i,o,r);return t}function H(t){return ko(t,Uo),t}function X(t){var n,r;return function(e,i,a){var o,u=t[a].update,s=u.length;for(a!=r&&(r=a,n=0),i>=n&&(n=i+1);!(o=u[n])&&++n<s;);return o}}function Z(t,n,r){function e(){var n=this[o];n&&(this.removeEventListener(t,n,n.$),delete this[o])}function i(){var i=s(n,lo(arguments));e.call(this),this.addEventListener(t,this[o]=i,i.$=r),i._=n}function a(){var n,r=new RegExp("^__on([^.]+)"+so.requote(t)+"$");for(var e in this)if(n=e.match(r)){var i=this[e];this.removeEventListener(n[1],i,i.$),delete this[e]}}var o="__on"+t,u=t.indexOf("."),s=$;u>0&&(t=t.slice(0,u));var c=Co.get(t);return c&&(t=c,s=W),u?n?i:e:n?w:a}function $(t,n){return function(r){var e=so.event;so.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{so.event=e}}}function W(t,n){var r=$(t,n);return function(t){var n=this,e=t.relatedTarget;e&&(e===n||8&e.compareDocumentPosition(n))||r.call(n,t)}}function G(n){var e=".dragsuppress-"+ ++Bo,i="click"+e,a=so.select(r(n)).on("touchmove"+e,E).on("dragstart"+e,E).on("selectstart"+e,E);if(null==Ro&&(Ro="onselectstart"in n?!1:x(n.style,"userSelect")),Ro){var o=t(n).style,u=o[Ro];o[Ro]="none"}return function(t){if(a.on(e,null),Ro&&(o[Ro]=u),t){var n=function(){a.on(i,null)};a.on(i,function(){E(),n()},!0),setTimeout(n,0)}}}function J(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();if(0>Po){var a=r(t);if(a.scrollX||a.scrollY){e=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=e[0][0].getScreenCTM();Po=!(o.f||o.e),e.remove()}}return Po?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return so.event.changedTouches[0].identifier}function Q(t){return t>0?1:0>t?-1:0}function tt(t,n,r){return(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])}function nt(t){return t>1?0:-1>t?Vo:Math.acos(t)}function rt(t){return t>1?Oo:-1>t?-Oo:Math.asin(t)}function et(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function at(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function ut(){}function st(t,n,r){return this instanceof st?(this.h=+t,this.s=+n,void(this.l=+r)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):wt(""+t,Mt,st):new st(t,n,r)}function ct(t,n,r){function e(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*e(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,r=0>r?0:r>1?1:r,o=.5>=r?r*(1+n):r+n-r*n,a=2*r-o,new mt(i(t+120),i(t),i(t-120))}function lt(t,n,r){return this instanceof lt?(this.h=+t,this.c=+n,void(this.l=+r)):arguments.length<2?t instanceof lt?new lt(t.h,t.c,t.l):t instanceof ht?gt(t.l,t.a,t.b):gt((t=At((t=so.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new lt(t,n,r)}function ft(t,n,r){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(r,Math.cos(t*=Yo)*n,Math.sin(t)*n)}function ht(t,n,r){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+r)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof lt?ft(t.h,t.c,t.l):At((t=mt(t)).r,t.g,t.b):new ht(t,n,r)}function pt(t,n,r){var e=(t+16)/116,i=e+n/500,a=e-r/200;return i=dt(i)*nu,e=dt(e)*ru,a=dt(a)*eu,new mt(yt(3.2404542*i-1.5371385*e-.4985314*a),yt(-.969266*i+1.8760108*e+.041556*a),yt(.0556434*i-.2040259*e+1.0572252*a))}function gt(t,n,r){return t>0?new lt(Math.atan2(r,n)*Ho,Math.sqrt(n*n+r*r),t):new lt(NaN,NaN,t)}function dt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,n,r){return this instanceof mt?(this.r=~~t,this.g=~~n,void(this.b=~~r)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,ct):new mt(t,n,r);
}function bt(t){return new mt(t>>16,t>>8&255,255&t)}function _t(t){return bt(t)+""}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,n,r){var e,i,a,o=0,u=0,s=0;if(e=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=e[2].split(","),e[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(kt(i[0]),kt(i[1]),kt(i[2]))}return(a=ou.get(t))?n(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o=o>>4|o,u=240&a,u=u>>4|u,s=15&a,s=s<<4|s):7===t.length&&(o=(16711680&a)>>16,u=(65280&a)>>8,s=255&a)),n(o,u,s))}function Mt(t,n,r){var e,i,a=Math.min(t/=255,n/=255,r/=255),o=Math.max(t,n,r),u=o-a,s=(o+a)/2;return u?(i=.5>s?u/(o+a):u/(2-o-a),e=t==o?(n-r)/u+(r>n?6:0):n==o?(r-t)/u+2:(t-n)/u+4,e*=60):(e=NaN,i=s>0&&1>s?0:e),new st(e,i,s)}function At(t,n,r){t=Et(t),n=Et(n),r=Et(r);var e=vt((.4124564*t+.3575761*n+.1804375*r)/nu),i=vt((.2126729*t+.7151522*n+.072175*r)/ru),a=vt((.0193339*t+.119192*n+.9503041*r)/eu);return ht(116*i-16,500*(e-i),200*(i-a))}function Et(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Nt(t){return"function"==typeof t?t:function(){return t}}function St(t){return function(n,r,e){return 2===arguments.length&&"function"==typeof r&&(e=r,r=null),Tt(n,r,t,e)}}function Tt(t,n,r,e){function i(){var t,n=s.status;if(!n&&jt(s)||n>=200&&300>n||304===n){try{t=r.call(a,s)}catch(e){return void o.error.call(a,e)}o.load.call(a,t)}else o.error.call(a,s)}var a={},o=so.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=i:s.onreadystatechange=function(){s.readyState>3&&i()},s.onprogress=function(t){var n=so.event;so.event=t;try{o.progress.call(a,s)}finally{so.event=n}},a.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",a)},a.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",a):n},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return r=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(lo(arguments)))}}),a.send=function(r,e,i){if(2===arguments.length&&"function"==typeof e&&(i=e,e=null),s.open(r,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),s.setRequestHeader)for(var l in u)s.setRequestHeader(l,u[l]);return null!=n&&s.overrideMimeType&&s.overrideMimeType(n),null!=c&&(s.responseType=c),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),o.beforesend.call(a,s),s.send(null==e?null:e),a},a.abort=function(){return s.abort(),a},so.rebind(a,o,"on"),null==e?a:a.get(It(e))}function It(t){return 1===t.length?function(n,r){t(null==n?r:null)}:t}function jt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function Lt(t,n,r){var e=arguments.length;2>e&&(n=0),3>e&&(r=Date.now());var i=r+n,a={c:t,t:i,n:null};return su?su.n=a:uu=a,su=a,cu||(lu=clearTimeout(lu),cu=1,fu(Ut)),a}function Ut(){var t=Ct(),n=Rt()-t;n>24?(isFinite(n)&&(clearTimeout(lu),lu=setTimeout(Ut,n)),cu=0):(cu=1,fu(Ut))}function Ct(){for(var t=Date.now(),n=uu;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function Rt(){for(var t,n=uu,r=1/0;n;)n.c?(n.t<r&&(r=n.t),n=(t=n).n):n=t?t.n=n.n:uu=n.n;return su=t,r}function Bt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Pt(t,n){var r=Math.pow(10,3*xo(8-n));return{scale:n>8?function(t){return t/r}:function(t){return t*r},symbol:t}}function qt(t){var n=t.decimal,r=t.thousands,e=t.grouping,i=t.currency,a=e&&r?function(t,n){for(var i=t.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),a.push(t.substring(i-=u,i+u)),!((s+=u+1)>n));)u=e[o=(o+1)%e.length];return a.reverse().join(r)}:b;return function(t){var r=pu.exec(t),e=r[1]||" ",o=r[2]||">",u=r[3]||"-",s=r[4]||"",c=r[5],l=+r[6],f=r[7],h=r[8],p=r[9],g=1,d="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(c||"0"===e&&"="===o)&&(c=e="0",o="="),p){case"n":f=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(d="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===s&&(d=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=gu.get(p)||Dt;var b=c&&f;return function(t){var r=v;if(y&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>g){var s=so.formatPrefix(t,h);t=s.scale(t),r=s.symbol+v}else t*=g;t=p(t,h);var _,x,w=t.lastIndexOf(".");if(0>w){var M=m?t.lastIndexOf("e"):-1;0>M?(_=t,x=""):(_=t.substring(0,M),x=t.substring(M))}else _=t.substring(0,w),x=n+t.substring(w+1);!c&&f&&(_=a(_,1/0));var A=d.length+_.length+x.length+(b?0:i.length),E=l>A?new Array(A=l-A+1).join(e):"";return b&&(_=a(E+_,E.length?l-x.length:1/0)),i+=d,t=_+x,("<"===o?i+t+E:">"===o?E+i+t:"^"===o?E.substring(0,A>>=1)+i+t+E.substring(A):i+(b?t:E+t))+r}}}function Dt(t){return t+""}function Vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function zt(t,n,r){function e(n){var r=t(n),e=a(r,1);return e-n>n-r?r:e}function i(r){return n(r=t(new vu(r-1)),1),r}function a(t,r){return n(t=new vu(+t),r),t}function o(t,e,a){var o=i(t),u=[];if(a>1)for(;e>o;)r(o)%a||u.push(new Date(+o)),n(o,1);else for(;e>o;)u.push(new Date(+o)),n(o,1);return u}function u(t,n,r){try{vu=Vt;var e=new Vt;return e._=t,o(e,n,r)}finally{vu=Date}}t.floor=t,t.round=e,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Ft(t);return s.floor=s,s.round=Ft(e),s.ceil=Ft(i),s.offset=Ft(a),s.range=u,t}function Ft(t){return function(n,r){try{vu=Vt;var e=new Vt;return e._=n,t(e,r)._}finally{vu=Date}}}function Ot(t){function n(t){function n(n){for(var r,i,a,o=[],u=-1,s=0;++u<e;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=mu[r=t.charAt(++u)])&&(r=t.charAt(++u)),(a=S[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),s=u+1);return o.push(t.slice(s,u)),o.join("")}var e=t.length;return n.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=r(e,t,n,0);if(i!=n.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var a=null!=e.Z&&vu!==Vt,o=new(a?Vt:vu);return"j"in e?o.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),o.setFullYear(e.y,0,1),o.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(o.getDay()+5)%7:e.w+7*e.U-(o.getDay()+6)%7)):o.setFullYear(e.y,e.m,e.d),o.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),a?o._:o},n.toString=function(){return t},n}function r(t,n,r,e){for(var i,a,o,u=0,s=n.length,c=r.length;s>u;){if(e>=c)return-1;if(i=n.charCodeAt(u++),37===i){if(o=n.charAt(u++),a=T[o in mu?n.charAt(u++):o],!a||(e=a(t,r,e))<0)return-1}else if(i!=r.charCodeAt(e++))return-1}return e}function e(t,n,r){w.lastIndex=0;var e=w.exec(n.slice(r));return e?(t.w=M.get(e[0].toLowerCase()),r+e[0].length):-1}function i(t,n,r){_.lastIndex=0;var e=_.exec(n.slice(r));return e?(t.w=x.get(e[0].toLowerCase()),r+e[0].length):-1}function a(t,n,r){k.lastIndex=0;var e=k.exec(n.slice(r));return e?(t.m=N.get(e[0].toLowerCase()),r+e[0].length):-1}function o(t,n,r){A.lastIndex=0;var e=A.exec(n.slice(r));return e?(t.m=E.get(e[0].toLowerCase()),r+e[0].length):-1}function u(t,n,e){return r(t,S.c.toString(),n,e)}function s(t,n,e){return r(t,S.x.toString(),n,e)}function c(t,n,e){return r(t,S.X.toString(),n,e)}function l(t,n,r){var e=b.get(n.slice(r,r+=2).toLowerCase());return null==e?-1:(t.p=e,r)}var f=t.dateTime,h=t.date,p=t.time,g=t.periods,d=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;n.utc=function(t){function r(t){try{vu=Vt;var n=new vu;return n._=t,e(n)}finally{vu=Date}}var e=n(t);return r.parse=function(t){try{vu=Vt;var n=e.parse(t);return n&&n._}finally{vu=Date}},r.toString=e.toString,r},n.multi=n.utc.multi=ln;var b=so.map(),_=Ht(d),x=Xt(d),w=Ht(v),M=Xt(v),A=Ht(y),E=Xt(y),k=Ht(m),N=Xt(m);g.forEach(function(t,n){b.set(t.toLowerCase(),n)});var S={a:function(t){return v[t.getDay()]},A:function(t){return d[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:n(f),d:function(t,n){return Yt(t.getDate(),n,2)},e:function(t,n){return Yt(t.getDate(),n,2)},H:function(t,n){return Yt(t.getHours(),n,2)},I:function(t,n){return Yt(t.getHours()%12||12,n,2)},j:function(t,n){return Yt(1+du.dayOfYear(t),n,3)},L:function(t,n){return Yt(t.getMilliseconds(),n,3)},m:function(t,n){return Yt(t.getMonth()+1,n,2)},M:function(t,n){return Yt(t.getMinutes(),n,2)},p:function(t){return g[+(t.getHours()>=12)]},S:function(t,n){return Yt(t.getSeconds(),n,2)},U:function(t,n){return Yt(du.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Yt(du.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Yt(t.getFullYear()%100,n,2)},Y:function(t,n){return Yt(t.getFullYear()%1e4,n,4)},Z:sn,"%":function(){return"%"}},T={a:e,A:i,b:a,B:o,c:u,d:nn,e:nn,H:en,I:en,j:rn,L:un,m:tn,M:an,p:l,S:on,U:$t,w:Zt,W:Wt,x:s,X:c,y:Jt,Y:Gt,Z:Kt,"%":cn};return n}function Yt(t,n,r){var e=0>t?"-":"",i=(e?-t:t)+"",a=i.length;return e+(r>a?new Array(r-a+1).join(n)+i:i)}function Ht(t){return new RegExp("^(?:"+t.map(so.requote).join("|")+")","i")}function Xt(t){for(var n=new l,r=-1,e=t.length;++r<e;)n.set(t[r].toLowerCase(),r);return n}function Zt(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+1));return e?(t.w=+e[0],r+e[0].length):-1}function $t(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r));return e?(t.U=+e[0],r+e[0].length):-1}function Wt(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r));return e?(t.W=+e[0],r+e[0].length):-1}function Gt(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+4));return e?(t.y=+e[0],r+e[0].length):-1}function Jt(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.y=Qt(+e[0]),r+e[0].length):-1}function Kt(t,n,r){return/^[+-]\d{4}$/.test(n=n.slice(r,r+5))?(t.Z=-n,r+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function tn(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.m=e[0]-1,r+e[0].length):-1}function nn(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.d=+e[0],r+e[0].length):-1}function rn(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+3));return e?(t.j=+e[0],r+e[0].length):-1}function en(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.H=+e[0],r+e[0].length):-1}function an(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.M=+e[0],r+e[0].length):-1}function on(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+2));return e?(t.S=+e[0],r+e[0].length):-1}function un(t,n,r){bu.lastIndex=0;var e=bu.exec(n.slice(r,r+3));return e?(t.L=+e[0],r+e[0].length):-1}function sn(t){var n=t.getTimezoneOffset(),r=n>0?"-":"+",e=xo(n)/60|0,i=xo(n)%60;return r+Yt(e,"0",2)+Yt(i,"0",2)}function cn(t,n,r){_u.lastIndex=0;var e=_u.exec(n.slice(r,r+1));return e?r+e[0].length:-1}function ln(t){for(var n=t.length,r=-1;++r<n;)t[r][0]=this(t[r][0]);return function(n){for(var r=0,e=t[r];!e[1](n);)e=t[++r];return e[0](n)}}function fn(){}function hn(t,n,r){var e=r.s=t+n,i=e-t,a=e-i;r.t=t-a+(n-i)}function pn(t,n){t&&Au.hasOwnProperty(t.type)&&Au[t.type](t,n)}function gn(t,n,r){var e,i=-1,a=t.length-r;for(n.lineStart();++i<a;)e=t[i],n.point(e[0],e[1],e[2]);n.lineEnd()}function dn(t,n){var r=-1,e=t.length;for(n.polygonStart();++r<e;)gn(t[r],n,1);n.polygonEnd()}function vn(){function t(t,n){t*=Yo,n=n*Yo/2+Vo/4;var r=t-e,o=r>=0?1:-1,u=o*r,s=Math.cos(n),c=Math.sin(n),l=a*c,f=i*s+l*Math.cos(u),h=l*o*Math.sin(u);ku.add(Math.atan2(h,f)),e=t,i=s,a=c}var n,r,e,i,a;Nu.point=function(o,u){Nu.point=t,e=(n=o)*Yo,i=Math.cos(u=(r=u)*Yo/2+Vo/4),a=Math.sin(u)},Nu.lineEnd=function(){t(n,r)}}function yn(t){var n=t[0],r=t[1],e=Math.cos(r);return[e*Math.cos(n),e*Math.sin(n),Math.sin(r)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function bn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Mn(t){return[Math.atan2(t[1],t[0]),rt(t[2])]}function An(t,n){return xo(t[0]-n[0])<qo&&xo(t[1]-n[1])<qo}function En(t,n){t*=Yo;var r=Math.cos(n*=Yo);kn(r*Math.cos(t),r*Math.sin(t),Math.sin(n))}function kn(t,n,r){++Su,Iu+=(t-Iu)/Su,ju+=(n-ju)/Su,Lu+=(r-Lu)/Su}function Nn(){function t(t,i){t*=Yo;var a=Math.cos(i*=Yo),o=a*Math.cos(t),u=a*Math.sin(t),s=Math.sin(i),c=Math.atan2(Math.sqrt((c=r*s-e*u)*c+(c=e*o-n*s)*c+(c=n*u-r*o)*c),n*o+r*u+e*s);Tu+=c,Uu+=c*(n+(n=o)),Cu+=c*(r+(r=u)),Ru+=c*(e+(e=s)),kn(n,r,e)}var n,r,e;Du.point=function(i,a){i*=Yo;var o=Math.cos(a*=Yo);n=o*Math.cos(i),r=o*Math.sin(i),e=Math.sin(a),Du.point=t,kn(n,r,e)}}function Sn(){Du.point=En}function Tn(){function t(t,n){t*=Yo;var r=Math.cos(n*=Yo),o=r*Math.cos(t),u=r*Math.sin(t),s=Math.sin(n),c=i*s-a*u,l=a*o-e*s,f=e*u-i*o,h=Math.sqrt(c*c+l*l+f*f),p=e*o+i*u+a*s,g=h&&-nt(p)/h,d=Math.atan2(h,p);Bu+=g*c,Pu+=g*l,qu+=g*f,Tu+=d,Uu+=d*(e+(e=o)),Cu+=d*(i+(i=u)),Ru+=d*(a+(a=s)),kn(e,i,a)}var n,r,e,i,a;Du.point=function(o,u){n=o,r=u,Du.point=t,o*=Yo;var s=Math.cos(u*=Yo);e=s*Math.cos(o),i=s*Math.sin(o),a=Math.sin(u),kn(e,i,a)},Du.lineEnd=function(){t(n,r),Du.lineEnd=Sn,Du.point=En}}function In(t,n){function r(r,e){return r=t(r,e),n(r[0],r[1])}return t.invert&&n.invert&&(r.invert=function(r,e){return r=n.invert(r,e),r&&t.invert(r[0],r[1])}),r}function jn(){return!0}function Ln(t,n,r,e,i){var a=[],o=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,r=t[0],e=t[n];if(An(r,e)){i.lineStart();for(var u=0;n>u;++u)i.point((r=t[u])[0],r[1]);return void i.lineEnd()}var s=new Cn(r,t,null,!0),c=new Cn(r,null,s,!1);s.o=c,a.push(s),o.push(c),s=new Cn(e,t,null,!1),c=new Cn(e,null,s,!0),s.o=c,a.push(s),o.push(c)}}),o.sort(n),Un(a),Un(o),a.length){for(var u=0,s=r,c=o.length;c>u;++u)o[u].e=s=!s;for(var l,f,h=a[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var u=0,c=l.length;c>u;++u)i.point((f=l[u])[0],f[1]);else e(p.x,p.n.x,1,i);p=p.n}else{if(g){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((f=l[u])[0],f[1])}else e(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,g=!g}while(!p.v);i.lineEnd()}}}function Un(t){if(n=t.length){for(var n,r,e=0,i=t[0];++e<n;)i.n=r=t[e],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Cn(t,n,r,e){this.x=t,this.z=n,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function Rn(t,n,r,e){return function(i,a){function o(n,r){var e=i(n,r);t(n=e[0],r=e[1])&&a.point(n,r)}function u(t,n){var r=i(t,n);v.point(r[0],r[1])}function s(){m.point=u,v.lineStart()}function c(){m.point=o,v.lineEnd()}function l(t,n){d.push([t,n]);var r=i(t,n);_.point(r[0],r[1])}function f(){_.lineStart(),d=[]}function h(){l(d[0][0],d[0][1]),_.lineEnd();var t,n=_.clean(),r=b.buffer(),e=r.length;if(d.pop(),g.push(d),d=null,e)if(1&n){t=r[0];var i,e=t.length-1,o=-1;if(e>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<e;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else e>1&&2&n&&r.push(r.pop().concat(r.shift())),p.push(r.filter(Bn))}var p,g,d,v=n(a),y=i.invert(e[0],e[1]),m={point:o,lineStart:s,lineEnd:c,polygonStart:function(){m.point=l,m.lineStart=f,m.lineEnd=h,p=[],g=[]},polygonEnd:function(){m.point=o,m.lineStart=s,m.lineEnd=c,p=so.merge(p);var t=Fn(y,g);p.length?(x||(a.polygonStart(),x=!0),Ln(p,qn,t,r,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),p=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Pn(),_=n(b),x=!1;return m}}function Bn(t){return t.length>1}function Pn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,r){t.push([n,r])},lineEnd:w,buffer:function(){var r=n;return n=[],t=null,r},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function qn(t,n){return((t=t.x)[0]<0?t[1]-Oo-qo:Oo-t[1])-((n=n.x)[0]<0?n[1]-Oo-qo:Oo-n[1])}function Dn(t){var n,r=NaN,e=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(a,o){var u=a>0?Vo:-Vo,s=xo(a-r);xo(s-Vo)<qo?(t.point(r,e=(e+o)/2>0?Oo:-Oo),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),t.point(a,e),n=0):i!==u&&s>=Vo&&(xo(r-i)<qo&&(r-=i*qo),xo(a-u)<qo&&(a-=u*qo),e=Vn(r,e,a,o),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),n=0),t.point(r=a,e=o),i=u},lineEnd:function(){t.lineEnd(),r=e=NaN},clean:function(){return 2-n}}}function Vn(t,n,r,e){var i,a,o=Math.sin(t-r);return xo(o)>qo?Math.atan((Math.sin(n)*(a=Math.cos(e))*Math.sin(r)-Math.sin(e)*(i=Math.cos(n))*Math.sin(t))/(i*a*o)):(n+e)/2}function zn(t,n,r,e){var i;if(null==t)i=r*Oo,e.point(-Vo,i),e.point(0,i),e.point(Vo,i),e.point(Vo,0),e.point(Vo,-i),e.point(0,-i),e.point(-Vo,-i),e.point(-Vo,0),e.point(-Vo,i);else if(xo(t[0]-n[0])>qo){var a=t[0]<n[0]?Vo:-Vo;i=r*a/2,e.point(-a,i),e.point(0,i),e.point(a,i)}else e.point(n[0],n[1])}function Fn(t,n){var r=t[0],e=t[1],i=[Math.sin(r),-Math.cos(r),0],a=0,o=0;ku.reset();for(var u=0,s=n.length;s>u;++u){var c=n[u],l=c.length;if(l)for(var f=c[0],h=f[0],p=f[1]/2+Vo/4,g=Math.sin(p),d=Math.cos(p),v=1;;){v===l&&(v=0),t=c[v];var y=t[0],m=t[1]/2+Vo/4,b=Math.sin(m),_=Math.cos(m),x=y-h,w=x>=0?1:-1,M=w*x,A=M>Vo,E=g*b;if(ku.add(Math.atan2(E*w*Math.sin(M),d*_+E*Math.cos(M))),a+=A?x+w*zo:x,A^h>=r^y>=r){var k=bn(yn(f),yn(t));wn(k);var N=bn(i,k);wn(N);var S=(A^x>=0?-1:1)*rt(N[2]);(e>S||e===S&&(k[0]||k[1]))&&(o+=A^x>=0?1:-1)}if(!v++)break;h=y,g=b,d=_,f=t}}return(-qo>a||qo>a&&0>ku)^1&o}function On(t){function n(t,n){return Math.cos(t)*Math.cos(n)>a}function r(t){var r,a,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,h){var p,g=[f,h],d=n(f,h),v=o?d?0:i(f,h):d?i(f+(0>f?Vo:-Vo),h):0;if(!r&&(c=s=d)&&t.lineStart(),d!==s&&(p=e(r,g),(An(r,p)||An(g,p))&&(g[0]+=qo,g[1]+=qo,d=n(g[0],g[1]))),d!==s)l=0,d?(t.lineStart(),p=e(g,r),t.point(p[0],p[1])):(p=e(r,g),t.point(p[0],p[1]),t.lineEnd()),r=p;else if(u&&r&&o^d){var y;v&a||!(y=e(g,r,!0))||(l=0,o?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!d||r&&An(r,g)||t.point(g[0],g[1]),r=g,s=d,a=v},lineEnd:function(){s&&t.lineEnd(),r=null},clean:function(){return l|(c&&s)<<1}}}function e(t,n,r){var e=yn(t),i=yn(n),o=[1,0,0],u=bn(e,i),s=mn(u,u),c=u[0],l=s-c*c;if(!l)return!r&&t;var f=a*s/l,h=-a*c/l,p=bn(o,u),g=xn(o,f),d=xn(u,h);_n(g,d);var v=p,y=mn(g,v),m=mn(v,v),b=y*y-m*(mn(g,g)-1);if(!(0>b)){var _=Math.sqrt(b),x=xn(v,(-y-_)/m);if(_n(x,g),x=Mn(x),!r)return x;var w,M=t[0],A=n[0],E=t[1],k=n[1];M>A&&(w=M,M=A,A=w);var N=A-M,S=xo(N-Vo)<qo,T=S||qo>N;if(!S&&E>k&&(w=E,E=k,k=w),T?S?E+k>0^x[1]<(xo(x[0]-M)<qo?E:k):E<=x[1]&&x[1]<=k:N>Vo^(M<=x[0]&&x[0]<=A)){var I=xn(v,(-y+_)/m);return _n(I,g),[x,Mn(I)]}}}function i(n,r){var e=o?t:Vo-t,i=0;return-e>n?i|=1:n>e&&(i|=2),-e>r?i|=4:r>e&&(i|=8),i}var a=Math.cos(t),o=a>0,u=xo(a)>qo,s=vr(t,6*Yo);return Rn(n,r,s,o?[0,-t]:[-Vo,t-Vo])}function Yn(t,n,r,e){return function(i){var a,o=i.a,u=i.b,s=o.x,c=o.y,l=u.x,f=u.y,h=0,p=1,g=l-s,d=f-c;if(a=t-s,g||!(a>0)){if(a/=g,0>g){if(h>a)return;p>a&&(p=a)}else if(g>0){if(a>p)return;a>h&&(h=a)}if(a=r-s,g||!(0>a)){if(a/=g,0>g){if(a>p)return;a>h&&(h=a)}else if(g>0){if(h>a)return;p>a&&(p=a)}if(a=n-c,d||!(a>0)){if(a/=d,0>d){if(h>a)return;p>a&&(p=a)}else if(d>0){if(a>p)return;a>h&&(h=a)}if(a=e-c,d||!(0>a)){if(a/=d,0>d){if(a>p)return;a>h&&(h=a)}else if(d>0){if(h>a)return;p>a&&(p=a)}return h>0&&(i.a={x:s+h*g,y:c+h*d}),1>p&&(i.b={x:s+p*g,y:c+p*d}),i}}}}}}function Hn(t,n,r,e){function i(e,i){return xo(e[0]-t)<qo?i>0?0:3:xo(e[0]-r)<qo?i>0?2:1:xo(e[1]-n)<qo?i>0?1:0:i>0?3:2}function a(t,n){return o(t.x,n.x)}function o(t,n){var r=i(t,1),e=i(n,1);return r!==e?r-e:0===r?n[1]-t[1]:1===r?t[0]-n[0]:2===r?t[1]-n[1]:n[0]-t[0]}return function(u){function s(t){for(var n=0,r=v.length,e=t[1],i=0;r>i;++i)for(var a,o=1,u=v[i],s=u.length,c=u[0];s>o;++o)a=u[o],c[1]<=e?a[1]>e&&tt(c,a,t)>0&&++n:a[1]<=e&&tt(c,a,t)<0&&--n,c=a;return 0!==n}function c(a,u,s,c){var l=0,f=0;if(null==a||(l=i(a,s))!==(f=i(u,s))||o(a,u)<0^s>0){do c.point(0===l||3===l?t:r,l>1?e:n);while((l=(l+s+4)%4)!==f)}else c.point(u[0],u[1])}function l(i,a){return i>=t&&r>=i&&a>=n&&e>=a}function f(t,n){l(t,n)&&u.point(t,n)}function h(){T.point=g,v&&v.push(y=[]),A=!0,M=!1,x=w=NaN}function p(){d&&(g(m,b),_&&M&&N.rejoin(),d.push(N.buffer())),T.point=f,M&&u.lineEnd()}function g(t,n){t=Math.max(-zu,Math.min(zu,t)),n=Math.max(-zu,Math.min(zu,n));var r=l(t,n);if(v&&y.push([t,n]),A)m=t,b=n,_=r,A=!1,r&&(u.lineStart(),u.point(t,n));else if(r&&M)u.point(t,n);else{var e={a:{x:x,y:w},b:{x:t,y:n}};S(e)?(M||(u.lineStart(),u.point(e.a.x,e.a.y)),u.point(e.b.x,e.b.y),r||u.lineEnd(),E=!1):r&&(u.lineStart(),u.point(t,n),E=!1)}x=t,w=n,M=r}var d,v,y,m,b,_,x,w,M,A,E,k=u,N=Pn(),S=Yn(t,n,r,e),T={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=N,d=[],v=[],E=!0},polygonEnd:function(){u=k,d=so.merge(d);var n=s([t,e]),r=E&&n,i=d.length;(r||i)&&(u.polygonStart(),r&&(u.lineStart(),c(null,null,1,u),u.lineEnd()),i&&Ln(d,a,n,c,u),u.polygonEnd()),d=v=y=null}};return T}}function Xn(t){var n=0,r=Vo/3,e=sr(t),i=e(n,r);return i.parallels=function(t){return arguments.length?e(n=t[0]*Vo/180,r=t[1]*Vo/180):[n/Vo*180,r/Vo*180]},i}function Zn(t,n){function r(t,n){var r=Math.sqrt(a-2*i*Math.sin(n))/i;return[r*Math.sin(t*=i),o-r*Math.cos(t)]}var e=Math.sin(t),i=(e+Math.sin(n))/2,a=1+e*(2*i-e),o=Math.sqrt(a)/i;return r.invert=function(t,n){var r=o-n;return[Math.atan2(t,r)/i,rt((a-(t*t+r*r)*i*i)/(2*i))]},r}function $n(){function t(t,n){Ou+=i*t-e*n,e=t,i=n}var n,r,e,i;$u.point=function(a,o){$u.point=t,n=e=a,r=i=o},$u.lineEnd=function(){t(n,r)}}function Wn(t,n){Yu>t&&(Yu=t),t>Xu&&(Xu=t),Hu>n&&(Hu=n),n>Zu&&(Zu=n)}function Gn(){function t(t,n){o.push("M",t,",",n,a)}function n(t,n){o.push("M",t,",",n),u.point=r}function r(t,n){o.push("L",t,",",n)}function e(){u.point=t}function i(){o.push("Z")}var a=Jn(4.5),o=[],u={point:t,lineStart:function(){u.point=n},lineEnd:e,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=e,u.point=t},pointRadius:function(t){return a=Jn(t),u},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return u}function Jn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kn(t,n){Iu+=t,ju+=n,++Lu}function Qn(){function t(t,e){var i=t-n,a=e-r,o=Math.sqrt(i*i+a*a);Uu+=o*(n+t)/2,Cu+=o*(r+e)/2,Ru+=o,Kn(n=t,r=e)}var n,r;Gu.point=function(e,i){Gu.point=t,Kn(n=e,r=i)}}function tr(){Gu.point=Kn}function nr(){function t(t,n){var r=t-e,a=n-i,o=Math.sqrt(r*r+a*a);Uu+=o*(e+t)/2,Cu+=o*(i+n)/2,Ru+=o,o=i*t-e*n,Bu+=o*(e+t),Pu+=o*(i+n),qu+=3*o,Kn(e=t,i=n)}var n,r,e,i;Gu.point=function(a,o){Gu.point=t,Kn(n=e=a,r=i=o)},Gu.lineEnd=function(){t(n,r)}}function rr(t){function n(n,r){t.moveTo(n+o,r),t.arc(n,r,o,0,zo)}function r(n,r){t.moveTo(n,r),u.point=e}function e(n,r){t.lineTo(n,r)}function i(){u.point=n}function a(){t.closePath()}var o=4.5,u={point:n,lineStart:function(){u.point=r},lineEnd:i,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return o=t,u},result:w};return u}function er(t){function n(t){return(u?e:r)(t)}function r(n){return or(n,function(r,e){r=t(r,e),n.point(r[0],r[1])})}function e(n){function r(r,e){r=t(r,e),n.point(r[0],r[1])}function e(){b=NaN,A.point=a,n.lineStart()}function a(r,e){var a=yn([r,e]),o=t(r,e);i(b,_,m,x,w,M,b=o[0],_=o[1],m=r,x=a[0],w=a[1],M=a[2],u,n),n.point(b,_)}function o(){A.point=r,n.lineEnd()}function s(){e(),A.point=c,A.lineEnd=l}function c(t,n){a(f=t,h=n),p=b,g=_,d=x,v=w,y=M,A.point=a}function l(){i(b,_,m,x,w,M,p,g,f,d,v,y,u,n),A.lineEnd=o,o()}var f,h,p,g,d,v,y,m,b,_,x,w,M,A={point:r,lineStart:e,lineEnd:o,polygonStart:function(){n.polygonStart(),A.lineStart=s},polygonEnd:function(){n.polygonEnd(),A.lineStart=e}};return A}function i(n,r,e,u,s,c,l,f,h,p,g,d,v,y){var m=l-n,b=f-r,_=m*m+b*b;if(_>4*a&&v--){var x=u+p,w=s+g,M=c+d,A=Math.sqrt(x*x+w*w+M*M),E=Math.asin(M/=A),k=xo(xo(M)-1)<qo||xo(e-h)<qo?(e+h)/2:Math.atan2(w,x),N=t(k,E),S=N[0],T=N[1],I=S-n,j=T-r,L=b*I-m*j;(L*L/_>a||xo((m*I+b*j)/_-.5)>.3||o>u*p+s*g+c*d)&&(i(n,r,e,u,s,c,S,T,k,x/=A,w/=A,M,v,y),y.point(S,T),i(S,T,k,x,w,M,l,f,h,p,g,d,v,y))}}var a=.5,o=Math.cos(30*Yo),u=16;return n.precision=function(t){return arguments.length?(u=(a=t*t)>0&&16,n):Math.sqrt(a)},n}function ir(t){var n=er(function(n,r){return t([n*Ho,r*Ho])});return function(t){return cr(n(t))}}function ar(t){this.stream=t}function or(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ur(t){return sr(function(){return t})()}function sr(t){function n(t){return t=u(t[0]*Yo,t[1]*Yo),[t[0]*h+s,c-t[1]*h]}function r(t){return t=u.invert((t[0]-s)/h,(c-t[1])/h),t&&[t[0]*Ho,t[1]*Ho]}function e(){u=In(o=hr(y,m,_),a);var t=a(d,v);return s=p-t[0]*h,c=g+t[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),n}var a,o,u,s,c,l,f=er(function(t,n){return t=a(t,n),[t[0]*h+s,c-t[1]*h]}),h=150,p=480,g=250,d=0,v=0,y=0,m=0,_=0,x=Vu,w=b,M=null,A=null;return n.stream=function(t){return l&&(l.valid=!1),l=cr(x(o,f(w(t)))),l.valid=!0,l},n.clipAngle=function(t){return arguments.length?(x=null==t?(M=t,Vu):On((M=+t)*Yo),i()):M},n.clipExtent=function(t){return arguments.length?(A=t,w=t?Hn(t[0][0],t[0][1],t[1][0],t[1][1]):b,i()):A},n.scale=function(t){return arguments.length?(h=+t,e()):h},n.translate=function(t){return arguments.length?(p=+t[0],g=+t[1],e()):[p,g]},n.center=function(t){return arguments.length?(d=t[0]%360*Yo,v=t[1]%360*Yo,e()):[d*Ho,v*Ho]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Yo,m=t[1]%360*Yo,_=t.length>2?t[2]%360*Yo:0,e()):[y*Ho,m*Ho,_*Ho]},so.rebind(n,f,"precision"),function(){return a=t.apply(this,arguments),n.invert=a.invert&&r,e()}}function cr(t){return or(t,function(n,r){t.point(n*Yo,r*Yo)})}function lr(t,n){return[t,n]}function fr(t,n){return[t>Vo?t-zo:-Vo>t?t+zo:t,n]}function hr(t,n,r){return t?n||r?In(gr(t),dr(n,r)):gr(t):n||r?dr(n,r):fr}function pr(t){return function(n,r){return n+=t,[n>Vo?n-zo:-Vo>n?n+zo:n,r]}}function gr(t){var n=pr(t);return n.invert=pr(-t),n}function dr(t,n){function r(t,n){var r=Math.cos(n),u=Math.cos(t)*r,s=Math.sin(t)*r,c=Math.sin(n),l=c*e+u*i;return[Math.atan2(s*a-l*o,u*e-c*i),rt(l*a+s*o)]}var e=Math.cos(t),i=Math.sin(t),a=Math.cos(n),o=Math.sin(n);return r.invert=function(t,n){var r=Math.cos(n),u=Math.cos(t)*r,s=Math.sin(t)*r,c=Math.sin(n),l=c*a-s*o;return[Math.atan2(s*a+c*o,u*e+l*i),rt(l*e-u*i)]},r}function vr(t,n){var r=Math.cos(t),e=Math.sin(t);return function(i,a,o,u){var s=o*n;null!=i?(i=yr(r,i),a=yr(r,a),(o>0?a>i:i>a)&&(i+=o*zo)):(i=t+o*zo,a=t-.5*s);for(var c,l=i;o>0?l>a:a>l;l-=s)u.point((c=Mn([r,-e*Math.cos(l),-e*Math.sin(l)]))[0],c[1])}}function yr(t,n){var r=yn(n);r[0]-=t,wn(r);var e=nt(-r[1]);return((-r[2]<0?-e:e)+2*Math.PI-qo)%(2*Math.PI)}function mr(t,n,r){var e=so.range(t,n-qo,r).concat(n);return function(t){return e.map(function(n){return[t,n]})}}function br(t,n,r){var e=so.range(t,n-qo,r).concat(n);return function(t){return e.map(function(n){return[n,t]})}}function _r(t){return t.source}function xr(t){return t.target}function wr(t,n,r,e){var i=Math.cos(n),a=Math.sin(n),o=Math.cos(e),u=Math.sin(e),s=i*Math.cos(t),c=i*Math.sin(t),l=o*Math.cos(r),f=o*Math.sin(r),h=2*Math.asin(Math.sqrt(ot(e-n)+i*o*ot(r-t))),p=1/Math.sin(h),g=h?function(t){var n=Math.sin(t*=h)*p,r=Math.sin(h-t)*p,e=r*s+n*l,i=r*c+n*f,o=r*a+n*u;return[Math.atan2(i,e)*Ho,Math.atan2(o,Math.sqrt(e*e+i*i))*Ho]}:function(){return[t*Ho,n*Ho]};return g.distance=h,g}function Mr(){function t(t,i){var a=Math.sin(i*=Yo),o=Math.cos(i),u=xo((t*=Yo)-n),s=Math.cos(u);Ju+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=e*a-r*o*s)*u),r*a+e*o*s),n=t,r=a,e=o}var n,r,e;Ku.point=function(i,a){n=i*Yo,r=Math.sin(a*=Yo),e=Math.cos(a),Ku.point=t},Ku.lineEnd=function(){Ku.point=Ku.lineEnd=w}}function Ar(t,n){function r(n,r){var e=Math.cos(n),i=Math.cos(r),a=t(e*i);return[a*i*Math.sin(n),a*Math.sin(r)]}return r.invert=function(t,r){var e=Math.sqrt(t*t+r*r),i=n(e),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,e*o),Math.asin(e&&r*a/e)]},r}function Er(t,n){function r(t,n){o>0?-Oo+qo>n&&(n=-Oo+qo):n>Oo-qo&&(n=Oo-qo);var r=o/Math.pow(i(n),a);return[r*Math.sin(a*t),o-r*Math.cos(a*t)]}var e=Math.cos(t),i=function(t){return Math.tan(Vo/4+t/2)},a=t===n?Math.sin(t):Math.log(e/Math.cos(n))/Math.log(i(n)/i(t)),o=e*Math.pow(i(t),a)/a;return a?(r.invert=function(t,n){var r=o-n,e=Q(a)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/a,2*Math.atan(Math.pow(o/e,1/a))-Oo]},r):Nr}function kr(t,n){function r(t,n){var r=a-n;return[r*Math.sin(i*t),a-r*Math.cos(i*t)]}var e=Math.cos(t),i=t===n?Math.sin(t):(e-Math.cos(n))/(n-t),a=e/i+t;return xo(i)<qo?lr:(r.invert=function(t,n){var r=a-n;return[Math.atan2(t,r)/i,a-Q(i)*Math.sqrt(t*t+r*r)]},r)}function Nr(t,n){return[t,Math.log(Math.tan(Vo/4+n/2))]}function Sr(t){var n,r=ur(t),e=r.scale,i=r.translate,a=r.clipExtent;return r.scale=function(){var t=e.apply(r,arguments);return t===r?n?r.clipExtent(null):r:t},r.translate=function(){var t=i.apply(r,arguments);return t===r?n?r.clipExtent(null):r:t},r.clipExtent=function(t){var o=a.apply(r,arguments);if(o===r){if(n=null==t){var u=Vo*e(),s=i();a([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else n&&(o=null);return o},r.clipExtent(null)}function Tr(t,n){return[Math.log(Math.tan(Vo/4+n/2)),-t]}function Ir(t){return t[0]}function jr(t){return t[1]}function Lr(t){for(var n=t.length,r=[0,1],e=2,i=2;n>i;i++){for(;e>1&&tt(t[r[e-2]],t[r[e-1]],t[i])<=0;)--e;r[e++]=i}return r.slice(0,e)}function Ur(t,n){return t[0]-n[0]||t[1]-n[1]}function Cr(t,n,r){return(r[0]-n[0])*(t[1]-n[1])<(r[1]-n[1])*(t[0]-n[0])}function Rr(t,n,r,e){var i=t[0],a=r[0],o=n[0]-i,u=e[0]-a,s=t[1],c=r[1],l=n[1]-s,f=e[1]-c,h=(u*(s-c)-f*(i-a))/(f*o-u*l);return[i+h*o,s+h*l]}function Br(t){var n=t[0],r=t[t.length-1];return!(n[0]-r[0]||n[1]-r[1])}function Pr(){ie(this),this.edge=this.site=this.circle=null}function qr(t){var n=ls.pop()||new Pr;return n.site=t,n}function Dr(t){Wr(t),us.remove(t),ls.push(t),ie(t)}function Vr(t){var n=t.circle,r=n.x,e=n.cy,i={x:r,y:e},a=t.P,o=t.N,u=[t];Dr(t);for(var s=a;s.circle&&xo(r-s.circle.x)<qo&&xo(e-s.circle.cy)<qo;)a=s.P,u.unshift(s),Dr(s),s=a;u.unshift(s),Wr(s);for(var c=o;c.circle&&xo(r-c.circle.x)<qo&&xo(e-c.circle.cy)<qo;)o=c.N,u.push(c),Dr(c),c=o;u.push(c),Wr(c);var l,f=u.length;for(l=1;f>l;++l)c=u[l],s=u[l-1],ne(c.edge,s.site,c.site,i);s=u[0],c=u[f-1],c.edge=Qr(s.site,c.site,null,i),$r(s),$r(c)}function zr(t){for(var n,r,e,i,a=t.x,o=t.y,u=us._;u;)if(e=Fr(u,o)-a,e>qo)u=u.L;else{if(i=a-Or(u,o),!(i>qo)){e>-qo?(n=u.P,r=u):i>-qo?(n=u,r=u.N):n=r=u;break}if(!u.R){n=u;break}u=u.R}var s=qr(t);if(us.insert(n,s),n||r){if(n===r)return Wr(n),r=qr(n.site),us.insert(s,r),s.edge=r.edge=Qr(n.site,s.site),$r(n),void $r(r);if(!r)return void(s.edge=Qr(n.site,s.site));Wr(n),Wr(r);var c=n.site,l=c.x,f=c.y,h=t.x-l,p=t.y-f,g=r.site,d=g.x-l,v=g.y-f,y=2*(h*v-p*d),m=h*h+p*p,b=d*d+v*v,_={x:(v*m-p*b)/y+l,y:(h*b-d*m)/y+f};ne(r.edge,c,g,_),s.edge=Qr(c,t,null,_),r.edge=Qr(t,g,null,_),$r(n),$r(r)}}function Fr(t,n){var r=t.site,e=r.x,i=r.y,a=i-n;if(!a)return e;var o=t.P;if(!o)return-(1/0);r=o.site;var u=r.x,s=r.y,c=s-n;if(!c)return u;var l=u-e,f=1/a-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-s+c/2+i-a/2)))/f+e:(e+u)/2}function Or(t,n){var r=t.N;if(r)return Fr(r,n);var e=t.site;return e.y===n?e.x:1/0}function Yr(t){this.site=t,this.edges=[]}function Hr(t){for(var n,r,e,i,a,o,u,s,c,l,f=t[0][0],h=t[1][0],p=t[0][1],g=t[1][1],d=os,v=d.length;v--;)if(a=d[v],a&&a.prepare())for(u=a.edges,s=u.length,o=0;s>o;)l=u[o].end(),e=l.x,i=l.y,c=u[++o%s].start(),n=c.x,r=c.y,(xo(e-n)>qo||xo(i-r)>qo)&&(u.splice(o,0,new re(te(a.site,l,xo(e-f)<qo&&g-i>qo?{x:f,y:xo(n-f)<qo?r:g}:xo(i-g)<qo&&h-e>qo?{x:xo(r-g)<qo?n:h,y:g}:xo(e-h)<qo&&i-p>qo?{x:h,y:xo(n-h)<qo?r:p}:xo(i-p)<qo&&e-f>qo?{x:xo(r-p)<qo?n:f,y:p}:null),a.site,null)),++s)}function Xr(t,n){return n.angle-t.angle}function Zr(){ie(this),this.x=this.y=this.arc=this.site=this.cy=null;
}function $r(t){var n=t.P,r=t.N;if(n&&r){var e=n.site,i=t.site,a=r.site;if(e!==a){var o=i.x,u=i.y,s=e.x-o,c=e.y-u,l=a.x-o,f=a.y-u,h=2*(s*f-c*l);if(!(h>=-Do)){var p=s*s+c*c,g=l*l+f*f,d=(f*p-c*g)/h,v=(s*g-l*p)/h,f=v+u,y=fs.pop()||new Zr;y.arc=t,y.site=i,y.x=d+o,y.y=f+Math.sqrt(d*d+v*v),y.cy=f,t.circle=y;for(var m=null,b=cs._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}cs.insert(m,y),m||(ss=y)}}}}function Wr(t){var n=t.circle;n&&(n.P||(ss=n.N),cs.remove(n),fs.push(n),ie(n),t.circle=null)}function Gr(t){for(var n,r=as,e=Yn(t[0][0],t[0][1],t[1][0],t[1][1]),i=r.length;i--;)n=r[i],(!Jr(n,t)||!e(n)||xo(n.a.x-n.b.x)<qo&&xo(n.a.y-n.b.y)<qo)&&(n.a=n.b=null,r.splice(i,1))}function Jr(t,n){var r=t.b;if(r)return!0;var e,i,a=t.a,o=n[0][0],u=n[1][0],s=n[0][1],c=n[1][1],l=t.l,f=t.r,h=l.x,p=l.y,g=f.x,d=f.y,v=(h+g)/2,y=(p+d)/2;if(d===p){if(o>v||v>=u)return;if(h>g){if(a){if(a.y>=c)return}else a={x:v,y:s};r={x:v,y:c}}else{if(a){if(a.y<s)return}else a={x:v,y:c};r={x:v,y:s}}}else if(e=(h-g)/(d-p),i=y-e*v,-1>e||e>1)if(h>g){if(a){if(a.y>=c)return}else a={x:(s-i)/e,y:s};r={x:(c-i)/e,y:c}}else{if(a){if(a.y<s)return}else a={x:(c-i)/e,y:c};r={x:(s-i)/e,y:s}}else if(d>p){if(a){if(a.x>=u)return}else a={x:o,y:e*o+i};r={x:u,y:e*u+i}}else{if(a){if(a.x<o)return}else a={x:u,y:e*u+i};r={x:o,y:e*o+i}}return t.a=a,t.b=r,!0}function Kr(t,n){this.l=t,this.r=n,this.a=this.b=null}function Qr(t,n,r,e){var i=new Kr(t,n);return as.push(i),r&&ne(i,t,n,r),e&&ne(i,n,t,e),os[t.i].edges.push(new re(i,t,n)),os[n.i].edges.push(new re(i,n,t)),i}function te(t,n,r){var e=new Kr(t,null);return e.a=n,e.b=r,as.push(e),e}function ne(t,n,r,e){t.a||t.b?t.l===r?t.b=e:t.a=e:(t.a=e,t.l=n,t.r=r)}function re(t,n,r){var e=t.a,i=t.b;this.edge=t,this.site=n,this.angle=r?Math.atan2(r.y-n.y,r.x-n.x):t.l===n?Math.atan2(i.x-e.x,e.y-i.y):Math.atan2(e.x-i.x,i.y-e.y)}function ee(){this._=null}function ie(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ae(t,n){var r=n,e=n.R,i=r.U;i?i.L===r?i.L=e:i.R=e:t._=e,e.U=i,r.U=e,r.R=e.L,r.R&&(r.R.U=r),e.L=r}function oe(t,n){var r=n,e=n.L,i=r.U;i?i.L===r?i.L=e:i.R=e:t._=e,e.U=i,r.U=e,r.L=e.R,r.L&&(r.L.U=r),e.R=r}function ue(t){for(;t.L;)t=t.L;return t}function se(t,n){var r,e,i,a=t.sort(ce).pop();for(as=[],os=new Array(t.length),us=new ee,cs=new ee;;)if(i=ss,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==r||a.y!==e)&&(os[a.i]=new Yr(a),zr(a),r=a.x,e=a.y),a=t.pop();else{if(!i)break;Vr(i.arc)}n&&(Gr(n),Hr(n));var o={cells:os,edges:as};return us=cs=as=os=null,o}function ce(t,n){return n.y-t.y||n.x-t.x}function le(t,n,r){return(t.x-r.x)*(n.y-t.y)-(t.x-n.x)*(r.y-t.y)}function fe(t){return t.x}function he(t){return t.y}function pe(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ge(t,n,r,e,i,a){if(!t(n,r,e,i,a)){var o=.5*(r+i),u=.5*(e+a),s=n.nodes;s[0]&&ge(t,s[0],r,e,o,u),s[1]&&ge(t,s[1],o,e,i,u),s[2]&&ge(t,s[2],r,u,o,a),s[3]&&ge(t,s[3],o,u,i,a)}}function de(t,n,r,e,i,a,o){var u,s=1/0;return function c(t,l,f,h,p){if(!(l>a||f>o||e>h||i>p)){if(g=t.point){var g,d=n-t.x,v=r-t.y,y=d*d+v*v;if(s>y){var m=Math.sqrt(s=y);e=n-m,i=r-m,a=n+m,o=r+m,u=g}}for(var b=t.nodes,_=.5*(l+h),x=.5*(f+p),w=n>=_,M=r>=x,A=M<<1|w,E=A+4;E>A;++A)if(t=b[3&A])switch(3&A){case 0:c(t,l,f,_,x);break;case 1:c(t,_,f,h,x);break;case 2:c(t,l,x,_,p);break;case 3:c(t,_,x,h,p)}}}(t,e,i,a,o),u}function ve(t,n){t=so.rgb(t),n=so.rgb(n);var r=t.r,e=t.g,i=t.b,a=n.r-r,o=n.g-e,u=n.b-i;return function(t){return"#"+xt(Math.round(r+a*t))+xt(Math.round(e+o*t))+xt(Math.round(i+u*t))}}function ye(t,n){var r,e={},i={};for(r in t)r in n?e[r]=_e(t[r],n[r]):i[r]=t[r];for(r in n)r in t||(i[r]=n[r]);return function(t){for(r in e)i[r]=e[r](t);return i}}function me(t,n){return t=+t,n=+n,function(r){return t*(1-r)+n*r}}function be(t,n){var r,e,i,a=ps.lastIndex=gs.lastIndex=0,o=-1,u=[],s=[];for(t+="",n+="";(r=ps.exec(t))&&(e=gs.exec(n));)(i=e.index)>a&&(i=n.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(r=r[0])===(e=e[0])?u[o]?u[o]+=e:u[++o]=e:(u[++o]=null,s.push({i:o,x:me(r,e)})),a=gs.lastIndex;return a<n.length&&(i=n.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?(n=s[0].x,function(t){return n(t)+""}):function(){return n}:(n=s.length,function(t){for(var r,e=0;n>e;++e)u[(r=s[e]).i]=r.x(t);return u.join("")})}function _e(t,n){for(var r,e=so.interpolators.length;--e>=0&&!(r=so.interpolators[e](t,n)););return r}function xe(t,n){var r,e=[],i=[],a=t.length,o=n.length,u=Math.min(t.length,n.length);for(r=0;u>r;++r)e.push(_e(t[r],n[r]));for(;a>r;++r)i[r]=t[r];for(;o>r;++r)i[r]=n[r];return function(t){for(r=0;u>r;++r)i[r]=e[r](t);return i}}function we(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function Me(t){return function(n){return 1-t(1-n)}}function Ae(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function Ee(t){return t*t}function ke(t){return t*t*t}function Ne(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,r=n*t;return 4*(.5>t?r:3*(t-n)+r-.75)}function Se(t){return function(n){return Math.pow(n,t)}}function Te(t){return 1-Math.cos(t*Oo)}function Ie(t){return Math.pow(2,10*(t-1))}function je(t){return 1-Math.sqrt(1-t*t)}function Le(t,n){var r;return arguments.length<2&&(n=.45),arguments.length?r=n/zo*Math.asin(1/t):(t=1,r=n/4),function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*zo/n)}}function Ue(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Ce(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Re(t,n){t=so.hcl(t),n=so.hcl(n);var r=t.h,e=t.c,i=t.l,a=n.h-r,o=n.c-e,u=n.l-i;return isNaN(o)&&(o=0,e=isNaN(e)?n.c:e),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:-180>a&&(a+=360),function(t){return ft(r+a*t,e+o*t,i+u*t)+""}}function Be(t,n){t=so.hsl(t),n=so.hsl(n);var r=t.h,e=t.s,i=t.l,a=n.h-r,o=n.s-e,u=n.l-i;return isNaN(o)&&(o=0,e=isNaN(e)?n.s:e),isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:-180>a&&(a+=360),function(t){return ct(r+a*t,e+o*t,i+u*t)+""}}function Pe(t,n){t=so.lab(t),n=so.lab(n);var r=t.l,e=t.a,i=t.b,a=n.l-r,o=n.a-e,u=n.b-i;return function(t){return pt(r+a*t,e+o*t,i+u*t)+""}}function qe(t,n){return n-=t,function(r){return Math.round(t+n*r)}}function De(t){var n=[t.a,t.b],r=[t.c,t.d],e=ze(n),i=Ve(n,r),a=ze(Fe(r,n,-i))||0;n[0]*r[1]<r[0]*n[1]&&(n[0]*=-1,n[1]*=-1,e*=-1,i*=-1),this.rotate=(e?Math.atan2(n[1],n[0]):Math.atan2(-r[0],r[1]))*Ho,this.translate=[t.e,t.f],this.scale=[e,a],this.skew=a?Math.atan2(i,a)*Ho:0}function Ve(t,n){return t[0]*n[0]+t[1]*n[1]}function ze(t){var n=Math.sqrt(Ve(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Fe(t,n,r){return t[0]+=r*n[0],t[1]+=r*n[1],t}function Oe(t){return t.length?t.pop()+",":""}function Ye(t,n,r,e){if(t[0]!==n[0]||t[1]!==n[1]){var i=r.push("translate(",null,",",null,")");e.push({i:i-4,x:me(t[0],n[0])},{i:i-2,x:me(t[1],n[1])})}else(n[0]||n[1])&&r.push("translate("+n+")")}function He(t,n,r,e){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),e.push({i:r.push(Oe(r)+"rotate(",null,")")-2,x:me(t,n)})):n&&r.push(Oe(r)+"rotate("+n+")")}function Xe(t,n,r,e){t!==n?e.push({i:r.push(Oe(r)+"skewX(",null,")")-2,x:me(t,n)}):n&&r.push(Oe(r)+"skewX("+n+")")}function Ze(t,n,r,e){if(t[0]!==n[0]||t[1]!==n[1]){var i=r.push(Oe(r)+"scale(",null,",",null,")");e.push({i:i-4,x:me(t[0],n[0])},{i:i-2,x:me(t[1],n[1])})}else(1!==n[0]||1!==n[1])&&r.push(Oe(r)+"scale("+n+")")}function $e(t,n){var r=[],e=[];return t=so.transform(t),n=so.transform(n),Ye(t.translate,n.translate,r,e),He(t.rotate,n.rotate,r,e),Xe(t.skew,n.skew,r,e),Ze(t.scale,n.scale,r,e),t=n=null,function(t){for(var n,i=-1,a=e.length;++i<a;)r[(n=e[i]).i]=n.x(t);return r.join("")}}function We(t,n){return n=(n-=t=+t)||1/n,function(r){return(r-t)/n}}function Ge(t,n){return n=(n-=t=+t)||1/n,function(r){return Math.max(0,Math.min(1,(r-t)/n))}}function Je(t){for(var n=t.source,r=t.target,e=Qe(n,r),i=[n];n!==e;)n=n.parent,i.push(n);for(var a=i.length;r!==e;)i.splice(a,0,r),r=r.parent;return i}function Ke(t){for(var n=[],r=t.parent;null!=r;)n.push(t),t=r,r=r.parent;return n.push(t),n}function Qe(t,n){if(t===n)return t;for(var r=Ke(t),e=Ke(n),i=r.pop(),a=e.pop(),o=null;i===a;)o=i,i=r.pop(),a=e.pop();return o}function ti(t){t.fixed|=2}function ni(t){t.fixed&=-7}function ri(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ei(t){t.fixed&=-5}function ii(t,n,r){var e=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,u=o.length,s=-1;++s<u;)a=o[s],null!=a&&(ii(a,n,r),t.charge+=a.charge,e+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*r[t.point.index];t.charge+=t.pointCharge=c,e+=c*t.point.x,i+=c*t.point.y}t.cx=e/t.charge,t.cy=i/t.charge}function ai(t,n){return so.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=fi,t}function oi(t,n){for(var r=[t];null!=(t=r.pop());)if(n(t),(i=t.children)&&(e=i.length))for(var e,i;--e>=0;)r.push(i[e])}function ui(t,n){for(var r=[t],e=[];null!=(t=r.pop());)if(e.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)r.push(a[o]);for(;null!=(t=e.pop());)n(t)}function si(t){return t.children}function ci(t){return t.value}function li(t,n){return n.value-t.value}function fi(t){return so.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function hi(t){return t.x}function pi(t){return t.y}function gi(t,n,r){t.y0=n,t.y=r}function di(t){return so.range(t.length)}function vi(t){for(var n=-1,r=t[0].length,e=[];++n<r;)e[n]=0;return e}function yi(t){for(var n,r=1,e=0,i=t[0][1],a=t.length;a>r;++r)(n=t[r][1])>i&&(e=r,i=n);return e}function mi(t){return t.reduce(bi,0)}function bi(t,n){return t+n[1]}function _i(t,n){return xi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function xi(t,n){for(var r=-1,e=+t[0],i=(t[1]-e)/n,a=[];++r<=n;)a[r]=i*r+e;return a}function wi(t){return[so.min(t),so.max(t)]}function Mi(t,n){return t.value-n.value}function Ai(t,n){var r=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=r,r._pack_prev=n}function Ei(t,n){t._pack_next=n,n._pack_prev=t}function ki(t,n){var r=n.x-t.x,e=n.y-t.y,i=t.r+n.r;return.999*i*i>r*r+e*e}function Ni(t){function n(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((r=t.children)&&(c=r.length)){var r,e,i,a,o,u,s,c,l=1/0,f=-(1/0),h=1/0,p=-(1/0);if(r.forEach(Si),e=r[0],e.x=-e.r,e.y=0,n(e),c>1&&(i=r[1],i.x=i.r,i.y=0,n(i),c>2))for(a=r[2],ji(e,i,a),n(a),Ai(e,a),e._pack_prev=a,Ai(a,i),i=e._pack_next,o=3;c>o;o++){ji(e,i,a=r[o]);var g=0,d=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,d++)if(ki(u,a)){g=1;break}if(1==g)for(s=e._pack_prev;s!==u._pack_prev&&!ki(s,a);s=s._pack_prev,v++);g?(v>d||d==v&&i.r<e.r?Ei(e,i=u):Ei(e=s,i),o--):(Ai(e,a),i=a,n(a))}var y=(l+f)/2,m=(h+p)/2,b=0;for(o=0;c>o;o++)a=r[o],a.x-=y,a.y-=m,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=b,r.forEach(Ti)}}function Si(t){t._pack_next=t._pack_prev=t}function Ti(t){delete t._pack_next,delete t._pack_prev}function Ii(t,n,r,e){var i=t.children;if(t.x=n+=e*t.x,t.y=r+=e*t.y,t.r*=e,i)for(var a=-1,o=i.length;++a<o;)Ii(i[a],n,r,e)}function ji(t,n,r){var e=t.r+r.r,i=n.x-t.x,a=n.y-t.y;if(e&&(i||a)){var o=n.r+r.r,u=i*i+a*a;o*=o,e*=e;var s=.5+(e-o)/(2*u),c=Math.sqrt(Math.max(0,2*o*(e+u)-(e-=u)*e-o*o))/(2*u);r.x=t.x+s*i+c*a,r.y=t.y+s*a-c*i}else r.x=t.x+e,r.y=t.y}function Li(t,n){return t.parent==n.parent?1:2}function Ui(t){var n=t.children;return n.length?n[0]:t.t}function Ci(t){var n,r=t.children;return(n=r.length)?r[n-1]:t.t}function Ri(t,n,r){var e=r/(n.i-t.i);n.c-=e,n.s+=r,t.c+=e,n.z+=r,n.m+=r}function Bi(t){for(var n,r=0,e=0,i=t.children,a=i.length;--a>=0;)n=i[a],n.z+=r,n.m+=r,r+=n.s+(e+=n.c)}function Pi(t,n,r){return t.a.parent===n.parent?t.a:r}function qi(t){return 1+so.max(t,function(t){return t.y})}function Di(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Vi(t){var n=t.children;return n&&n.length?Vi(n[0]):t}function zi(t){var n,r=t.children;return r&&(n=r.length)?zi(r[n-1]):t}function Fi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Oi(t,n){var r=t.x+n[3],e=t.y+n[0],i=t.dx-n[1]-n[3],a=t.dy-n[0]-n[2];return 0>i&&(r+=i/2,i=0),0>a&&(e+=a/2,a=0),{x:r,y:e,dx:i,dy:a}}function Yi(t){var n=t[0],r=t[t.length-1];return r>n?[n,r]:[r,n]}function Hi(t){return t.rangeExtent?t.rangeExtent():Yi(t.range())}function Xi(t,n,r,e){var i=r(t[0],t[1]),a=e(n[0],n[1]);return function(t){return a(i(t))}}function Zi(t,n){var r,e=0,i=t.length-1,a=t[e],o=t[i];return a>o&&(r=e,e=i,i=r,r=a,a=o,o=r),t[e]=n.floor(a),t[i]=n.ceil(o),t}function $i(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:Es}function Wi(t,n,r,e){var i=[],a=[],o=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=u;)i.push(r(t[o-1],t[o])),a.push(e(n[o-1],n[o]));return function(n){var r=so.bisect(t,n,1,u)-1;return a[r](i[r](n))}}function Gi(t,n,r,e){function i(){var i=Math.min(t.length,n.length)>2?Wi:Xi,s=e?Ge:We;return o=i(t,n,s,r),u=i(n,t,s,_e),a}function a(t){return o(t)}var o,u;return a.invert=function(t){return u(t)},a.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},a.range=function(t){return arguments.length?(n=t,i()):n},a.rangeRound=function(t){return a.range(t).interpolate(qe)},a.clamp=function(t){return arguments.length?(e=t,i()):e},a.interpolate=function(t){return arguments.length?(r=t,i()):r},a.ticks=function(n){return ta(t,n)},a.tickFormat=function(n,r){return na(t,n,r)},a.nice=function(n){return Ki(t,n),i()},a.copy=function(){return Gi(t,n,r,e)},i()}function Ji(t,n){return so.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Ki(t,n){return Zi(t,$i(Qi(t,n)[2])),Zi(t,$i(Qi(t,n)[2])),t}function Qi(t,n){null==n&&(n=10);var r=Yi(t),e=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(e/n)/Math.LN10)),a=n/e*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function ta(t,n){return so.range.apply(so,Qi(t,n))}function na(t,n,r){var e=Qi(t,n);if(r){var i=pu.exec(r);if(i.shift(),"s"===i[8]){var a=so.formatPrefix(Math.max(xo(e[0]),xo(e[1])));return i[7]||(i[7]="."+ra(a.scale(e[2]))),i[8]="f",r=so.format(i.join("")),function(t){return r(a.scale(t))+a.symbol}}i[7]||(i[7]="."+ea(i[8],e)),r=i.join("")}else r=",."+ra(e[2])+"f";return so.format(r)}function ra(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ea(t,n){var r=ra(n[2]);return t in ks?Math.abs(r-ra(Math.max(xo(n[0]),xo(n[1]))))+ +("e"!==t):r-2*("%"===t)}function ia(t,n,r,e){function i(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function a(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function o(n){return t(i(n))}return o.invert=function(n){return a(t.invert(n))},o.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((e=n.map(Number)).map(i)),o):e},o.base=function(r){return arguments.length?(n=+r,t.domain(e.map(i)),o):n},o.nice=function(){var n=Zi(e.map(i),r?Math:Ss);return t.domain(n),e=n.map(a),o},o.ticks=function(){var t=Yi(e),o=[],u=t[0],s=t[1],c=Math.floor(i(u)),l=Math.ceil(i(s)),f=n%1?2:n;if(isFinite(l-c)){if(r){for(;l>c;c++)for(var h=1;f>h;h++)o.push(a(c)*h);o.push(a(c))}else for(o.push(a(c));c++<l;)for(var h=f-1;h>0;h--)o.push(a(c)*h);for(c=0;o[c]<u;c++);for(l=o.length;o[l-1]>s;l--);o=o.slice(c,l)}return o},o.tickFormat=function(t,r){if(!arguments.length)return Ns;arguments.length<2?r=Ns:"function"!=typeof r&&(r=so.format(r));var e=Math.max(1,n*t/o.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return n-.5>o*n&&(o*=n),e>=o?r(t):""}},o.copy=function(){return ia(t.copy(),n,r,e)},Ji(o,t)}function aa(t,n,r){function e(n){return t(i(n))}var i=oa(n),a=oa(1/n);return e.invert=function(n){return a(t.invert(n))},e.domain=function(n){return arguments.length?(t.domain((r=n.map(Number)).map(i)),e):r},e.ticks=function(t){return ta(r,t)},e.tickFormat=function(t,n){return na(r,t,n)},e.nice=function(t){return e.domain(Ki(r,t))},e.exponent=function(o){return arguments.length?(i=oa(n=o),a=oa(1/n),t.domain(r.map(i)),e):n},e.copy=function(){return aa(t.copy(),n,r)},Ji(e,t)}function oa(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function ua(t,n){function r(r){return a[((i.get(r)||("range"===n.t?i.set(r,t.push(r)):NaN))-1)%a.length]}function e(n,r){return so.range(t.length).map(function(t){return n+r*t})}var i,a,o;return r.domain=function(e){if(!arguments.length)return t;t=[],i=new l;for(var a,o=-1,u=e.length;++o<u;)i.has(a=e[o])||i.set(a,t.push(a));return r[n.t].apply(r,n.a)},r.range=function(t){return arguments.length?(a=t,o=0,n={t:"range",a:arguments},r):a},r.rangePoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],c=i[1],l=t.length<2?(s=(s+c)/2,0):(c-s)/(t.length-1+u);return a=e(s+l*u/2,l),o=0,n={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],c=i[1],l=t.length<2?(s=c=Math.round((s+c)/2),0):(c-s)/(t.length-1+u)|0;return a=e(s+Math.round(l*u/2+(c-s-(t.length-1+u)*l)/2),l),o=0,n={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=(f-l)/(t.length-u+2*s);return a=e(l+h*s,h),c&&a.reverse(),o=h*(1-u),n={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=Math.floor((f-l)/(t.length-u+2*s));return a=e(l+Math.round((f-l-(t.length-u)*h)/2),h),c&&a.reverse(),o=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return o},r.rangeExtent=function(){return Yi(n.a[0])},r.copy=function(){return ua(t,n)},r.domain(t)}function sa(t,n){function r(){var r=0,e=n.length;for(u=[];++r<e;)u[r-1]=so.quantile(t,r/e);return o}function o(t){return isNaN(t=+t)?void 0:n[so.bisect(u,t)]}var u;return o.domain=function(n){return arguments.length?(t=n.map(i).filter(a).sort(e),r()):t},o.range=function(t){return arguments.length?(n=t,r()):n},o.quantiles=function(){return u},o.invertExtent=function(r){return r=n.indexOf(r),0>r?[NaN,NaN]:[r>0?u[r-1]:t[0],r<u.length?u[r]:t[t.length-1]]},o.copy=function(){return sa(t,n)},r()}function ca(t,n,r){function e(n){return r[Math.max(0,Math.min(o,Math.floor(a*(n-t))))]}function i(){return a=r.length/(n-t),o=r.length-1,e}var a,o;return e.domain=function(r){return arguments.length?(t=+r[0],n=+r[r.length-1],i()):[t,n]},e.range=function(t){return arguments.length?(r=t,i()):r},e.invertExtent=function(n){return n=r.indexOf(n),n=0>n?NaN:n/a+t,[n,n+1/a]},e.copy=function(){return ca(t,n,r)},i()}function la(t,n){function r(r){return r>=r?n[so.bisect(t,r)]:void 0}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(t){return arguments.length?(n=t,r):n},r.invertExtent=function(r){return r=n.indexOf(r),[t[r-1],t[r]]},r.copy=function(){return la(t,n)},r}function fa(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=r.map(n),n):t},n.ticks=function(n){return ta(t,n)},n.tickFormat=function(n,r){return na(t,n,r)},n.copy=function(){return fa(t)},n}function ha(){return 0}function pa(t){return t.innerRadius}function ga(t){return t.outerRadius}function da(t){return t.startAngle}function va(t){return t.endAngle}function ya(t){return t&&t.padAngle}function ma(t,n,r,e){return(t-r)*n-(n-e)*t>0?0:1}function ba(t,n,r,e,i){var a=t[0]-n[0],o=t[1]-n[1],u=(i?e:-e)/Math.sqrt(a*a+o*o),s=u*o,c=-u*a,l=t[0]+s,f=t[1]+c,h=n[0]+s,p=n[1]+c,g=(l+h)/2,d=(f+p)/2,v=h-l,y=p-f,m=v*v+y*y,b=r-e,_=l*p-h*f,x=(0>y?-1:1)*Math.sqrt(Math.max(0,b*b*m-_*_)),w=(_*y-v*x)/m,M=(-_*v-y*x)/m,A=(_*y+v*x)/m,E=(-_*v+y*x)/m,k=w-g,N=M-d,S=A-g,T=E-d;return k*k+N*N>S*S+T*T&&(w=A,M=E),[[w-s,M-c],[w*r/b,M*r/b]]}function _a(t){function n(n){function o(){c.push("M",a(t(l),u))}for(var s,c=[],l=[],f=-1,h=n.length,p=Nt(r),g=Nt(e);++f<h;)i.call(this,s=n[f],f)?l.push([+p.call(this,s,f),+g.call(this,s,f)]):l.length&&(o(),l=[]);return l.length&&o(),c.length?c.join(""):null}var r=Ir,e=jr,i=jn,a=xa,o=a.key,u=.7;return n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(e=t,n):e},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=Cs.get(t)||xa).key,n):o},n.tension=function(t){return arguments.length?(u=t,n):u},n}function xa(t){return t.length>1?t.join("L"):t+"Z"}function wa(t){return t.join("L")+"Z"}function Ma(t){for(var n=0,r=t.length,e=t[0],i=[e[0],",",e[1]];++n<r;)i.push("H",(e[0]+(e=t[n])[0])/2,"V",e[1]);return r>1&&i.push("H",e[0]),i.join("")}function Aa(t){for(var n=0,r=t.length,e=t[0],i=[e[0],",",e[1]];++n<r;)i.push("V",(e=t[n])[1],"H",e[0]);return i.join("")}function Ea(t){for(var n=0,r=t.length,e=t[0],i=[e[0],",",e[1]];++n<r;)i.push("H",(e=t[n])[0],"V",e[1]);return i.join("")}function ka(t,n){return t.length<4?xa(t):t[1]+Ta(t.slice(1,-1),Ia(t,n))}function Na(t,n){return t.length<3?wa(t):t[0]+Ta((t.push(t[0]),t),Ia([t[t.length-2]].concat(t,[t[1]]),n))}function Sa(t,n){return t.length<3?xa(t):t[0]+Ta(t,Ia(t,n))}function Ta(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return xa(t);var r=t.length!=n.length,e="",i=t[0],a=t[1],o=n[0],u=o,s=1;if(r&&(e+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],s=2),n.length>1){u=n[1],a=t[s],s++,e+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var c=2;c<n.length;c++,s++)a=t[s],u=n[c],e+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(r){var l=t[s];e+="Q"+(a[0]+2*u[0]/3)+","+(a[1]+2*u[1]/3)+","+l[0]+","+l[1]}return e}function Ia(t,n){for(var r,e=[],i=(1-n)/2,a=t[0],o=t[1],u=1,s=t.length;++u<s;)r=a,a=o,o=t[u],e.push([i*(o[0]-r[0]),i*(o[1]-r[1])]);return e}function ja(t){if(t.length<3)return xa(t);var n=1,r=t.length,e=t[0],i=e[0],a=e[1],o=[i,i,i,(e=t[1])[0]],u=[a,a,a,e[1]],s=[i,",",a,"L",Ra(Ps,o),",",Ra(Ps,u)];for(t.push(t[r-1]);++n<=r;)e=t[n],o.shift(),o.push(e[0]),u.shift(),u.push(e[1]),Ba(s,o,u);return t.pop(),s.push("L",e),s.join("")}function La(t){if(t.length<4)return xa(t);for(var n,r=[],e=-1,i=t.length,a=[0],o=[0];++e<3;)n=t[e],a.push(n[0]),o.push(n[1]);for(r.push(Ra(Ps,a)+","+Ra(Ps,o)),--e;++e<i;)n=t[e],a.shift(),a.push(n[0]),o.shift(),o.push(n[1]),Ba(r,a,o);return r.join("")}function Ua(t){for(var n,r,e=-1,i=t.length,a=i+4,o=[],u=[];++e<4;)r=t[e%i],o.push(r[0]),u.push(r[1]);for(n=[Ra(Ps,o),",",Ra(Ps,u)],--e;++e<a;)r=t[e%i],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Ba(n,o,u);return n.join("")}function Ca(t,n){var r=t.length-1;if(r)for(var e,i,a=t[0][0],o=t[0][1],u=t[r][0]-a,s=t[r][1]-o,c=-1;++c<=r;)e=t[c],i=c/r,e[0]=n*e[0]+(1-n)*(a+i*u),e[1]=n*e[1]+(1-n)*(o+i*s);return ja(t)}function Ra(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Ba(t,n,r){t.push("C",Ra(Rs,n),",",Ra(Rs,r),",",Ra(Bs,n),",",Ra(Bs,r),",",Ra(Ps,n),",",Ra(Ps,r))}function Pa(t,n){return(n[1]-t[1])/(n[0]-t[0])}function qa(t){for(var n=0,r=t.length-1,e=[],i=t[0],a=t[1],o=e[0]=Pa(i,a);++n<r;)e[n]=(o+(o=Pa(i=a,a=t[n+1])))/2;return e[n]=o,e}function Da(t){for(var n,r,e,i,a=[],o=qa(t),u=-1,s=t.length-1;++u<s;)n=Pa(t[u],t[u+1]),xo(n)<qo?o[u]=o[u+1]=0:(r=o[u]/n,e=o[u+1]/n,i=r*r+e*e,i>9&&(i=3*n/Math.sqrt(i),o[u]=i*r,o[u+1]=i*e));for(u=-1;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),a.push([i||0,o[u]*i||0]);return a}function Va(t){return t.length<3?xa(t):t[0]+Ta(t,Da(t))}function za(t){for(var n,r,e,i=-1,a=t.length;++i<a;)n=t[i],r=n[0],e=n[1]-Oo,n[0]=r*Math.cos(e),n[1]=r*Math.sin(e);return t}function Fa(t){function n(n){function s(){d.push("M",u(t(y),f),l,c(t(v.reverse()),f),"Z")}for(var h,p,g,d=[],v=[],y=[],m=-1,b=n.length,_=Nt(r),x=Nt(i),w=r===e?function(){return p}:Nt(e),M=i===a?function(){return g}:Nt(a);++m<b;)o.call(this,h=n[m],m)?(v.push([p=+_.call(this,h,m),g=+x.call(this,h,m)]),y.push([+w.call(this,h,m),+M.call(this,h,m)])):v.length&&(s(),v=[],y=[]);return v.length&&s(),d.length?d.join(""):null}var r=Ir,e=Ir,i=0,a=jr,o=jn,u=xa,s=u.key,c=u,l="L",f=.7;return n.x=function(t){return arguments.length?(r=e=t,n):e},n.x0=function(t){return arguments.length?(r=t,n):r},n.x1=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(i=a=t,n):a},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(a=t,n):a},n.defined=function(t){return arguments.length?(o=t,n):o},n.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Cs.get(t)||xa).key,c=u.reverse||u,l=u.closed?"M":"L",n):s},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Oa(t){return t.radius}function Ya(t){return[t.x,t.y]}function Ha(t){return function(){var n=t.apply(this,arguments),r=n[0],e=n[1]-Oo;return[r*Math.cos(e),r*Math.sin(e)]}}function Xa(){return 64}function Za(){return"circle"}function $a(t){var n=Math.sqrt(t/Vo);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Wa(t){return function(){var n,r,e;(n=this[t])&&(e=n[r=n.active])&&(e.timer.c=null,e.timer.t=NaN,--n.count?delete n[r]:delete this[t],n.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Ga(t,n,r){return ko(t,Ys),t.namespace=n,t.id=r,t}function Ja(t,n,r,e){var i=t.id,a=t.namespace;return Y(t,"function"==typeof r?function(t,o,u){t[a][i].tween.set(n,e(r.call(t,t.__data__,o,u)))}:(r=e(r),function(t){t[a][i].tween.set(n,r)}))}function Ka(t){return null==t&&(t=""),function(){this.textContent=t}}function Qa(t){return null==t?"__transition__":"__transition_"+t+"__"}function to(t,n,r,e,i){function a(t){var n=d.delay;return c.t=n+s,t>=n?o(t-n):void(c.c=o)}function o(r){var i=g.active,a=g[i];a&&(a.timer.c=null,a.timer.t=NaN,--g.count,delete g[i],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in g)if(e>+o){var l=g[o];l.timer.c=null,l.timer.t=NaN,--g.count,delete g[o]}c.c=u,Lt(function(){return c.c&&u(r||1)&&(c.c=null,c.t=NaN),1},0,s),g.active=e,d.event&&d.event.start.call(t,t.__data__,n),p=[],d.tween.forEach(function(r,e){(e=e.call(t,t.__data__,n))&&p.push(e)}),h=d.ease,f=d.duration}function u(i){for(var a=i/f,o=h(a),u=p.length;u>0;)p[--u].call(t,o);return a>=1?(d.event&&d.event.end.call(t,t.__data__,n),--g.count?delete g[e]:delete t[r],1):void 0}var s,c,f,h,p,g=t[r]||(t[r]={active:0,count:0}),d=g[e];d||(s=i.time,c=Lt(a,0,s),d=g[e]={tween:new l,time:s,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++g.count)}function no(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:r(t))+",0)"})}function ro(t,n,r){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:r(t))+")"})}function eo(t){return t.toISOString()}function io(t,n,r){function e(n){return t(n)}function i(t,r){var e=t[1]-t[0],i=e/r,a=so.bisect(Qs,i);return a==Qs.length?[n.year,Qi(t.map(function(t){return t/31536e6}),r)[2]]:a?n[i/Qs[a-1]<Qs[a]/i?a-1:a]:[rc,Qi(t,r)[2]]}return e.invert=function(n){return ao(t.invert(n))},e.domain=function(n){return arguments.length?(t.domain(n),e):t.domain().map(ao)},e.nice=function(t,n){function r(r){return!isNaN(r)&&!t.range(r,ao(+r+1),n).length}var a=e.domain(),o=Yi(a),u=null==t?i(o,10):"number"==typeof t&&i(o,t);return u&&(t=u[0],n=u[1]),e.domain(Zi(a,n>1?{floor:function(n){for(;r(n=t.floor(n));)n=ao(n-1);return n},ceil:function(n){for(;r(n=t.ceil(n));)n=ao(+n+1);return n}}:t))},e.ticks=function(t,n){var r=Yi(e.domain()),a=null==t?i(r,10):"number"==typeof t?i(r,t):!t.range&&[{range:t},n];return a&&(t=a[0],n=a[1]),t.range(r[0],ao(+r[1]+1),1>n?1:n)},e.tickFormat=function(){return r},e.copy=function(){return io(t.copy(),n,r)},Ji(e,t)}function ao(t){return new Date(t)}function oo(t){return JSON.parse(t.responseText)}function uo(t){var n=fo.createRange();return n.selectNode(fo.body),n.createContextualFragment(t.responseText)}var so={version:"3.5.16"},co=[].slice,lo=function(t){return co.call(t)},fo=this.document;if(fo)try{lo(fo.documentElement.childNodes)[0].nodeType}catch(ho){lo=function(t){for(var n=t.length,r=new Array(n);n--;)r[n]=t[n];return r}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(po){var go=this.Element.prototype,vo=go.setAttribute,yo=go.setAttributeNS,mo=this.CSSStyleDeclaration.prototype,bo=mo.setProperty;go.setAttribute=function(t,n){vo.call(this,t,n+"")},go.setAttributeNS=function(t,n,r){yo.call(this,t,n,r+"")},mo.setProperty=function(t,n,r){bo.call(this,t,n+"",r)}}so.ascending=e,so.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:NaN},so.min=function(t,n){var r,e,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(e=t[i])&&e>=e){r=e;break}for(;++i<a;)null!=(e=t[i])&&r>e&&(r=e)}else{for(;++i<a;)if(null!=(e=n.call(t,t[i],i))&&e>=e){r=e;break}for(;++i<a;)null!=(e=n.call(t,t[i],i))&&r>e&&(r=e)}return r},so.max=function(t,n){var r,e,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(e=t[i])&&e>=e){r=e;break}for(;++i<a;)null!=(e=t[i])&&e>r&&(r=e)}else{for(;++i<a;)if(null!=(e=n.call(t,t[i],i))&&e>=e){r=e;break}for(;++i<a;)null!=(e=n.call(t,t[i],i))&&e>r&&(r=e)}return r},so.extent=function(t,n){var r,e,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(e=t[a])&&e>=e){r=i=e;break}for(;++a<o;)null!=(e=t[a])&&(r>e&&(r=e),e>i&&(i=e))}else{for(;++a<o;)if(null!=(e=n.call(t,t[a],a))&&e>=e){r=i=e;break}for(;++a<o;)null!=(e=n.call(t,t[a],a))&&(r>e&&(r=e),e>i&&(i=e))}return[r,i]},so.sum=function(t,n){var r,e=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)a(r=+t[o])&&(e+=r);else for(;++o<i;)a(r=+n.call(t,t[o],o))&&(e+=r);return e},so.mean=function(t,n){var r,e=0,o=t.length,u=-1,s=o;if(1===arguments.length)for(;++u<o;)a(r=i(t[u]))?e+=r:--s;else for(;++u<o;)a(r=i(n.call(t,t[u],u)))?e+=r:--s;return s?e/s:void 0},so.quantile=function(t,n){var r=(t.length-1)*n+1,e=Math.floor(r),i=+t[e-1],a=r-e;return a?i+a*(t[e]-i):i},so.median=function(t,n){var r,o=[],u=t.length,s=-1;if(1===arguments.length)for(;++s<u;)a(r=i(t[s]))&&o.push(r);else for(;++s<u;)a(r=i(n.call(t,t[s],s)))&&o.push(r);return o.length?so.quantile(o.sort(e),.5):void 0},so.variance=function(t,n){var r,e,o=t.length,u=0,s=0,c=-1,l=0;if(1===arguments.length)for(;++c<o;)a(r=i(t[c]))&&(e=r-u,u+=e/++l,s+=e*(r-u));else for(;++c<o;)a(r=i(n.call(t,t[c],c)))&&(e=r-u,u+=e/++l,s+=e*(r-u));return l>1?s/(l-1):void 0},so.deviation=function(){var t=so.variance.apply(this,arguments);return t?Math.sqrt(t):t};var _o=o(e);so.bisectLeft=_o.left,so.bisect=so.bisectRight=_o.right,so.bisector=function(t){return o(1===t.length?function(n,r){return e(t(n),r)}:t)},so.shuffle=function(t,n,r){(a=arguments.length)<3&&(r=t.length,2>a&&(n=0));for(var e,i,a=r-n;a;)i=Math.random()*a--|0,e=t[a+n],t[a+n]=t[i+n],t[i+n]=e;return t},so.permute=function(t,n){for(var r=n.length,e=new Array(r);r--;)e[r]=t[n[r]];return e},so.pairs=function(t){for(var n,r=0,e=t.length-1,i=t[0],a=new Array(0>e?0:e);e>r;)a[r]=[n=i,i=t[++r]];return a},so.transpose=function(t){if(!(i=t.length))return[];for(var n=-1,r=so.min(t,u),e=new Array(r);++n<r;)for(var i,a=-1,o=e[n]=new Array(i);++a<i;)o[a]=t[a][n];return e},so.zip=function(){return so.transpose(arguments)},so.keys=function(t){var n=[];for(var r in t)n.push(r);return n},so.values=function(t){var n=[];for(var r in t)n.push(t[r]);return n},so.entries=function(t){var n=[];for(var r in t)n.push({key:r,value:t[r]});return n},so.merge=function(t){for(var n,r,e,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(r=new Array(o);--i>=0;)for(e=t[i],n=e.length;--n>=0;)r[--o]=e[n];return r};var xo=Math.abs;so.range=function(t,n,r){if(arguments.length<3&&(r=1,arguments.length<2&&(n=t,t=0)),(n-t)/r===1/0)throw new Error("infinite range");var e,i=[],a=s(xo(r)),o=-1;if(t*=a,n*=a,r*=a,0>r)for(;(e=t+r*++o)>n;)i.push(e/a);else for(;(e=t+r*++o)<n;)i.push(e/a);return i},so.map=function(t,n){var r=new l;if(t instanceof l)t.forEach(function(t,n){r.set(t,n)});else if(Array.isArray(t)){var e,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)r.set(i,t[i]);else for(;++i<a;)r.set(n.call(t,e=t[i],i),e)}else for(var o in t)r.set(o,t[o]);return r};var wo="__proto__",Mo="\x00";c(l,{has:p,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:g,keys:d,values:function(){
var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),so.nest=function(){function t(n,o,u){if(u>=a.length)return e?e.call(i,o):r?o.sort(r):o;for(var s,c,f,h,p=-1,g=o.length,d=a[u++],v=new l;++p<g;)(h=v.get(s=d(c=o[p])))?h.push(c):v.set(s,[c]);return n?(c=n(),f=function(r,e){c.set(r,t(n,e,u))}):(c={},f=function(r,e){c[r]=t(n,e,u)}),v.forEach(f),c}function n(t,r){if(r>=a.length)return t;var e=[],i=o[r++];return t.forEach(function(t,i){e.push({key:t,values:n(i,r)})}),i?e.sort(function(t,n){return i(t.key,n.key)}):e}var r,e,i={},a=[],o=[];return i.map=function(n,r){return t(r,n,0)},i.entries=function(r){return n(t(so.map,r,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return r=t,i},i.rollup=function(t){return e=t,i},i},so.set=function(t){var n=new m;if(t)for(var r=0,e=t.length;e>r;++r)n.add(t[r]);return n},c(m,{has:p,add:function(t){return this._[f(t+="")]=!0,t},remove:g,values:d,size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),so.behavior={},so.rebind=function(t,n){for(var r,e=1,i=arguments.length;++e<i;)t[r=arguments[e]]=_(t,n,n[r]);return t};var Ao=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var t=new M,n=-1,r=arguments.length;++n<r;)t[arguments[n]]=A(t);return t},M.prototype.on=function(t,n){var r=t.indexOf("."),e="";if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(e):this[t].on(e,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(e,null);return this}},so.event=null,so.requote=function(t){return t.replace(Eo,"\\$&")};var Eo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ko={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var r in n)t[r]=n[r]},No=function(t,n){return n.querySelector(t)},So=function(t,n){return n.querySelectorAll(t)},To=function(t,n){var r=t.matches||t[x(t,"matchesSelector")];return(To=function(t,n){return r.call(t,n)})(t,n)};"function"==typeof Sizzle&&(No=function(t,n){return Sizzle(t,n)[0]||null},So=Sizzle,To=Sizzle.matchesSelector),so.selection=function(){return so.select(fo.documentElement)};var Io=so.selection.prototype=[];Io.select=function(t){var n,r,e,i,a=[];t=T(t);for(var o=-1,u=this.length;++o<u;){a.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var s=-1,c=e.length;++s<c;)(i=e[s])?(n.push(r=t.call(i,i.__data__,s,o)),r&&"__data__"in i&&(r.__data__=i.__data__)):n.push(null)}return S(a)},Io.selectAll=function(t){var n,r,e=[];t=I(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,s=o.length;++u<s;)(r=o[u])&&(e.push(n=lo(t.call(r,r.__data__,u,i))),n.parentNode=r);return S(e)};var jo="http://www.w3.org/1999/xhtml",Lo={svg:"http://www.w3.org/2000/svg",xhtml:jo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Lo,qualify:function(t){var n=t.indexOf(":"),r=t;return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),Lo.hasOwnProperty(r)?{space:Lo[r],local:t}:t}},Io.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=so.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(j(n,t[n]));return this}return this.each(j(t,n))},Io.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var r=this.node(),e=(t=C(t)).length,i=-1;if(n=r.classList){for(;++i<e;)if(!n.contains(t[i]))return!1}else for(n=r.getAttribute("class");++i<e;)if(!U(t[i]).test(n))return!1;return!0}for(n in t)this.each(R(n,t[n]));return this}return this.each(R(t,n))},Io.style=function(t,n,e){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(n="");for(e in t)this.each(P(e,t[e],n));return this}if(2>i){var a=this.node();return r(a).getComputedStyle(a,null).getPropertyValue(t)}e=""}return this.each(P(t,n,e))},Io.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(q(n,t[n]));return this}return this.each(q(t,n))},Io.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Io.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Io.append=function(t){return t=D(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Io.insert=function(t,n){return t=D(t),n=T(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Io.remove=function(){return this.each(V)},Io.data=function(t,n){function r(t,r){var e,i,a,o=t.length,f=r.length,h=Math.min(o,f),p=new Array(f),g=new Array(f),d=new Array(o);if(n){var v,y=new l,m=new Array(o);for(e=-1;++e<o;)(i=t[e])&&(y.has(v=n.call(i,i.__data__,e))?d[e]=i:y.set(v,i),m[e]=v);for(e=-1;++e<f;)(i=y.get(v=n.call(r,a=r[e],e)))?i!==!0&&(p[e]=i,i.__data__=a):g[e]=z(a),y.set(v,!0);for(e=-1;++e<o;)e in m&&y.get(m[e])!==!0&&(d[e]=t[e])}else{for(e=-1;++e<h;)i=t[e],a=r[e],i?(i.__data__=a,p[e]=i):g[e]=z(a);for(;f>e;++e)g[e]=z(r[e]);for(;o>e;++e)d[e]=t[e]}g.update=p,g.parentNode=p.parentNode=d.parentNode=t.parentNode,u.push(g),s.push(p),c.push(d)}var e,i,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(e=this[0]).length);++a<o;)(i=e[a])&&(t[a]=i.__data__);return t}var u=H([]),s=S([]),c=S([]);if("function"==typeof t)for(;++a<o;)r(e=this[a],t.call(e,e.parentNode.__data__,a));else for(;++a<o;)r(e=this[a],t);return s.enter=function(){return u},s.exit=function(){return c},s},Io.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Io.filter=function(t){var n,r,e,i=[];"function"!=typeof t&&(t=F(t));for(var a=0,o=this.length;o>a;a++){i.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var u=0,s=r.length;s>u;u++)(e=r[u])&&t.call(e,e.__data__,u,a)&&n.push(e)}return S(i)},Io.order=function(){for(var t=-1,n=this.length;++t<n;)for(var r,e=this[t],i=e.length-1,a=e[i];--i>=0;)(r=e[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Io.sort=function(t){t=O.apply(this,arguments);for(var n=-1,r=this.length;++n<r;)this[n].sort(t);return this.order()},Io.each=function(t){return Y(this,function(n,r,e){t.call(n,n.__data__,r,e)})},Io.call=function(t){var n=lo(arguments);return t.apply(n[0]=this,n),this},Io.empty=function(){return!this.node()},Io.node=function(){for(var t=0,n=this.length;n>t;t++)for(var r=this[t],e=0,i=r.length;i>e;e++){var a=r[e];if(a)return a}return null},Io.size=function(){var t=0;return Y(this,function(){++t}),t};var Uo=[];so.selection.enter=H,so.selection.enter.prototype=Uo,Uo.append=Io.append,Uo.empty=Io.empty,Uo.node=Io.node,Uo.call=Io.call,Uo.size=Io.size,Uo.select=function(t){for(var n,r,e,i,a,o=[],u=-1,s=this.length;++u<s;){e=(i=this[u]).update,o.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(a=i[c])?(n.push(e[c]=r=t.call(i.parentNode,a.__data__,c,u)),r.__data__=a.__data__):n.push(null)}return S(o)},Uo.insert=function(t,n){return arguments.length<2&&(n=X(this)),Io.insert.call(this,t,n)},so.select=function(n){var r;return"string"==typeof n?(r=[No(n,fo)],r.parentNode=fo.documentElement):(r=[n],r.parentNode=t(n)),S([r])},so.selectAll=function(t){var n;return"string"==typeof t?(n=lo(So(t,fo)),n.parentNode=fo.documentElement):(n=lo(t),n.parentNode=null),S([n])},Io.on=function(t,n,r){var e=arguments.length;if(3>e){if("string"!=typeof t){2>e&&(n=!1);for(r in t)this.each(Z(r,t[r],n));return this}if(2>e)return(e=this.node()["__on"+t])&&e._;r=!1}return this.each(Z(t,n,r))};var Co=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&Co.forEach(function(t){"on"+t in fo&&Co.remove(t)});var Ro,Bo=0;so.mouse=function(t){return J(t,k())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(t,n,r){if(arguments.length<3&&(r=n,n=k().changedTouches),n)for(var e,i=0,a=n.length;a>i;++i)if((e=n[i]).identifier===r)return J(t,e)},so.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(t,n,r,a,o){return function(){function u(){var t,r,e=n(h,d);e&&(t=e[0]-b[0],r=e[1]-b[1],g|=t|r,b=e,p({type:"drag",x:e[0]+c[0],y:e[1]+c[1],dx:t,dy:r}))}function s(){n(h,d)&&(y.on(a+v,null).on(o+v,null),m(g),p({type:"dragend"}))}var c,l=this,f=so.event.target.correspondingElement||so.event.target,h=l.parentNode,p=e.of(l,arguments),g=0,d=t(),v=".drag"+(null==d?"":"-"+d),y=so.select(r(f)).on(a+v,u).on(o+v,s),m=G(f),b=n(h,d);i?(c=i.apply(l,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],p({type:"dragstart"})}}var e=N(t,"drag","dragstart","dragend"),i=null,a=n(w,so.mouse,r,"mousemove","mouseup"),o=n(K,so.touch,b,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},so.rebind(t,e,"on")},so.touches=function(t,n){return arguments.length<2&&(n=k().touches),n?lo(n).map(function(n){var r=J(t,n);return r.identifier=n.identifier,r}):[]};var qo=1e-6,Do=qo*qo,Vo=Math.PI,zo=2*Vo,Fo=zo-qo,Oo=Vo/2,Yo=Vo/180,Ho=180/Vo,Xo=Math.SQRT2,Zo=2,$o=4;so.interpolateZoom=function(t,n){var r,e,i=t[0],a=t[1],o=t[2],u=n[0],s=n[1],c=n[2],l=u-i,f=s-a,h=l*l+f*f;if(Do>h)e=Math.log(c/o)/Xo,r=function(t){return[i+t*l,a+t*f,o*Math.exp(Xo*t*e)]};else{var p=Math.sqrt(h),g=(c*c-o*o+$o*h)/(2*o*Zo*p),d=(c*c-o*o-$o*h)/(2*c*Zo*p),v=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(d*d+1)-d);e=(y-v)/Xo,r=function(t){var n=t*e,r=it(v),u=o/(Zo*p)*(r*at(Xo*n+v)-et(v));return[i+u*l,a+u*f,o*r/it(Xo*n+v)]}}return r.duration=1e3*e,r},so.behavior.zoom=function(){function t(t){t.on(j,f).on(Go+".zoom",p).on("dblclick.zoom",g).on(C,h)}function n(t){return[(t[0]-A.x)/A.k,(t[1]-A.y)/A.k]}function e(t){return[t[0]*A.k+A.x,t[1]*A.k+A.y]}function i(t){A.k=Math.max(S[0],Math.min(S[1],t))}function a(t,n){n=e(n),A.x+=t[0]-n[0],A.y+=t[1]-n[1]}function o(n,r,e,o){n.__chart__={x:A.x,y:A.y,k:A.k},i(Math.pow(2,o)),a(v=r,e),n=so.select(n),T>0&&(n=n.transition().duration(T)),n.call(t.event)}function u(){x&&x.domain(_.range().map(function(t){return(t-A.x)/A.k}).map(_.invert)),M&&M.domain(w.range().map(function(t){return(t-A.y)/A.k}).map(w.invert))}function s(t){I++||t({type:"zoomstart"})}function c(t){u(),t({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function l(t){--I||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,a(so.mouse(i),h),c(o)}function e(){f.on(L,null).on(U,null),p(u),l(o)}var i=this,o=R.of(i,arguments),u=0,f=so.select(r(i)).on(L,t).on(U,e),h=n(so.mouse(i)),p=G(i);Os.call(i),s(o)}function h(){function t(){var t=so.touches(g);return p=A.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function r(){var n=so.event.target;so.select(n).on(_,e).on(x,u),w.push(n);for(var r=so.event.changedTouches,i=0,a=r.length;a>i;++i)v[r[i].identifier]=null;var s=t(),c=Date.now();if(1===s.length){if(500>c-b){var l=s[0];o(g,l,v[l.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),E()}b=c}else if(s.length>1){var l=s[0],f=s[1],h=l[0]-f[0],p=l[1]-f[1];y=h*h+p*p}}function e(){var t,n,r,e,o=so.touches(g);Os.call(g);for(var u=0,s=o.length;s>u;++u,e=null)if(r=o[u],e=v[r.identifier]){if(n)break;t=r,n=e}if(e){var l=(l=r[0]-t[0])*l+(l=r[1]-t[1])*l,f=y&&Math.sqrt(l/y);t=[(t[0]+r[0])/2,(t[1]+r[1])/2],n=[(n[0]+e[0])/2,(n[1]+e[1])/2],i(f*p)}b=null,a(t,n),c(d)}function u(){if(so.event.touches.length){for(var n=so.event.changedTouches,r=0,e=n.length;e>r;++r)delete v[n[r].identifier];for(var i in v)return void t()}so.selectAll(w).on(m,null),M.on(j,f).on(C,h),k(),l(d)}var p,g=this,d=R.of(g,arguments),v={},y=0,m=".zoom-"+so.event.changedTouches[0].identifier,_="touchmove"+m,x="touchend"+m,w=[],M=so.select(g),k=G(g);r(),s(d),M.on(j,null).on(C,r)}function p(){var t=R.of(this,arguments);m?clearTimeout(m):(Os.call(this),d=n(v=y||so.mouse(this)),s(t)),m=setTimeout(function(){m=null,l(t)},50),E(),i(Math.pow(2,.002*Wo())*A.k),a(v,d),c(t)}function g(){var t=so.mouse(this),r=Math.log(A.k)/Math.LN2;o(this,t,n(t),so.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var d,v,y,m,b,_,x,w,M,A={x:0,y:0,k:1},k=[960,500],S=Jo,T=250,I=0,j="mousedown.zoom",L="mousemove.zoom",U="mouseup.zoom",C="touchstart.zoom",R=N(t,"zoomstart","zoom","zoomend");return Go||(Go="onwheel"in fo?(Wo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Wo=function(){return so.event.wheelDelta},"mousewheel"):(Wo=function(){return-so.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=R.of(this,arguments),n=A;zs?so.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var r=k[0],e=k[1],i=v?v[0]:r/2,a=v?v[1]:e/2,o=so.interpolateZoom([(i-A.x)/A.k,(a-A.y)/A.k,r/A.k],[(i-n.x)/n.k,(a-n.y)/n.k,r/n.k]);return function(n){var e=o(n),u=r/e[2];this.__chart__=A={x:i-e[0]*u,y:a-e[1]*u,k:u},c(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=A,s(t),c(t),l(t))})},t.translate=function(n){return arguments.length?(A={x:+n[0],y:+n[1],k:A.k},u(),t):[A.x,A.y]},t.scale=function(n){return arguments.length?(A={x:A.x,y:A.y,k:null},i(+n),u(),t):A.k},t.scaleExtent=function(n){return arguments.length?(S=null==n?Jo:[+n[0],+n[1]],t):S},t.center=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],t):y},t.size=function(n){return arguments.length?(k=n&&[+n[0],+n[1]],t):k},t.duration=function(n){return arguments.length?(T=+n,t):T},t.x=function(n){return arguments.length?(x=n,_=n.copy(),A={x:0,y:0,k:1},t):x},t.y=function(n){return arguments.length?(M=n,w=n.copy(),A={x:0,y:0,k:1},t):M},so.rebind(t,R,"on")};var Wo,Go,Jo=[0,1/0];so.color=ut,ut.prototype.toString=function(){return this.rgb()+""},so.hsl=st;var Ko=st.prototype=new ut;Ko.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Ko.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Ko.rgb=function(){return ct(this.h,this.s,this.l)},so.hcl=lt;var Qo=lt.prototype=new ut;Qo.brighter=function(t){return new lt(this.h,this.c,Math.min(100,this.l+tu*(arguments.length?t:1)))},Qo.darker=function(t){return new lt(this.h,this.c,Math.max(0,this.l-tu*(arguments.length?t:1)))},Qo.rgb=function(){return ft(this.h,this.c,this.l).rgb()},so.lab=ht;var tu=18,nu=.95047,ru=1,eu=1.08883,iu=ht.prototype=new ut;iu.brighter=function(t){return new ht(Math.min(100,this.l+tu*(arguments.length?t:1)),this.a,this.b)},iu.darker=function(t){return new ht(Math.max(0,this.l-tu*(arguments.length?t:1)),this.a,this.b)},iu.rgb=function(){return pt(this.l,this.a,this.b)},so.rgb=mt;var au=mt.prototype=new ut;au.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,r=this.g,e=this.b,i=30;return n||r||e?(n&&i>n&&(n=i),r&&i>r&&(r=i),e&&i>e&&(e=i),new mt(Math.min(255,n/t),Math.min(255,r/t),Math.min(255,e/t))):new mt(i,i,i)},au.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},au.hsl=function(){return Mt(this.r,this.g,this.b)},au.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var ou=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ou.forEach(function(t,n){ou.set(t,bt(n))}),so.functor=Nt,so.xhr=St(b),so.dsv=function(t,n){function r(t,r,a){arguments.length<3&&(a=r,r=null);var o=Tt(t,n,null==r?e:i(r),a);return o.row=function(t){return arguments.length?o.response(null==(r=t)?e:i(t)):r},o}function e(t){return r.parse(t.responseText)}function i(t){return function(n){return r.parse(n.responseText,t)}}function a(n){return n.map(o).join(t)}function o(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return r.parse=function(t,n){var e;return r.parseRows(t,function(t,r){if(e)return e(t,r-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");e=n?function(t,r){return n(i(t),r)}:i})},r.parseRows=function(t,n){function r(){if(l>=c)return o;if(i)return i=!1,a;var n=l;if(34===t.charCodeAt(n)){for(var r=n;r++<c;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}l=r+2;var e=t.charCodeAt(r+1);return 13===e?(i=!0,10===t.charCodeAt(r+2)&&++l):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"')}for(;c>l;){var e=t.charCodeAt(l++),u=1;if(10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(l)&&(++l,++u);else if(e!==s)continue;return t.slice(n,l-u)}return t.slice(n)}for(var e,i,a={},o={},u=[],c=t.length,l=0,f=0;(e=r())!==o;){for(var h=[];e!==a&&e!==o;)h.push(e),e=r();n&&null==(h=n(h,f++))||u.push(h)}return u},r.format=function(n){if(Array.isArray(n[0]))return r.formatRows(n);var e=new m,i=[];return n.forEach(function(t){for(var n in t)e.has(n)||i.push(e.add(n))}),[i.map(o).join(t)].concat(n.map(function(n){return i.map(function(t){return o(n[t])}).join(t)})).join("\n")},r.formatRows=function(t){return t.map(a).join("\n")},r},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("	","text/tab-separated-values");var uu,su,cu,lu,fu=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};so.timer=function(){Lt.apply(this,arguments)},so.timer.flush=function(){Ct(),Rt()},so.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var hu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Pt);so.formatPrefix=function(t,n){var r=0;return(t=+t)&&(0>t&&(t*=-1),n&&(t=so.round(t,Bt(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),hu[8+r/3]};var pu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,gu=so.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=so.round(t,Bt(t,n))).toFixed(Math.max(0,Math.min(20,Bt(t*(1+1e-15),n))))}}),du=so.time={},vu=Date;Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){yu.setUTCDate.apply(this._,arguments)},setDay:function(){yu.setUTCDay.apply(this._,arguments)},setFullYear:function(){yu.setUTCFullYear.apply(this._,arguments)},setHours:function(){yu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){yu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){yu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){yu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){yu.setUTCSeconds.apply(this._,arguments)},setTime:function(){yu.setTime.apply(this._,arguments)}};var yu=Date.prototype;du.year=zt(function(t){return t=du.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),du.years=du.year.range,du.years.utc=du.year.utc.range,du.day=zt(function(t){var n=new vu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),du.days=du.day.range,du.days.utc=du.day.utc.range,du.dayOfYear=function(t){var n=du.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var r=du[t]=zt(function(t){return(t=du.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var r=du.year(t).getDay();return Math.floor((du.dayOfYear(t)+(r+n)%7)/7)-(r!==n)});du[t+"s"]=r.range,du[t+"s"].utc=r.utc.range,du[t+"OfYear"]=function(t){var r=du.year(t).getDay();return Math.floor((du.dayOfYear(t)+(r+n)%7)/7)}}),du.week=du.sunday,du.weeks=du.sunday.range,du.weeks.utc=du.sunday.utc.range,du.weekOfYear=du.sundayOfYear;var mu={"-":"",_:" ",0:"0"},bu=/^\s*\d+/,_u=/^%/;so.locale=function(t){return{numberFormat:qt(t),timeFormat:Ot(t)}};var xu=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=xu.numberFormat,so.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,wu),hn(wu.s,this.s,this),this.s?this.t+=wu.t:this.s=wu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var wu=new fn;so.geo.stream=function(t,n){t&&Mu.hasOwnProperty(t.type)?Mu[t.type](t,n):pn(t,n)};var Mu={Feature:function(t,n){pn(t.geometry,n)},FeatureCollection:function(t,n){for(var r=t.features,e=-1,i=r.length;++e<i;)pn(r[e].geometry,n)}},Au={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)t=r[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){gn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)gn(r[e],n,0)},Polygon:function(t,n){dn(t.coordinates,n)},MultiPolygon:function(t,n){for(var r=t.coordinates,e=-1,i=r.length;++e<i;)dn(r[e],n)},GeometryCollection:function(t,n){for(var r=t.geometries,e=-1,i=r.length;++e<i;)pn(r[e],n)}};so.geo.area=function(t){return Eu=0,so.geo.stream(t,Nu),Eu};var Eu,ku=new fn,Nu={sphere:function(){Eu+=4*Vo},point:w,lineStart:w,lineEnd:w,polygonStart:function(){ku.reset(),Nu.lineStart=vn},polygonEnd:function(){var t=2*ku;Eu+=0>t?4*Vo+t:t,Nu.lineStart=Nu.lineEnd=Nu.point=w}};so.geo.bounds=function(){function t(t,n){b.push(_=[l=t,h=t]),f>n&&(f=n),n>p&&(p=n)}function n(n,r){var e=yn([n*Yo,r*Yo]);if(y){var i=bn(y,e),a=[i[1],-i[0],0],o=bn(a,i);wn(o),o=Mn(o);var s=n-g,c=s>0?1:-1,d=o[0]*Ho*c,v=xo(s)>180;if(v^(d>c*g&&c*n>d)){var m=o[1]*Ho;m>p&&(p=m)}else if(d=(d+360)%360-180,v^(d>c*g&&c*n>d)){var m=-o[1]*Ho;f>m&&(f=m)}else f>r&&(f=r),r>p&&(p=r);v?g>n?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n):h>=l?(l>n&&(l=n),n>h&&(h=n)):n>g?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n)}else t(n,r);y=e,g=n}function r(){x.point=n}function e(){_[0]=l,_[1]=h,x.point=t,y=null}function i(t,r){if(y){var e=t-g;m+=xo(e)>180?e+(e>0?360:-360):e}else d=t,v=r;Nu.point(t,r),n(t,r)}function a(){Nu.lineStart()}function o(){i(d,v),Nu.lineEnd(),xo(m)>qo&&(l=-(h=180)),_[0]=l,_[1]=h,y=null}function u(t,n){return(n-=t)<0?n+360:n}function s(t,n){return t[0]-n[0]}function c(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var l,f,h,p,g,d,v,y,m,b,_,x={point:t,lineStart:r,lineEnd:e,polygonStart:function(){x.point=i,x.lineStart=a,x.lineEnd=o,m=0,Nu.polygonStart()},polygonEnd:function(){Nu.polygonEnd(),x.point=t,x.lineStart=r,x.lineEnd=e,0>ku?(l=-(h=180),f=-(p=90)):m>qo?p=90:-qo>m&&(f=-90),_[0]=l,_[1]=h}};return function(t){p=h=-(l=f=1/0),b=[],so.geo.stream(t,x);var n=b.length;if(n){b.sort(s);for(var r,e=1,i=b[0],a=[i];n>e;++e)r=b[e],c(r[0],i)||c(r[1],i)?(u(i[0],r[1])>u(i[0],i[1])&&(i[1]=r[1]),u(r[0],i[1])>u(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(var o,r,g=-(1/0),n=a.length-1,e=0,i=a[n];n>=e;i=r,++e)r=a[e],(o=u(i[1],r[0]))>g&&(g=o,l=r[0],h=i[1])}return b=_=null,l===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,f],[h,p]]}}(),so.geo.centroid=function(t){Su=Tu=Iu=ju=Lu=Uu=Cu=Ru=Bu=Pu=qu=0,so.geo.stream(t,Du);var n=Bu,r=Pu,e=qu,i=n*n+r*r+e*e;return Do>i&&(n=Uu,r=Cu,e=Ru,qo>Tu&&(n=Iu,r=ju,e=Lu),i=n*n+r*r+e*e,Do>i)?[NaN,NaN]:[Math.atan2(r,n)*Ho,rt(e/Math.sqrt(i))*Ho]};var Su,Tu,Iu,ju,Lu,Uu,Cu,Ru,Bu,Pu,qu,Du={sphere:w,point:En,lineStart:Nn,lineEnd:Sn,polygonStart:function(){Du.lineStart=Tn},polygonEnd:function(){Du.lineStart=Nn}},Vu=Rn(jn,Dn,zn,[-Vo,-Vo/2]),zu=1e9;so.geo.clipExtent=function(){var t,n,r,e,i,a,o={stream:function(t){return i&&(i.valid=!1),i=a(t),i.valid=!0,i},extent:function(u){return arguments.length?(a=Hn(t=+u[0][0],n=+u[0][1],r=+u[1][0],e=+u[1][1]),i&&(i.valid=!1,i=null),o):[[t,n],[r,e]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return Xn(Zn)}).raw=Zn,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return n=null,r(a,o),n||(e(a,o),n)||i(a,o),n}var n,r,e,i,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,r){n=[t,r]}};return t.invert=function(t){var n=a.scale(),r=a.translate(),e=(t[0]-r[0])/n,i=(t[1]-r[1])/n;return(i>=.12&&.234>i&&e>=-.425&&-.214>e?o:i>=.166&&.234>i&&e>=-.214&&-.115>e?u:a).invert(t)},t.stream=function(t){var n=a.stream(t),r=o.stream(t),e=u.stream(t);return{point:function(t,i){n.point(t,i),r.point(t,i),e.point(t,i)},sphere:function(){n.sphere(),r.sphere(),e.sphere()},lineStart:function(){n.lineStart(),r.lineStart(),e.lineStart()},lineEnd:function(){n.lineEnd(),r.lineEnd(),e.lineEnd()},polygonStart:function(){n.polygonStart(),r.polygonStart(),e.polygonStart()},polygonEnd:function(){n.polygonEnd(),r.polygonEnd(),e.polygonEnd()}}},t.precision=function(n){return arguments.length?(a.precision(n),o.precision(n),u.precision(n),t):a.precision()},t.scale=function(n){return arguments.length?(a.scale(n),o.scale(.35*n),u.scale(n),t.translate(a.translate())):a.scale()},t.translate=function(n){if(!arguments.length)return a.translate();var c=a.scale(),l=+n[0],f=+n[1];return r=a.translate(n).clipExtent([[l-.455*c,f-.238*c],[l+.455*c,f+.238*c]]).stream(s).point,e=o.translate([l-.307*c,f+.201*c]).clipExtent([[l-.425*c+qo,f+.12*c+qo],[l-.214*c-qo,f+.234*c-qo]]).stream(s).point,i=u.translate([l-.205*c,f+.212*c]).clipExtent([[l-.214*c+qo,f+.166*c+qo],[l-.115*c-qo,f+.234*c-qo]]).stream(s).point,t},t.scale(1070)};var Fu,Ou,Yu,Hu,Xu,Zu,$u={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ou=0,$u.lineStart=$n},polygonEnd:function(){$u.lineStart=$u.lineEnd=$u.point=w,Fu+=xo(Ou/2)}},Wu={point:Wn,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Gu={point:Kn,lineStart:Qn,lineEnd:tr,polygonStart:function(){Gu.lineStart=nr},polygonEnd:function(){Gu.point=Kn,Gu.lineStart=Qn,Gu.lineEnd=tr}};so.geo.path=function(){function t(t){return t&&("function"==typeof u&&a.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(a)),so.geo.stream(t,o)),a.result()}function n(){return o=null,t}var r,e,i,a,o,u=4.5;return t.area=function(t){return Fu=0,so.geo.stream(t,i($u)),Fu},t.centroid=function(t){return Iu=ju=Lu=Uu=Cu=Ru=Bu=Pu=qu=0,so.geo.stream(t,i(Gu)),qu?[Bu/qu,Pu/qu]:Ru?[Uu/Ru,Cu/Ru]:Lu?[Iu/Lu,ju/Lu]:[NaN,NaN]},t.bounds=function(t){return Xu=Zu=-(Yu=Hu=1/0),so.geo.stream(t,i(Wu)),[[Yu,Hu],[Xu,Zu]]},t.projection=function(t){return arguments.length?(i=(r=t)?t.stream||ir(t):b,n()):r},t.context=function(t){return arguments.length?(a=null==(e=t)?new Gn:new rr(t),"function"!=typeof u&&a.pointRadius(u),n()):e},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(a.pointRadius(+n),+n),t):u},t.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(t){return{stream:function(n){var r=new ar(n);for(var e in t)r[e]=t[e];return r}}},ar.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=ur,so.geo.projectionMutator=sr,(so.geo.equirectangular=function(){return ur(lr)}).raw=lr.invert=lr,so.geo.rotation=function(t){function n(n){return n=t(n[0]*Yo,n[1]*Yo),n[0]*=Ho,n[1]*=Ho,n}return t=hr(t[0]%360*Yo,t[1]*Yo,t.length>2?t[2]*Yo:0),n.invert=function(n){return n=t.invert(n[0]*Yo,n[1]*Yo),n[0]*=Ho,n[1]*=Ho,n},n},fr.invert=lr,so.geo.circle=function(){function t(){var t="function"==typeof e?e.apply(this,arguments):e,n=hr(-t[0]*Yo,-t[1]*Yo,0).invert,i=[];return r(null,null,1,{point:function(t,r){i.push(t=n(t,r)),t[0]*=Ho,t[1]*=Ho}}),{type:"Polygon",coordinates:[i]}}var n,r,e=[0,0],i=6;return t.origin=function(n){return arguments.length?(e=n,t):e},t.angle=function(e){return arguments.length?(r=vr((n=+e)*Yo,i*Yo),t):n},t.precision=function(e){return arguments.length?(r=vr(n*Yo,(i=+e)*Yo),t):i},t.angle(90)},so.geo.distance=function(t,n){var r,e=(n[0]-t[0])*Yo,i=t[1]*Yo,a=n[1]*Yo,o=Math.sin(e),u=Math.cos(e),s=Math.sin(i),c=Math.cos(i),l=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((r=f*o)*r+(r=c*l-s*f*u)*r),s*l+c*f*u);
},so.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return so.range(Math.ceil(a/v)*v,i,v).map(h).concat(so.range(Math.ceil(c/y)*y,s,y).map(p)).concat(so.range(Math.ceil(e/g)*g,r,g).filter(function(t){return xo(t%v)>qo}).map(l)).concat(so.range(Math.ceil(u/d)*d,o,d).filter(function(t){return xo(t%y)>qo}).map(f))}var r,e,i,a,o,u,s,c,l,f,h,p,g=10,d=g,v=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(s).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(a=+n[0][0],i=+n[1][0],c=+n[0][1],s=+n[1][1],a>i&&(n=a,a=i,i=n),c>s&&(n=c,c=s,s=n),t.precision(m)):[[a,c],[i,s]]},t.minorExtent=function(n){return arguments.length?(e=+n[0][0],r=+n[1][0],u=+n[0][1],o=+n[1][1],e>r&&(n=e,e=r,r=n),u>o&&(n=u,u=o,o=n),t.precision(m)):[[e,u],[r,o]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(g=+n[0],d=+n[1],t):[g,d]},t.precision=function(n){return arguments.length?(m=+n,l=mr(u,o,90),f=br(e,r,m),h=mr(c,s,90),p=br(a,i,m),t):m},t.majorExtent([[-180,-90+qo],[180,90-qo]]).minorExtent([[-180,-80-qo],[180,80+qo]])},so.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||e.apply(this,arguments),r||i.apply(this,arguments)]}}var n,r,e=_r,i=xr;return t.distance=function(){return so.geo.distance(n||e.apply(this,arguments),r||i.apply(this,arguments))},t.source=function(r){return arguments.length?(e=r,n="function"==typeof r?null:r,t):e},t.target=function(n){return arguments.length?(i=n,r="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},so.geo.interpolate=function(t,n){return wr(t[0]*Yo,t[1]*Yo,n[0]*Yo,n[1]*Yo)},so.geo.length=function(t){return Ju=0,so.geo.stream(t,Ku),Ju};var Ju,Ku={sphere:w,point:w,lineStart:Mr,lineEnd:w,polygonStart:w,polygonEnd:w},Qu=Ar(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(so.geo.azimuthalEqualArea=function(){return ur(Qu)}).raw=Qu;var ts=Ar(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},b);(so.geo.azimuthalEquidistant=function(){return ur(ts)}).raw=ts,(so.geo.conicConformal=function(){return Xn(Er)}).raw=Er,(so.geo.conicEquidistant=function(){return Xn(kr)}).raw=kr;var ns=Ar(function(t){return 1/t},Math.atan);(so.geo.gnomonic=function(){return ur(ns)}).raw=ns,Nr.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Oo]},(so.geo.mercator=function(){return Sr(Nr)}).raw=Nr;var rs=Ar(function(){return 1},Math.asin);(so.geo.orthographic=function(){return ur(rs)}).raw=rs;var es=Ar(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(so.geo.stereographic=function(){return ur(es)}).raw=es,Tr.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Oo]},(so.geo.transverseMercator=function(){var t=Sr(Tr),n=t.center,r=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):(t=r(),[t[0],t[1],t[2]-90])},r([0,0,90])}).raw=Tr,so.geom={},so.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Nt(r),a=Nt(e),o=t.length,u=[],s=[];for(n=0;o>n;n++)u.push([+i.call(this,t[n],n),+a.call(this,t[n],n),n]);for(u.sort(Ur),n=0;o>n;n++)s.push([u[n][0],-u[n][1]]);var c=Lr(u),l=Lr(s),f=l[0]===c[0],h=l[l.length-1]===c[c.length-1],p=[];for(n=c.length-1;n>=0;--n)p.push(t[u[c[n]][2]]);for(n=+f;n<l.length-h;++n)p.push(t[u[l[n]][2]]);return p}var r=Ir,e=jr;return arguments.length?n(t):(n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(e=t,n):e},n)},so.geom.polygon=function(t){return ko(t,is),t};var is=so.geom.polygon.prototype=[];is.area=function(){for(var t,n=-1,r=this.length,e=this[r-1],i=0;++n<r;)t=e,e=this[n],i+=t[1]*e[0]-t[0]*e[1];return.5*i},is.centroid=function(t){var n,r,e=-1,i=this.length,a=0,o=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++e<i;)n=u,u=this[e],r=n[0]*u[1]-u[0]*n[1],a+=(n[0]+u[0])*r,o+=(n[1]+u[1])*r;return[a*t,o*t]},is.clip=function(t){for(var n,r,e,i,a,o,u=Br(t),s=-1,c=this.length-Br(this),l=this[c-1];++s<c;){for(n=t.slice(),t.length=0,i=this[s],a=n[(e=n.length-u)-1],r=-1;++r<e;)o=n[r],Cr(o,l,i)?(Cr(a,l,i)||t.push(Rr(a,o,l,i)),t.push(o)):Cr(a,l,i)&&t.push(Rr(a,o,l,i)),a=o;u&&t.push(t[0]),l=i}return t};var as,os,us,ss,cs,ls=[],fs=[];Yr.prototype.prepare=function(){for(var t,n=this.edges,r=n.length;r--;)t=n[r].edge,t.b&&t.a||n.splice(r,1);return n.sort(Xr),n.length},re.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ee.prototype={insert:function(t,n){var r,e,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;r=t}else this._?(t=ue(this._),n.P=null,n.N=t,t.P=t.L=n,r=t):(n.P=n.N=null,this._=n,r=null);for(n.L=n.R=null,n.U=r,n.C=!0,t=n;r&&r.C;)e=r.U,r===e.L?(i=e.R,i&&i.C?(r.C=i.C=!1,e.C=!0,t=e):(t===r.R&&(ae(this,r),t=r,r=t.U),r.C=!1,e.C=!0,oe(this,e))):(i=e.L,i&&i.C?(r.C=i.C=!1,e.C=!0,t=e):(t===r.L&&(oe(this,r),t=r,r=t.U),r.C=!1,e.C=!0,ae(this,e))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,r,e,i=t.U,a=t.L,o=t.R;if(r=a?o?ue(o):a:o,i?i.L===t?i.L=r:i.R=r:this._=r,a&&o?(e=r.C,r.C=t.C,r.L=a,a.U=r,r!==o?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=o,o.U=r):(r.U=i,i=r,t=r.R)):(e=t.C,t=r),t&&(t.U=i),!e){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,ae(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,oe(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,ae(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,oe(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ae(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,oe(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},so.geom.voronoi=function(t){function n(t){var n=new Array(t.length),e=u[0][0],i=u[0][1],a=u[1][0],o=u[1][1];return se(r(t),u).cells.forEach(function(r,u){var s=r.edges,c=r.site,l=n[u]=s.length?s.map(function(t){var n=t.start();return[n.x,n.y]}):c.x>=e&&c.x<=a&&c.y>=i&&c.y<=o?[[e,o],[a,o],[a,i],[e,i]]:[];l.point=t[u]}),n}function r(t){return t.map(function(t,n){return{x:Math.round(a(t,n)/qo)*qo,y:Math.round(o(t,n)/qo)*qo,i:n}})}var e=Ir,i=jr,a=e,o=i,u=hs;return t?n(t):(n.links=function(t){return se(r(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return se(r(t)).cells.forEach(function(r,e){for(var i,a,o=r.site,u=r.edges.sort(Xr),s=-1,c=u.length,l=u[c-1].edge,f=l.l===o?l.r:l.l;++s<c;)i=l,a=f,l=u[s].edge,f=l.l===o?l.r:l.l,e<a.i&&e<f.i&&le(o,a,f)<0&&n.push([t[e],t[a.i],t[f.i]])}),n},n.x=function(t){return arguments.length?(a=Nt(e=t),n):e},n.y=function(t){return arguments.length?(o=Nt(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?hs:t,n):u===hs?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===hs?null:u&&u[1]},n)};var hs=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(t){return so.geom.voronoi().triangles(t)},so.geom.quadtree=function(t,n,r,e,i){function a(t){function a(t,n,r,e,i,a,o,u){if(!isNaN(r)&&!isNaN(e))if(t.leaf){var s=t.x,l=t.y;if(null!=s)if(xo(s-r)+xo(l-e)<.01)c(t,n,r,e,i,a,o,u);else{var f=t.point;t.x=t.y=t.point=null,c(t,f,s,l,i,a,o,u),c(t,n,r,e,i,a,o,u)}else t.x=r,t.y=e,t.point=n}else c(t,n,r,e,i,a,o,u)}function c(t,n,r,e,i,o,u,s){var c=.5*(i+u),l=.5*(o+s),f=r>=c,h=e>=l,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=pe()),f?i=c:u=c,h?o=l:s=l,a(t,n,r,e,i,o,u,s)}var l,f,h,p,g,d,v,y,m,b=Nt(u),_=Nt(s);if(null!=n)d=n,v=r,y=e,m=i;else if(y=m=-(d=v=1/0),f=[],h=[],g=t.length,o)for(p=0;g>p;++p)l=t[p],l.x<d&&(d=l.x),l.y<v&&(v=l.y),l.x>y&&(y=l.x),l.y>m&&(m=l.y),f.push(l.x),h.push(l.y);else for(p=0;g>p;++p){var x=+b(l=t[p],p),w=+_(l,p);d>x&&(d=x),v>w&&(v=w),x>y&&(y=x),w>m&&(m=w),f.push(x),h.push(w)}var M=y-d,A=m-v;M>A?m=v+M:y=d+A;var E=pe();if(E.add=function(t){a(E,t,+b(t,++p),+_(t,p),d,v,y,m)},E.visit=function(t){ge(t,E,d,v,y,m)},E.find=function(t){return de(E,t[0],t[1],d,v,y,m)},p=-1,null==n){for(;++p<g;)a(E,t[p],f[p],h[p],d,v,y,m);--p}else t.forEach(E.add);return f=h=t=l=null,E}var o,u=Ir,s=jr;return(o=arguments.length)?(u=fe,s=he,3===o&&(i=r,e=n,r=n=0),a(t)):(a.x=function(t){return arguments.length?(u=t,a):u},a.y=function(t){return arguments.length?(s=t,a):s},a.extent=function(t){return arguments.length?(null==t?n=r=e=i=null:(n=+t[0][0],r=+t[0][1],e=+t[1][0],i=+t[1][1]),a):null==n?null:[[n,r],[e,i]]},a.size=function(t){return arguments.length?(null==t?n=r=e=i=null:(n=r=0,e=+t[0],i=+t[1]),a):null==n?null:[e-n,i-r]},a)},so.interpolateRgb=ve,so.interpolateObject=ye,so.interpolateNumber=me,so.interpolateString=be;var ps=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gs=new RegExp(ps.source,"g");so.interpolate=_e,so.interpolators=[function(t,n){var r=typeof n;return("string"===r?ou.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?ve:be:n instanceof ut?ve:Array.isArray(n)?xe:"object"===r&&isNaN(n)?ye:me)(t,n)}],so.interpolateArray=xe;var ds=function(){return b},vs=so.map({linear:ds,poly:Se,quad:function(){return Ee},cubic:function(){return ke},sin:function(){return Te},exp:function(){return Ie},circle:function(){return je},elastic:Le,back:Ue,bounce:function(){return Ce}}),ys=so.map({"in":b,out:Me,"in-out":Ae,"out-in":function(t){return Ae(Me(t))}});so.ease=function(t){var n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,e=n>=0?t.slice(n+1):"in";return r=vs.get(r)||ds,e=ys.get(e)||b,we(e(r.apply(null,co.call(arguments,1))))},so.interpolateHcl=Re,so.interpolateHsl=Be,so.interpolateLab=Pe,so.interpolateRound=qe,so.transform=function(t){var n=fo.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(t){if(null!=t){n.setAttribute("transform",t);var r=n.transform.baseVal.consolidate()}return new De(r?r.matrix:ms)})(t)},De.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ms={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=$e,so.layout={},so.layout.bundle=function(){return function(t){for(var n=[],r=-1,e=t.length;++r<e;)n.push(Je(t[r]));return n}},so.layout.chord=function(){function t(){var t,c,f,h,p,g={},d=[],v=so.range(a),y=[];for(r=[],e=[],t=0,h=-1;++h<a;){for(c=0,p=-1;++p<a;)c+=i[h][p];d.push(c),y.push(so.range(a)),t+=c}for(o&&v.sort(function(t,n){return o(d[t],d[n])}),u&&y.forEach(function(t,n){t.sort(function(t,r){return u(i[n][t],i[n][r])})}),t=(zo-l*a)/t,c=0,h=-1;++h<a;){for(f=c,p=-1;++p<a;){var m=v[h],b=y[m][p],_=i[m][b],x=c,w=c+=_*t;g[m+"-"+b]={index:m,subindex:b,startAngle:x,endAngle:w,value:_}}e[m]={index:m,startAngle:f,endAngle:c,value:d[m]},c+=l}for(h=-1;++h<a;)for(p=h-1;++p<a;){var M=g[h+"-"+p],A=g[p+"-"+h];(M.value||A.value)&&r.push(M.value<A.value?{source:A,target:M}:{source:M,target:A})}s&&n()}function n(){r.sort(function(t,n){return s((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var r,e,i,a,o,u,s,c={},l=0;return c.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,r=e=null,c):i},c.padding=function(t){return arguments.length?(l=t,r=e=null,c):l},c.sortGroups=function(t){return arguments.length?(o=t,r=e=null,c):o},c.sortSubgroups=function(t){return arguments.length?(u=t,r=null,c):u},c.sortChords=function(t){return arguments.length?(s=t,r&&n(),c):s},c.chords=function(){return r||t(),r},c.groups=function(){return e||t(),e},c},so.layout.force=function(){function t(t){return function(n,r,e,i){if(n.point!==t){var a=n.cx-t.x,o=n.cy-t.y,u=i-r,s=a*a+o*o;if(s>u*u/y){if(d>s){var c=n.charge/s;t.px-=a*c,t.py-=o*c}return!0}if(n.point&&s&&d>s){var c=n.pointCharge/s;t.px-=a*c,t.py-=o*c}}return!n.charge}}function n(t){t.px=so.event.x,t.py=so.event.y,s.resume()}var r,e,i,a,o,u,s={},c=so.dispatch("start","tick","end"),l=[1,1],f=.9,h=bs,p=_s,g=-30,d=xs,v=.1,y=.64,m=[],_=[];return s.tick=function(){if((i*=.99)<.005)return r=null,c.end({type:"end",alpha:i=0}),!0;var n,e,s,h,p,d,y,b,x,w=m.length,M=_.length;for(e=0;M>e;++e)s=_[e],h=s.source,p=s.target,b=p.x-h.x,x=p.y-h.y,(d=b*b+x*x)&&(d=i*o[e]*((d=Math.sqrt(d))-a[e])/d,b*=d,x*=d,p.x-=b*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=x*y,h.x+=b*(y=1-y),h.y+=x*y);if((y=i*v)&&(b=l[0]/2,x=l[1]/2,e=-1,y))for(;++e<w;)s=m[e],s.x+=(b-s.x)*y,s.y+=(x-s.y)*y;if(g)for(ii(n=so.geom.quadtree(m),i,u),e=-1;++e<w;)(s=m[e]).fixed||n.visit(t(s));for(e=-1;++e<w;)s=m[e],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*f,s.y-=(s.py-(s.py=s.y))*f);c.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(_=t,s):_},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.friction=function(t){return arguments.length?(f=+t,s):f},s.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,s):g},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(y=t*t,s):Math.sqrt(y)},s.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(r.c=null,r.t=NaN,r=null,c.end({type:"end",alpha:i=0})):t>0&&(c.start({type:"start",alpha:i=t}),r=Lt(s.tick)),s):i},s.start=function(){function t(t,e){if(!r){for(r=new Array(i),s=0;i>s;++s)r[s]=[];for(s=0;c>s;++s){var a=_[s];r[a.source.index].push(a.target),r[a.target.index].push(a.source)}}for(var o,u=r[n],s=-1,l=u.length;++s<l;)if(!isNaN(o=u[s][t]))return o;return Math.random()*e}var n,r,e,i=m.length,c=_.length,f=l[0],d=l[1];for(n=0;i>n;++n)(e=m[n]).index=n,e.weight=0;for(n=0;c>n;++n)e=_[n],"number"==typeof e.source&&(e.source=m[e.source]),"number"==typeof e.target&&(e.target=m[e.target]),++e.source.weight,++e.target.weight;for(n=0;i>n;++n)e=m[n],isNaN(e.x)&&(e.x=t("x",f)),isNaN(e.y)&&(e.y=t("y",d)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(a=[],"function"==typeof h)for(n=0;c>n;++n)a[n]=+h.call(this,_[n],n);else for(n=0;c>n;++n)a[n]=h;if(o=[],"function"==typeof p)for(n=0;c>n;++n)o[n]=+p.call(this,_[n],n);else for(n=0;c>n;++n)o[n]=p;if(u=[],"function"==typeof g)for(n=0;i>n;++n)u[n]=+g.call(this,m[n],n);else for(n=0;i>n;++n)u[n]=g;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return e||(e=so.behavior.drag().origin(b).on("dragstart.force",ti).on("drag.force",n).on("dragend.force",ni)),arguments.length?void this.on("mouseover.force",ri).on("mouseout.force",ei).call(e):e},so.rebind(s,c,"on")};var bs=20,_s=1,xs=1/0;so.layout.hierarchy=function(){function t(i){var a,o=[i],u=[];for(i.depth=0;null!=(a=o.pop());)if(u.push(a),(c=r.call(t,a,a.depth))&&(s=c.length)){for(var s,c,l;--s>=0;)o.push(l=c[s]),l.parent=a,l.depth=a.depth+1;e&&(a.value=0),a.children=c}else e&&(a.value=+e.call(t,a,a.depth)||0),delete a.children;return ui(i,function(t){var r,i;n&&(r=t.children)&&r.sort(n),e&&(i=t.parent)&&(i.value+=t.value)}),u}var n=li,r=si,e=ci;return t.sort=function(r){return arguments.length?(n=r,t):n},t.children=function(n){return arguments.length?(r=n,t):r},t.value=function(n){return arguments.length?(e=n,t):e},t.revalue=function(n){return e&&(oi(n,function(t){t.children&&(t.value=0)}),ui(n,function(n){var r;n.children||(n.value=+e.call(t,n,n.depth)||0),(r=n.parent)&&(r.value+=n.value)})),n},t},so.layout.partition=function(){function t(n,r,e,i){var a=n.children;if(n.x=r,n.y=n.depth*i,n.dx=e,n.dy=i,a&&(o=a.length)){var o,u,s,c=-1;for(e=n.value?e/n.value:0;++c<o;)t(u=a[c],r,s=u.value*e,i),r+=s}}function n(t){var r=t.children,e=0;if(r&&(i=r.length))for(var i,a=-1;++a<i;)e=Math.max(e,n(r[a]));return 1+e}function r(r,a){var o=e.call(this,r,a);return t(o[0],0,i[0],i[1]/n(o[0])),o}var e=so.layout.hierarchy(),i=[1,1];return r.size=function(t){return arguments.length?(i=t,r):i},ai(r,e)},so.layout.pie=function(){function t(o){var u,s=o.length,c=o.map(function(r,e){return+n.call(t,r,e)}),l=+("function"==typeof e?e.apply(this,arguments):e),f=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(f)/s,+("function"==typeof a?a.apply(this,arguments):a)),p=h*(0>f?-1:1),g=so.sum(c),d=g?(f-s*p)/g:0,v=so.range(s),y=[];return null!=r&&v.sort(r===ws?function(t,n){return c[n]-c[t]}:function(t,n){return r(o[t],o[n])}),v.forEach(function(t){y[t]={data:o[t],value:u=c[t],startAngle:l,endAngle:l+=u*d+p,padAngle:h}}),y}var n=Number,r=ws,e=0,i=zo,a=0;return t.value=function(r){return arguments.length?(n=r,t):n},t.sort=function(n){return arguments.length?(r=n,t):r},t.startAngle=function(n){return arguments.length?(e=n,t):e},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(a=n,t):a},t};var ws={};so.layout.stack=function(){function t(u,s){if(!(h=u.length))return u;var c=u.map(function(r,e){return n.call(t,r,e)}),l=c.map(function(n){return n.map(function(n,r){return[a.call(t,n,r),o.call(t,n,r)]})}),f=r.call(t,l,s);c=so.permute(c,f),l=so.permute(l,f);var h,p,g,d,v=e.call(t,l,s),y=c[0].length;for(g=0;y>g;++g)for(i.call(t,c[0][g],d=v[g],l[0][g][1]),p=1;h>p;++p)i.call(t,c[p][g],d+=l[p-1][g][1],l[p][g][1]);return u}var n=b,r=di,e=vi,i=gi,a=hi,o=pi;return t.values=function(r){return arguments.length?(n=r,t):n},t.order=function(n){return arguments.length?(r="function"==typeof n?n:Ms.get(n)||di,t):r},t.offset=function(n){return arguments.length?(e="function"==typeof n?n:As.get(n)||vi,t):e},t.x=function(n){return arguments.length?(a=n,t):a},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(i=n,t):i},t};var Ms=so.map({"inside-out":function(t){var n,r,e=t.length,i=t.map(yi),a=t.map(mi),o=so.range(e).sort(function(t,n){return i[t]-i[n]}),u=0,s=0,c=[],l=[];for(n=0;e>n;++n)r=o[n],s>u?(u+=a[r],c.push(r)):(s+=a[r],l.push(r));return l.reverse().concat(c)},reverse:function(t){return so.range(t.length).reverse()},"default":di}),As=so.map({silhouette:function(t){var n,r,e,i=t.length,a=t[0].length,o=[],u=0,s=[];for(r=0;a>r;++r){for(n=0,e=0;i>n;n++)e+=t[n][r][1];e>u&&(u=e),o.push(e)}for(r=0;a>r;++r)s[r]=(u-o[r])/2;return s},wiggle:function(t){var n,r,e,i,a,o,u,s,c,l=t.length,f=t[0],h=f.length,p=[];for(p[0]=s=c=0,r=1;h>r;++r){for(n=0,i=0;l>n;++n)i+=t[n][r][1];for(n=0,a=0,u=f[r][0]-f[r-1][0];l>n;++n){for(e=0,o=(t[n][r][1]-t[n][r-1][1])/(2*u);n>e;++e)o+=(t[e][r][1]-t[e][r-1][1])/u;a+=o*t[n][r][1]}p[r]=s-=i?a/i*u:0,c>s&&(c=s)}for(r=0;h>r;++r)p[r]-=c;return p},expand:function(t){var n,r,e,i=t.length,a=t[0].length,o=1/i,u=[];for(r=0;a>r;++r){for(n=0,e=0;i>n;n++)e+=t[n][r][1];if(e)for(n=0;i>n;n++)t[n][r][1]/=e;else for(n=0;i>n;n++)t[n][r][1]=o}for(r=0;a>r;++r)u[r]=0;return u},zero:vi});so.layout.histogram=function(){function t(t,a){for(var o,u,s=[],c=t.map(r,this),l=e.call(this,c,a),f=i.call(this,l,c,a),a=-1,h=c.length,p=f.length-1,g=n?1:1/h;++a<p;)o=s[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(p>0)for(a=-1;++a<h;)u=c[a],u>=l[0]&&u<=l[1]&&(o=s[so.bisect(f,u,1,p)-1],o.y+=g,o.push(t[a]));return s}var n=!0,r=Number,e=wi,i=_i;return t.value=function(n){return arguments.length?(r=n,t):r},t.range=function(n){return arguments.length?(e=Nt(n),t):e},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return xi(t,n)}:Nt(n),t):i},t.frequency=function(r){return arguments.length?(n=!!r,t):n},t},so.layout.pack=function(){function t(t,a){var o=r.call(this,t,a),u=o[0],s=i[0],c=i[1],l=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,ui(u,function(t){t.r=+l(t.value)}),ui(u,Ni),e){var f=e*(n?1:Math.max(2*u.r/s,2*u.r/c))/2;ui(u,function(t){t.r+=f}),ui(u,Ni),ui(u,function(t){t.r-=f})}return Ii(u,s/2,c/2,n?1:1/Math.max(2*u.r/s,2*u.r/c)),o}var n,r=so.layout.hierarchy().sort(Mi),e=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(r){return arguments.length?(n=null==r||"function"==typeof r?r:+r,t):n},t.padding=function(n){return arguments.length?(e=+n,t):e},ai(t,r)},so.layout.tree=function(){function t(t,i){var l=o.call(this,t,i),f=l[0],h=n(f);if(ui(h,r),h.parent.m=-h.z,oi(h,e),c)oi(f,a);else{var p=f,g=f,d=f;oi(f,function(t){t.x<p.x&&(p=t),t.x>g.x&&(g=t),t.depth>d.depth&&(d=t)});var v=u(p,g)/2-p.x,y=s[0]/(g.x+u(g,p)/2+v),m=s[1]/(d.depth||1);oi(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return l}function n(t){for(var n,r={A:null,children:[t]},e=[r];null!=(n=e.pop());)for(var i,a=n.children,o=0,u=a.length;u>o;++o)e.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return r.children[0]}function r(t){var n=t.children,r=t.parent.children,e=t.i?r[t.i-1]:null;if(n.length){Bi(t);var a=(n[0].z+n[n.length-1].z)/2;e?(t.z=e.z+u(t._,e._),t.m=t.z-a):t.z=a}else e&&(t.z=e.z+u(t._,e._));t.parent.A=i(t,e,t.parent.A||r[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,r){if(n){for(var e,i=t,a=t,o=n,s=i.parent.children[0],c=i.m,l=a.m,f=o.m,h=s.m;o=Ci(o),i=Ui(i),o&&i;)s=Ui(s),a=Ci(a),a.a=t,e=o.z+f-i.z-c+u(o._,i._),e>0&&(Ri(Pi(o,t,r),t,e),c+=e,l+=e),f+=o.m,c+=i.m,h+=s.m,l+=a.m;o&&!Ci(a)&&(a.t=o,a.m+=f-l),i&&!Ui(s)&&(s.t=i,s.m+=c-h,r=t)}return r}function a(t){t.x*=s[0],t.y=t.depth*s[1]}var o=so.layout.hierarchy().sort(null).value(null),u=Li,s=[1,1],c=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(c=null==(s=n)?a:null,t):c?null:s},t.nodeSize=function(n){return arguments.length?(c=null==(s=n)?null:a,t):c?s:null},ai(t,o)},so.layout.cluster=function(){function t(t,a){var o,u=n.call(this,t,a),s=u[0],c=0;ui(s,function(t){var n=t.children;n&&n.length?(t.x=Di(n),t.y=qi(n)):(t.x=o?c+=r(t,o):0,t.y=0,o=t)});var l=Vi(s),f=zi(s),h=l.x-r(l,f)/2,p=f.x+r(f,l)/2;return ui(s,i?function(t){t.x=(t.x-s.x)*e[0],t.y=(s.y-t.y)*e[1]}:function(t){t.x=(t.x-h)/(p-h)*e[0],t.y=(1-(s.y?t.y/s.y:1))*e[1]}),u}var n=so.layout.hierarchy().sort(null).value(null),r=Li,e=[1,1],i=!1;return t.separation=function(n){return arguments.length?(r=n,t):r},t.size=function(n){return arguments.length?(i=null==(e=n),t):i?null:e},t.nodeSize=function(n){return arguments.length?(i=null!=(e=n),t):i?e:null},ai(t,n)},so.layout.treemap=function(){function t(t,n){for(var r,e,i=-1,a=t.length;++i<a;)e=(r=t[i]).value*(0>n?0:n),r.area=isNaN(e)||0>=e?0:e}function n(r){var a=r.children;if(a&&a.length){var o,u,s,c=f(r),l=[],h=a.slice(),g=1/0,d="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&r.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(h,c.dx*c.dy/r.value),l.area=0;(s=h.length)>0;)l.push(o=h[s-1]),l.area+=o.area,"squarify"!==p||(u=e(l,d))<=g?(h.pop(),g=u):(l.area-=l.pop().area,i(l,d,c,!1),d=Math.min(c.dx,c.dy),l.length=l.area=0,g=1/0);l.length&&(i(l,d,c,!0),l.length=l.area=0),a.forEach(n)}}function r(n){var e=n.children;if(e&&e.length){var a,o=f(n),u=e.slice(),s=[];for(t(u,o.dx*o.dy/n.value),s.area=0;a=u.pop();)s.push(a),s.area+=a.area,null!=a.z&&(i(s,a.z?o.dx:o.dy,o,!u.length),s.length=s.area=0);e.forEach(r)}}function e(t,n){for(var r,e=t.area,i=0,a=1/0,o=-1,u=t.length;++o<u;)(r=t[o].area)&&(a>r&&(a=r),r>i&&(i=r));return e*=e,n*=n,e?Math.max(n*i*g/e,e/(n*a*g)):1/0}function i(t,n,r,e){var i,a=-1,o=t.length,u=r.x,c=r.y,l=n?s(t.area/n):0;if(n==r.dx){for((e||l>r.dy)&&(l=r.dy);++a<o;)i=t[a],i.x=u,i.y=c,i.dy=l,u+=i.dx=Math.min(r.x+r.dx-u,l?s(i.area/l):0);i.z=!0,i.dx+=r.x+r.dx-u,r.y+=l,r.dy-=l}else{for((e||l>r.dx)&&(l=r.dx);++a<o;)i=t[a],i.x=u,i.y=c,i.dx=l,c+=i.dy=Math.min(r.y+r.dy-c,l?s(i.area/l):0);i.z=!1,i.dy+=r.y+r.dy-c,r.x+=l,r.dx-=l}}function a(e){var i=o||u(e),a=i[0];return a.x=a.y=0,a.value?(a.dx=c[0],a.dy=c[1]):a.dx=a.dy=0,o&&u.revalue(a),t([a],a.dx*a.dy/a.value),(o?r:n)(a),h&&(o=i),i}var o,u=so.layout.hierarchy(),s=Math.round,c=[1,1],l=null,f=Fi,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(c=t,a):c},a.padding=function(t){function n(n){var r=t.call(a,n,n.depth);return null==r?Fi(n):Oi(n,"number"==typeof r?[r,r,r,r]:r)}function r(n){return Oi(n,t)}if(!arguments.length)return l;var e;return f=null==(l=t)?Fi:"function"==(e=typeof t)?n:"number"===e?(t=[t,t,t,t],r):r,a},a.round=function(t){return arguments.length?(s=t?Math.round:Number,a):s!=Number},a.sticky=function(t){return arguments.length?(h=t,o=null,a):h},a.ratio=function(t){return arguments.length?(g=t,a):g},a.mode=function(t){return arguments.length?(p=t+"",a):p},ai(a,u)},so.random={normal:function(t,n){var r=arguments.length;return 2>r&&(n=1),1>r&&(t=0),function(){var r,e,i;do r=2*Math.random()-1,e=2*Math.random()-1,i=r*r+e*e;while(!i||i>1);return t+n*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=so.random.normal.apply(so,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=so.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,r=0;t>r;r++)n+=Math.random();return n}}},so.scale={};var Es={floor:b,ceil:b};so.scale.linear=function(){return Gi([0,1],[0,1],_e,!1)};var ks={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ia(so.scale.linear().domain([0,1]),10,!0,[1,10])};var Ns=so.format(".0e"),Ss={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};so.scale.pow=function(){return aa(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return ua([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Ts)},so.scale.category20=function(){return so.scale.ordinal().range(Is)},so.scale.category20b=function(){return so.scale.ordinal().range(js)},so.scale.category20c=function(){return so.scale.ordinal().range(Ls)};var Ts=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Is=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),js=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Ls=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return ca(0,1,[0,1])},so.scale.threshold=function(){return la([.5],[0,1])},so.scale.identity=function(){return fa([0,1])},so.svg={},so.svg.arc=function(){function t(){var t=Math.max(0,+r.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),l=o.apply(this,arguments)-Oo,f=u.apply(this,arguments)-Oo,h=Math.abs(f-l),p=l>f?0:1;if(t>c&&(g=c,c=t,t=g),h>=Fo)return n(c,p)+(t?n(t,1-p):"")+"Z";var g,d,v,y,m,b,_,x,w,M,A,E,k=0,N=0,S=[];if((y=(+s.apply(this,arguments)||0)/2)&&(v=a===Us?Math.sqrt(t*t+c*c):+a.apply(this,arguments),p||(N*=-1),c&&(N=rt(v/c*Math.sin(y))),t&&(k=rt(v/t*Math.sin(y)))),c){m=c*Math.cos(l+N),b=c*Math.sin(l+N),_=c*Math.cos(f-N),x=c*Math.sin(f-N);var T=Math.abs(f-l-2*N)<=Vo?0:1;if(N&&ma(m,b,_,x)===p^T){var I=(l+f)/2;m=c*Math.cos(I),b=c*Math.sin(I),_=x=null}}else m=b=0;if(t){w=t*Math.cos(f-k),M=t*Math.sin(f-k),A=t*Math.cos(l+k),E=t*Math.sin(l+k);var j=Math.abs(l-f+2*k)<=Vo?0:1;if(k&&ma(w,M,A,E)===1-p^j){var L=(l+f)/2;w=t*Math.cos(L),M=t*Math.sin(L),A=E=null}}else w=M=0;if(h>qo&&(g=Math.min(Math.abs(c-t)/2,+i.apply(this,arguments)))>.001){d=c>t^p?0:1;var U=g,C=g;if(Vo>h){var R=null==A?[w,M]:null==_?[m,b]:Rr([m,b],[A,E],[_,x],[w,M]),B=m-R[0],P=b-R[1],q=_-R[0],D=x-R[1],V=1/Math.sin(Math.acos((B*q+P*D)/(Math.sqrt(B*B+P*P)*Math.sqrt(q*q+D*D)))/2),z=Math.sqrt(R[0]*R[0]+R[1]*R[1]);C=Math.min(g,(t-z)/(V-1)),U=Math.min(g,(c-z)/(V+1))}if(null!=_){var F=ba(null==A?[w,M]:[A,E],[m,b],c,U,p),O=ba([_,x],[w,M],c,U,p);g===U?S.push("M",F[0],"A",U,",",U," 0 0,",d," ",F[1],"A",c,",",c," 0 ",1-p^ma(F[1][0],F[1][1],O[1][0],O[1][1]),",",p," ",O[1],"A",U,",",U," 0 0,",d," ",O[0]):S.push("M",F[0],"A",U,",",U," 0 1,",d," ",O[0])}else S.push("M",m,",",b);if(null!=A){var Y=ba([m,b],[A,E],t,-C,p),H=ba([w,M],null==_?[m,b]:[_,x],t,-C,p);g===C?S.push("L",H[0],"A",C,",",C," 0 0,",d," ",H[1],"A",t,",",t," 0 ",p^ma(H[1][0],H[1][1],Y[1][0],Y[1][1]),",",1-p," ",Y[1],"A",C,",",C," 0 0,",d," ",Y[0]):S.push("L",H[0],"A",C,",",C," 0 0,",d," ",Y[0])}else S.push("L",w,",",M)}else S.push("M",m,",",b),null!=_&&S.push("A",c,",",c," 0 ",T,",",p," ",_,",",x),S.push("L",w,",",M),null!=A&&S.push("A",t,",",t," 0 ",j,",",1-p," ",A,",",E);return S.push("Z"),S.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var r=pa,e=ga,i=ha,a=Us,o=da,u=va,s=ya;return t.innerRadius=function(n){return arguments.length?(r=Nt(n),t):r},t.outerRadius=function(n){return arguments.length?(e=Nt(n),t):e},t.cornerRadius=function(n){return arguments.length?(i=Nt(n),t):i},t.padRadius=function(n){return arguments.length?(a=n==Us?Us:Nt(n),t):a},t.startAngle=function(n){return arguments.length?(o=Nt(n),t):o},t.endAngle=function(n){return arguments.length?(u=Nt(n),t):u},t.padAngle=function(n){return arguments.length?(s=Nt(n),t):s},t.centroid=function(){var t=(+r.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Oo;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Us="auto";so.svg.line=function(){return _a(b)};var Cs=so.map({linear:xa,"linear-closed":wa,step:Ma,"step-before":Aa,"step-after":Ea,basis:ja,"basis-open":La,"basis-closed":Ua,bundle:Ca,cardinal:Sa,"cardinal-open":ka,"cardinal-closed":Na,monotone:Va});Cs.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Rs=[0,2/3,1/3,0],Bs=[0,1/3,2/3,0],Ps=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var t=_a(za);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Aa.reverse=Ea,Ea.reverse=Aa,so.svg.area=function(){return Fa(b)},so.svg.area.radial=function(){var t=Fa(za);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},so.svg.chord=function(){function t(t,u){var s=n(this,a,t,u),c=n(this,o,t,u);return"M"+s.p0+e(s.r,s.p1,s.a1-s.a0)+(r(s,c)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,c.r,c.p0)+e(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,s.r,s.p0))+"Z"}function n(t,n,r,e){var i=n.call(t,r,e),a=u.call(t,i,e),o=s.call(t,i,e)-Oo,l=c.call(t,i,e)-Oo;return{r:a,a0:o,a1:l,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function r(t,n){return t.a0==n.a0&&t.a1==n.a1}function e(t,n,r){return"A"+t+","+t+" 0 "+ +(r>Vo)+",1 "+n}function i(t,n,r,e){return"Q 0,0 "+e}var a=_r,o=xr,u=Oa,s=da,c=va;return t.radius=function(n){return arguments.length?(u=Nt(n),t):u},t.source=function(n){return arguments.length?(a=Nt(n),t):a},t.target=function(n){return arguments.length?(o=Nt(n),t):o},t.startAngle=function(n){return arguments.length?(s=Nt(n),t):s},t.endAngle=function(n){return arguments.length?(c=Nt(n),t):c},t},so.svg.diagonal=function(){function t(t,i){var a=n.call(this,t,i),o=r.call(this,t,i),u=(a.y+o.y)/2,s=[a,{x:a.x,y:u},{x:o.x,y:u},o];return s=s.map(e),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var n=_r,r=xr,e=Ya;return t.source=function(r){return arguments.length?(n=Nt(r),t):n},t.target=function(n){return arguments.length?(r=Nt(n),t):r},t.projection=function(n){return arguments.length?(e=n,t):e},t},so.svg.diagonal.radial=function(){var t=so.svg.diagonal(),n=Ya,r=t.projection;return t.projection=function(t){return arguments.length?r(Ha(n=t)):n},t},so.svg.symbol=function(){function t(t,e){return(qs.get(n.call(this,t,e))||$a)(r.call(this,t,e))}var n=Za,r=Xa;return t.type=function(r){
return arguments.length?(n=Nt(r),t):n},t.size=function(n){return arguments.length?(r=Nt(n),t):r},t};var qs=so.map({circle:$a,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Vs)),r=n*Vs;return"M0,"+-n+"L"+r+",0 0,"+n+" "+-r+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Ds),r=n*Ds/2;return"M0,"+r+"L"+n+","+-r+" "+-n+","+-r+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Ds),r=n*Ds/2;return"M0,"+-r+"L"+n+","+r+" "+-n+","+r+"Z"}});so.svg.symbolTypes=qs.keys();var Ds=Math.sqrt(3),Vs=Math.tan(30*Yo);Io.transition=function(t){for(var n,r,e=zs||++Hs,i=Qa(t),a=[],o=Fs||{time:Date.now(),ease:Ne,delay:0,duration:250},u=-1,s=this.length;++u<s;){a.push(n=[]);for(var c=this[u],l=-1,f=c.length;++l<f;)(r=c[l])&&to(r,l,i,e,o),n.push(r)}return Ga(a,i,e)},Io.interrupt=function(t){return this.each(null==t?Os:Wa(Qa(t)))};var zs,Fs,Os=Wa(Qa()),Ys=[],Hs=0;Ys.call=Io.call,Ys.empty=Io.empty,Ys.node=Io.node,Ys.size=Io.size,so.transition=function(t,n){return t&&t.transition?zs?t.transition(n):t:so.selection().transition(t)},so.transition.prototype=Ys,Ys.select=function(t){var n,r,e,i=this.id,a=this.namespace,o=[];t=T(t);for(var u=-1,s=this.length;++u<s;){o.push(n=[]);for(var c=this[u],l=-1,f=c.length;++l<f;)(e=c[l])&&(r=t.call(e,e.__data__,l,u))?("__data__"in e&&(r.__data__=e.__data__),to(r,l,a,i,e[a][i]),n.push(r)):n.push(null)}return Ga(o,a,i)},Ys.selectAll=function(t){var n,r,e,i,a,o=this.id,u=this.namespace,s=[];t=I(t);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],h=-1,p=f.length;++h<p;)if(e=f[h]){a=e[u][o],r=t.call(e,e.__data__,h,c),s.push(n=[]);for(var g=-1,d=r.length;++g<d;)(i=r[g])&&to(i,g,u,o,a),n.push(i)}return Ga(s,u,o)},Ys.filter=function(t){var n,r,e,i=[];"function"!=typeof t&&(t=F(t));for(var a=0,o=this.length;o>a;a++){i.push(n=[]);for(var r=this[a],u=0,s=r.length;s>u;u++)(e=r[u])&&t.call(e,e.__data__,u,a)&&n.push(e)}return Ga(i,this.namespace,this.id)},Ys.tween=function(t,n){var r=this.id,e=this.namespace;return arguments.length<2?this.node()[e][r].tween.get(t):Y(this,null==n?function(n){n[e][r].tween.remove(t)}:function(i){i[e][r].tween.set(t,n)})},Ys.attr=function(t,n){function r(){this.removeAttribute(u)}function e(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?r:(t+="",function(){var n,r=this.getAttribute(u);return r!==t&&(n=o(r,t),function(t){this.setAttribute(u,n(t))})})}function a(t){return null==t?e:(t+="",function(){var n,r=this.getAttributeNS(u.space,u.local);return r!==t&&(n=o(r,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var o="transform"==t?$e:_e,u=so.ns.qualify(t);return Ja(this,"attr."+t,n,u.local?a:i)},Ys.attrTween=function(t,n){function r(t,r){var e=n.call(this,t,r,this.getAttribute(i));return e&&function(t){this.setAttribute(i,e(t))}}function e(t,r){var e=n.call(this,t,r,this.getAttributeNS(i.space,i.local));return e&&function(t){this.setAttributeNS(i.space,i.local,e(t))}}var i=so.ns.qualify(t);return this.tween("attr."+t,i.local?e:r)},Ys.style=function(t,n,e){function i(){this.style.removeProperty(t)}function a(n){return null==n?i:(n+="",function(){var i,a=r(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(i=_e(a,n),function(n){this.style.setProperty(t,i(n),e)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(n="");for(e in t)this.style(e,t[e],n);return this}e=""}return Ja(this,"style."+t,n,a)},Ys.styleTween=function(t,n,e){function i(i,a){var o=n.call(this,i,a,r(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(n){this.style.setProperty(t,o(n),e)}}return arguments.length<3&&(e=""),this.tween("style."+t,i)},Ys.text=function(t){return Ja(this,"text",t,Ka)},Ys.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Ys.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=so.ease.apply(so,arguments)),Y(this,function(e){e[r][n].ease=t}))},Ys.delay=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].delay:Y(this,"function"==typeof t?function(e,i,a){e[r][n].delay=+t.call(e,e.__data__,i,a)}:(t=+t,function(e){e[r][n].delay=t}))},Ys.duration=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].duration:Y(this,"function"==typeof t?function(e,i,a){e[r][n].duration=Math.max(1,t.call(e,e.__data__,i,a))}:(t=Math.max(1,t),function(e){e[r][n].duration=t}))},Ys.each=function(t,n){var r=this.id,e=this.namespace;if(arguments.length<2){var i=Fs,a=zs;try{zs=r,Y(this,function(n,i,a){Fs=n[e][r],t.call(n,n.__data__,i,a)})}finally{Fs=i,zs=a}}else Y(this,function(i){var a=i[e][r];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(t,n)});return this},Ys.transition=function(){for(var t,n,r,e,i=this.id,a=++Hs,o=this.namespace,u=[],s=0,c=this.length;c>s;s++){u.push(t=[]);for(var n=this[s],l=0,f=n.length;f>l;l++)(r=n[l])&&(e=r[o][i],to(r,l,o,a,{time:e.time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration})),t.push(r)}return Ga(u,o,a)},so.svg.axis=function(){function t(t){t.each(function(){var t,c=so.select(this),l=this.__chart__||r,f=this.__chart__=r.copy(),h=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):b:n,g=c.selectAll(".tick").data(h,f),d=g.enter().insert("g",".domain").attr("class","tick").style("opacity",qo),v=so.transition(g.exit()).style("opacity",qo).remove(),y=so.transition(g.order()).style("opacity",1),m=Math.max(i,0)+o,_=Hi(f),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),so.transition(x));d.append("line"),d.append("text");var M,A,E,k,N=d.select("line"),S=y.select("line"),T=g.select("text").text(p),I=d.select("text"),j=y.select("text"),L="top"===e||"left"===e?-1:1;if("bottom"===e||"top"===e?(t=no,M="x",E="y",A="x2",k="y2",T.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+L*a+"V0H"+_[1]+"V"+L*a)):(t=ro,M="y",E="x",A="y2",k="x2",T.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),w.attr("d","M"+L*a+","+_[0]+"H0V"+_[1]+"H"+L*a)),N.attr(k,L*i),I.attr(E,L*m),S.attr(A,0).attr(k,L*i),j.attr(M,0).attr(E,L*m),f.rangeBand){var U=f,C=U.rangeBand()/2;l=f=function(t){return U(t)+C}}else l.rangeBand?l=f:v.call(t,f,l);d.call(t,l,f),y.call(t,f,f)})}var n,r=so.scale.linear(),e=Xs,i=6,a=6,o=3,u=[10],s=null;return t.scale=function(n){return arguments.length?(r=n,t):r},t.orient=function(n){return arguments.length?(e=n in Zs?n+"":Xs,t):e},t.ticks=function(){return arguments.length?(u=lo(arguments),t):u},t.tickValues=function(n){return arguments.length?(s=n,t):s},t.tickFormat=function(r){return arguments.length?(n=r,t):n},t.tickSize=function(n){var r=arguments.length;return r?(i=+n,a=+arguments[r-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(a=+n,t):a},t.tickPadding=function(n){return arguments.length?(o=+n,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Xs="bottom",Zs={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function t(r){r.each(function(){var r=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=r.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),r.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=r.selectAll(".resize").data(d,b);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return $s[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,f=so.transition(r),h=so.transition(o);c&&(s=Hi(c),h.attr("x",s[0]).attr("width",s[1]-s[0]),e(f)),l&&(s=Hi(l),h.attr("y",s[0]).attr("height",s[1]-s[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function e(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function a(){function a(){32==so.event.keyCode&&(T||(b=null,j[0]-=f[1],j[1]-=h[1],T=2),E())}function d(){32==so.event.keyCode&&2==T&&(j[0]+=f[1],j[1]+=h[1],T=0,E())}function v(){var t=so.mouse(x),r=!1;_&&(t[0]+=_[0],t[1]+=_[1]),T||(so.event.altKey?(b||(b=[(f[0]+f[1])/2,(h[0]+h[1])/2]),j[0]=f[+(t[0]<b[0])],j[1]=h[+(t[1]<b[1])]):b=null),N&&y(t,c,0)&&(e(A),r=!0),S&&y(t,l,1)&&(i(A),r=!0),r&&(n(A),M({type:"brush",mode:T?"move":"resize"}))}function y(t,n,r){var e,i,a=Hi(n),s=a[0],c=a[1],l=j[r],d=r?h:f,v=d[1]-d[0];return T&&(s-=l,c-=v+l),e=(r?g:p)?Math.max(s,Math.min(c,t[r])):t[r],T?i=(e+=l)+v:(b&&(l=Math.max(s,Math.min(c,2*b[r]-e))),e>l?(i=e,e=l):i=l),d[0]!=e||d[1]!=i?(r?u=null:o=null,d[0]=e,d[1]=i,!0):void 0}function m(){v(),A.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),so.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),I(),M({type:"brushend"})}var b,_,x=this,w=so.select(so.event.target),M=s.of(x,arguments),A=so.select(x),k=w.datum(),N=!/^(n|s)$/.test(k)&&c,S=!/^(e|w)$/.test(k)&&l,T=w.classed("extent"),I=G(x),j=so.mouse(x),L=so.select(r(x)).on("keydown.brush",a).on("keyup.brush",d);if(so.event.changedTouches?L.on("touchmove.brush",v).on("touchend.brush",m):L.on("mousemove.brush",v).on("mouseup.brush",m),A.interrupt().selectAll("*").interrupt(),T)j[0]=f[0]-j[0],j[1]=h[0]-j[1];else if(k){var U=+/w$/.test(k),C=+/^n/.test(k);_=[f[1-U]-j[0],h[1-C]-j[1]],j[0]=f[U],j[1]=h[C]}else so.event.altKey&&(b=j.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var o,u,s=N(t,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],h=[0,0],p=!0,g=!0,d=Ws[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),n={x:f,y:h,i:o,j:u},r=this.__chart__||n;this.__chart__=n,zs?so.select(this).transition().each("start.brush",function(){o=r.i,u=r.j,f=r.x,h=r.y,t({type:"brushstart"})}).tween("brush:brush",function(){var r=xe(f,n.x),e=xe(h,n.y);return o=u=null,function(i){f=n.x=r(i),h=n.y=e(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(c=n,d=Ws[!c<<1|!l],t):c},t.y=function(n){return arguments.length?(l=n,d=Ws[!c<<1|!l],t):l},t.clamp=function(n){return arguments.length?(c&&l?(p=!!n[0],g=!!n[1]):c?p=!!n:l&&(g=!!n),t):c&&l?[p,g]:c?p:l?g:null},t.extent=function(n){var r,e,i,a,s;return arguments.length?(c&&(r=n[0],e=n[1],l&&(r=r[0],e=e[0]),o=[r,e],c.invert&&(r=c(r),e=c(e)),r>e&&(s=r,r=e,e=s),(r!=f[0]||e!=f[1])&&(f=[r,e])),l&&(i=n[0],a=n[1],c&&(i=i[1],a=a[1]),u=[i,a],l.invert&&(i=l(i),a=l(a)),i>a&&(s=i,i=a,a=s),(i!=h[0]||a!=h[1])&&(h=[i,a])),t):(c&&(o?(r=o[0],e=o[1]):(r=f[0],e=f[1],c.invert&&(r=c.invert(r),e=c.invert(e)),r>e&&(s=r,r=e,e=s))),l&&(u?(i=u[0],a=u[1]):(i=h[0],a=h[1],l.invert&&(i=l.invert(i),a=l.invert(a)),i>a&&(s=i,i=a,a=s))),c&&l?[[r,i],[e,a]]:c?[r,e]:l&&[i,a])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],o=u=null),t},t.empty=function(){return!!c&&f[0]==f[1]||!!l&&h[0]==h[1]},so.rebind(t,s,"on")};var $s={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ws=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Gs=du.format=xu.timeFormat,Js=Gs.utc,Ks=Js("%Y-%m-%dT%H:%M:%S.%LZ");Gs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:Ks,eo.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},eo.toString=Ks.toString,du.second=zt(function(t){return new vu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),du.seconds=du.second.range,du.seconds.utc=du.second.utc.range,du.minute=zt(function(t){return new vu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),du.minutes=du.minute.range,du.minutes.utc=du.minute.utc.range,du.hour=zt(function(t){var n=t.getTimezoneOffset()/60;return new vu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),du.hours=du.hour.range,du.hours.utc=du.hour.utc.range,du.month=zt(function(t){return t=du.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),du.months=du.month.range,du.months.utc=du.month.utc.range;var Qs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],tc=[[du.second,1],[du.second,5],[du.second,15],[du.second,30],[du.minute,1],[du.minute,5],[du.minute,15],[du.minute,30],[du.hour,1],[du.hour,3],[du.hour,6],[du.hour,12],[du.day,1],[du.day,2],[du.week,1],[du.month,1],[du.month,3],[du.year,1]],nc=Gs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",jn]]),rc={range:function(t,n,r){return so.range(Math.ceil(t/r)*r,+n,r).map(ao)},floor:b,ceil:b};tc.year=du.year,du.scale=function(){return io(so.scale.linear(),tc,nc)};var ec=tc.map(function(t){return[t[0].utc,t[1]]}),ic=Js.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",jn]]);ec.year=du.year.utc,du.scale.utc=function(){return io(so.scale.linear(),ec,ic)},so.text=St(function(t){return t.responseText}),so.json=function(t,n){return Tt(t,"application/json",oo,n)},so.html=function(t,n){return Tt(t,"text/html",uo,n)},so.xml=St(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof n&&n.exports?n.exports=so:this.d3=so}()},{}],9:[function(t,n,r){"use strict";var e=t("./src/golden-section-minimize"),i=t("./src/bracket-minimum");n.exports=function(t,n){n=n||{};var r,a,o=void 0===n.tolerance?1e-8:n.tolerance,u=void 0===n.initialIncrement?1:n.initialIncrement,s=void 0===n.lowerBound?-(1/0):n.lowerBound,c=void 0===n.upperBound?1/0:n.upperBound,l=void 0===n.maxIter?100:n.maxIter;if(isFinite(c)&&isFinite(s))a=[s,c];else if(r=void 0===n.guess?s>-(1/0)?1/0>c?.5*(s+c):s:1/0>c?c:0:n.guess,a=i(t,r,u,s,c,l),isNaN(a[0])||isNaN(a[1]))return NaN;return e(t,a[0],a[1],o,l)}},{"./src/bracket-minimum":10,"./src/golden-section-minimize":11}],10:[function(t,n,r){"use strict";function e(t,n,r,e,i,a){var o,u,s,c,l,f,h;for(c=0,l=n,f=n,s=u=o=t(n);!h&&++c<a;)h=!0,r*=2,s>=u&&(s=u,l=Math.max(e,l-r),u=t(l),h=!1),s>=o&&(s=o,f=Math.min(i,f+r),o=t(f),h=!1),s=Math.min(s,u,o),(u===s&&l===e||o===s&&f===i)&&(h=!0);return c===a?[NaN,NaN]:[l,f]}n.exports=e},{}],11:[function(t,n,r){"use strict";function e(t,n,r,e,a){for(var o=0,u=r-i*(r-n),s=n+i*(r-n),c=t(u),l=t(s);++o<a&&Math.abs(r-n)>e;)l>c?(r=s,s=u,l=c,u=r-i*(r-n),c=t(u)):(n=u,u=s,c=l,s=n+i*(r-n),l=t(s));return o===a||isNaN(l)||isNaN(c)?NaN:.5*(r+n)}var i=2/(1+Math.sqrt(5));n.exports=e},{}],12:[function(t,n,r){"use strict";function e(t,n,r){var e,a,o,u,s,c,l,c,f,h,p,g,d,v,y;r=r||{};var m=void 0===r.maxIter?20:r.maxIter,b=void 0===r.tolerance?1e-8:r.tolerance,_=void 0===r.tolerance1d?b:r.tolerance1d,x=n.length,s=n.slice(0);for(p=[],h=[],e=0;x>e;e++)for(p[e]=[],a=0;x>a;a++)p[e][a]=e===a?1:0;for(r.computeConstraints||(r.computeConstraints=function(t,n){for(var e=1/0,i=-(1/0),a=0;x>a;a++)0!==n[a]&&(r.lowerBound&&(i=Math.max(i,(r.lowerBound-t[a])/n[a])),r.upperBound&&(e=Math.min(e,(r.upperBound-t[a])/n[a])));return{lowerBound:i,upperBound:e}}),c=[],f=function(n){for(var r=0;x>r;r++)c[r]=s[r]+u[r]*n;return t(c)},o=0;++o<m;){if(v=t(s),o%(x+1)===0)for(e=0;x>e;e++)for(p[e]=[],a=0;x>a;a++)p[e][a]=e===a?1:0;for(a=0,g=[];x>a;a++)g[a]=s[a];for(e=0;x>e;e++){u=p[e];var w=r.computeConstraints(s,u);for(l=i(f,{lowerBound:w.lowerBound,upperBound:w.upperBound,tolerance:_}),a=0;x>a;a++)s[a]+=l*u[a]}for(p.shift(),a=0,h=[],d=0;x>a;a++)h[a]=s[a]-g[a],d+=h[a]*h[a];for(d=Math.sqrt(d),a=0;x>a;a++)h[a]/=d;p.push(h),u=h;var w=r.computeConstraints(s,u);for(l=i(f,{lowerBound:w.lowerBound,upperBound:w.upperBound,tolerance:_}),a=0;x>a;a++)s[a]+=l*u[a];y=t(s);var M=Math.abs((v-y)/v);if(console.log("Iteration:",o,", Error:",M),b>M)break}return s}var i=t("minimize-golden-section-1d");n.exports=e},{"minimize-golden-section-1d":13}],13:[function(t,n,r){arguments[4][9][0].apply(r,arguments)},{"./src/bracket-minimum":14,"./src/golden-section-minimize":15,dup:9}],14:[function(t,n,r){arguments[4][10][0].apply(r,arguments)},{dup:10}],15:[function(t,n,r){arguments[4][11][0].apply(r,arguments)},{dup:11}],16:[function(t,n,r){"use strict";var e=t("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});n.exports=function(t,n){return e(t,n),t}},{"cwise/lib/wrapper":17}],17:[function(t,n,r){n.exports=t("cwise-compiler")},{"cwise-compiler":18}],18:[function(t,n,r){"use strict";function e(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(t){var n=new e;n.pre=t.pre,n.body=t.body,n.post=t.post;var r=t.args.slice(0);n.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(n.argTypes[i]="array",n.arrayArgs.push(i),n.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),n.shimArgs.push("array"+i),i<n.pre.args.length&&n.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<n.post.args.length&&n.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)n.scalarArgs.push(i),n.shimArgs.push("scalar"+i);else if("index"===o){if(n.indexArgs.push(i),i<n.pre.args.length&&n.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<n.body.args.length&&n.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<n.post.args.length&&n.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(n.shapeArgs.push(i),i<n.pre.args.length&&n.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<n.body.args.length&&n.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<n.post.args.length&&n.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);n.argTypes[i]="offset",n.offsetArgs.push({array:o.array,offset:o.offset}),n.offsetArgIndex.push(i)}}if(n.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(n.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(n.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(n.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return n.debug=!!t.printCode||!!t.debug,n.funcName=t.funcName||"cwise",n.blockSize=t.blockSize||64,a(n)}var a=t("./lib/thunk.js");n.exports=i},{"./lib/thunk.js":20}],19:[function(t,n,r){"use strict";function e(t,n,r){var e,i,a=t.length,o=n.arrayArgs.length,u=n.indexArgs.length>0,s=[],c=[],l=0,f=0;for(e=0;a>e;++e)c.push(["i",e,"=0"].join(""));for(i=0;o>i;++i)for(e=0;a>e;++e)f=l,l=t[e],0===e?c.push(["d",i,"s",e,"=t",i,"p",l].join("")):c.push(["d",i,"s",e,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(s.push("var "+c.join(",")),e=a-1;e>=0;--e)l=t[e],s.push(["for(i",e,"=0;i",e,"<s",l,";++i",e,"){"].join(""));for(s.push(r),e=0;a>e;++e){for(f=l,l=t[e],i=0;o>i;++i)s.push(["p",i,"+=d",i,"s",e].join(""));u&&(e>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",l,"]"].join(""))),s.push("}")}return s.join("\n")}function i(t,n,r,i){for(var a=n.length,o=r.arrayArgs.length,u=r.blockSize,s=r.indexArgs.length>0,c=[],l=0;o>l;++l)c.push(["var offset",l,"=p",l].join(""));for(var l=t;a>l;++l)c.push(["for(var j"+l+"=SS[",n[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",u,"){"].join("")),c.push(["s",n[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",n[l],"=",u].join("")),c.push(["j",l,"-=",u,"}"].join("")),s&&c.push(["index[",n[l],"]=j",l].join(""));for(var l=0;o>l;++l){for(var f=["offset"+l],h=t;a>h;++h)f.push(["j",h,"*t",l,"p",n[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(e(n,r,i));for(var l=t;a>l;++l)c.push("}");return c.join("\n")}function a(t){for(var n=0,r=t[0].length;r>n;){for(var e=1;e<t.length;++e)if(t[e][n]!==t[0][n])return n;++n}return n}function o(t,n,r){for(var e=t.body,i=[],a=[],o=0;o<t.args.length;++o){var u=t.args[o];if(!(u.count<=0)){var s=new RegExp(u.name,"g"),c="",l=n.arrayArgs.indexOf(o);switch(n.argTypes[o]){case"offset":var f=n.offsetArgIndex.indexOf(o),h=n.offsetArgs[f];l=h.array,c="+q"+f;case"array":c="p"+l+c;var p="l"+o,g="a"+l;if(0===n.arrayBlockIndices[l])1===u.count?"generic"===r[l]?u.lvalue?(i.push(["var ",p,"=",g,".get(",c,")"].join("")),e=e.replace(s,p),a.push([g,".set(",c,",",p,")"].join(""))):e=e.replace(s,[g,".get(",c,")"].join("")):e=e.replace(s,[g,"[",c,"]"].join("")):"generic"===r[l]?(i.push(["var ",p,"=",g,".get(",c,")"].join("")),e=e.replace(s,p),u.lvalue&&a.push([g,".set(",c,",",p,")"].join(""))):(i.push(["var ",p,"=",g,"[",c,"]"].join("")),e=e.replace(s,p),u.lvalue&&a.push([g,"[",c,"]=",p].join("")));else{for(var d=[u.name],v=[c],y=0;y<Math.abs(n.arrayBlockIndices[l]);y++)d.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(y+1)+"*t"+l+"b"+y);if(s=new RegExp(d.join(""),"g"),c=v.join("+"),"generic"===r[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(s,[g,"[",c,"]"].join(""))}break;case"scalar":e=e.replace(s,"Y"+n.scalarArgs.indexOf(o));break;case"index":e=e.replace(s,"index");break;case"shape":e=e.replace(s,"shape")}}}return[i.join("\n"),e,a.join("\n")].join("\n").trim()}function u(t){for(var n=new Array(t.length),r=!0,e=0;e<t.length;++e){var i=t[e],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?n[e]="u"+i.charAt(1)+a:n[e]=i.charAt(0)+a,e>0&&(r=r&&n[e]===n[e-1])}return r?n[0]:n.join("")}function s(t,n){for(var r=n[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),l=new Array(t.arrayArgs.length),f=0;f<t.arrayArgs.length;++f)l[f]=n[2*f],s[f]=n[2*f+1];for(var h=[],p=[],g=[],d=[],v=[],f=0;f<t.arrayArgs.length;++f){t.arrayBlockIndices[f]<0?(g.push(0),d.push(r),h.push(r),p.push(r+t.arrayBlockIndices[f])):(g.push(t.arrayBlockIndices[f]),d.push(t.arrayBlockIndices[f]+r),h.push(0),p.push(t.arrayBlockIndices[f]));for(var y=[],m=0;m<s[f].length;m++)g[f]<=s[f][m]&&s[f][m]<d[f]&&y.push(s[f][m]-g[f]);v.push(y)}for(var b=["SS"],_=["'use strict'"],x=[],m=0;r>m;++m)x.push(["s",m,"=SS[",m,"]"].join(""));for(var f=0;f<t.arrayArgs.length;++f){b.push("a"+f),b.push("t"+f),b.push("p"+f);for(var m=0;r>m;++m)x.push(["t",f,"p",m,"=t",f,"[",g[f]+m,"]"].join(""));for(var m=0;m<Math.abs(t.arrayBlockIndices[f]);++m)x.push(["t",f,"b",m,"=t",f,"[",h[f]+m,"]"].join(""))}for(var f=0;f<t.scalarArgs.length;++f)b.push("Y"+f);if(t.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var w=new Array(r),f=0;r>f;++f)w[f]="0";x.push(["index=[",w.join(","),"]"].join(""))}for(var f=0;f<t.offsetArgs.length;++f){for(var M=t.offsetArgs[f],A=[],m=0;m<M.offset.length;++m)0!==M.offset[m]&&(1===M.offset[m]?A.push(["t",M.array,"p",m].join("")):A.push([M.offset[m],"*t",M.array,"p",m].join("")));0===A.length?x.push("q"+f+"=0"):x.push(["q",f,"=",A.join("+")].join(""))}var E=c([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));x=x.concat(E),_.push("var "+x.join(","));for(var f=0;f<t.arrayArgs.length;++f)_.push("p"+f+"|=0");t.pre.body.length>3&&_.push(o(t.pre,t,l));var k=o(t.body,t,l),N=a(v);r>N?_.push(i(N,v[0],t,k)):_.push(e(v[0],t,k)),t.post.body.length>3&&_.push(o(t.post,t,l)),t.debug&&console.log("-----Generated cwise routine for ",n,":\n"+_.join("\n")+"\n----------");var S=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",N,u(l)].join(""),T=new Function(["function ",S,"(",b.join(","),"){",_.join("\n"),"} return ",S].join(""));return T()}var c=t("uniq");n.exports=s},{uniq:21}],20:[function(t,n,r){"use strict";function e(t){var n=["'use strict'","var CACHED={}"],r=[],e=t.funcName+"_cwise_thunk";n.push(["return function ",e,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],u=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],c=[],l=0;l<t.arrayArgs.length;++l){var f=t.arrayArgs[l];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),u.push("array"+f+".data"),u.push("array"+f+".stride"),u.push("array"+f+".offset|0"),l>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[l]))),c.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[l])+"]"))}t.arrayArgs.length>1&&(n.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),n.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),n.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),n.push("}"));for(var l=0;l<t.scalarArgs.length;++l)u.push("scalar"+t.scalarArgs[l]);r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),n.push("var "+r.join(",")),n.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",u.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+n.join("\n")+"\n----------");var h=new Function("compile",n.join("\n"));return h(i.bind(void 0,t))}var i=t("./compile.js");n.exports=e},{"./compile.js":19}],21:[function(t,n,r){"use strict";function e(t,n){for(var r=1,e=t.length,i=t[0],a=t[0],o=1;e>o;++o)if(a=i,i=t[o],n(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function i(t){for(var n=1,r=t.length,e=t[0],i=t[0],a=1;r>a;++a,i=e)if(i=e,e=t[a],e!==i){if(a===n){n++;continue}t[n++]=e}return t.length=n,t}function a(t,n,r){return 0===t.length?t:n?(r||t.sort(n),e(t,n)):(r||t.sort(),i(t))}n.exports=a},{}],22:[function(t,n,r){"use strict";function e(t,n,r){var e,u,s,c,l,f,h,p=t.shape[1],p=t.shape[0],g=t.shape[1];if(p!==g)throw new Error("LUP Decomposition::factorize():: Input matrix A must be square");var d=t!==n;for(d&&a.assigns(o(n),1),e=0;p>e;e++)r[e]=e;for(s=0;p>s;s++){if(e=i.iamax(t.pick(null,s).lo(s).hi(p-s))+s,l=t.pick(s,null),i.swap(l.lo(s).hi(p-s),t.pick(e,null).lo(s).hi(p-s)),s>0&&i.swap(n.pick(s,null).hi(s),n.pick(e,null).hi(s)),h=r[e],r[e]=r[s],r[s]=h,f=t.get(s,s),0===f)return!1;for(u=s+1;p>u;u++)c=t.get(u,s)/f,i.axpy(-c,l.lo(s+1).hi(p-s-1),t.pick(u,null).lo(s+1).hi(p-s-1)),n.set(u,s,c);d&&a.assigns(t.pick(null,s).lo(s+1).hi(p-s-1),0)}return!0}var i=t("ndarray-blas-level1"),a=t("ndarray-ops"),o=t("ndarray-diagonal");n.exports=e},{"ndarray-blas-level1":29,"ndarray-diagonal":34,"ndarray-ops":35}],23:[function(t,n,r){"use strict";n.exports=function(t){var n,r=t.data,e=t.stride[0],i=t.offset,a=0;for(n=t.shape[0]-1;n>=0;n--,i+=e)a+=Math.abs(r[i]);return a}},{}],24:[function(t,n,r){"use strict";n.exports=function(t,n,r){var e,i=n.data,a=r.data,o=n.stride[0],u=r.stride[0],s=n.offset,c=r.offset;for(e=n.shape[0]-1;e>=0;e--,s+=o,c+=u)a[c]+=t*i[s]}},{}],25:[function(t,n,r){"use strict";n.exports=function(t,n){var r,e=t.data,i=n.data,a=t.stride[0],o=n.stride[0],u=t.offset,s=n.offset;for(r=t.shape[0]-1;r>=0;r--,u+=a,s+=o)i[s]=e[u]}},{}],26:[function(t,n,r){"use strict";n.exports=function(t,n,r){var e,i=n.data,a=r.data,o=n.stride[0],u=r.stride[0],s=n.offset,c=r.offset;for(e=n.shape[0]-1;e>=0;e--,s+=o,c+=u)a[c]=t*i[s]}},{}],27:[function(t,n,r){"use strict";n.exports=function(t,n){var r,e,i=t.data,a=t.stride[0],o=t.offset,u=0;if(t===n)for(r=t.shape[0]-1;r>=0;r--,o+=a)e=i[o],u+=e*e;else{var s=n.data,c=n.stride[0],l=n.offset;for(r=t.shape[0]-1;r>=0;r--,o+=a,l+=c)u+=s[l]*i[o]}return u}},{}],28:[function(t,n,r){"use strict";n.exports=function(t){var n,r,e,i=-(1/0),a=t.data,o=t.stride[0],u=t.offset,s=t.shape[0];for(n=0;s>n;n++,u+=o)r=Math.abs(a[u]),r>i&&(i=r,e=n);return e}},{}],29:[function(t,n,r){"use strict";n.exports.swap=t("./swap"),n.exports.scal=t("./scal"),n.exports.copy=t("./copy"),n.exports.axpy=t("./axpy"),n.exports.dot=t("./dot"),n.exports.cpsc=t("./cpsc"),n.exports.nrm2=t("./nrm2"),n.exports.asum=t("./asum"),n.exports.iamax=t("./iamax"),n.exports.rotg=t("./rotg")},{"./asum":23,"./axpy":24,"./copy":25,"./cpsc":26,"./dot":27,"./iamax":28,"./nrm2":30,"./rotg":31,"./scal":32,"./swap":33}],30:[function(t,n,r){"use strict";n.exports=function(t){var n,r,e=t.data,i=t.stride[0],a=t.offset,o=0;for(n=t.shape[0]-1;n>=0;n--,a+=i)r=e[a],o+=r*r;return Math.sqrt(o)}},{}],31:[function(t,n,r){"use strict";Math.sign=Math.sign||function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1},n.exports=function(t,n,r){var e=0,i=0,a=0,o=0,u=0;return 0===n?(e=Math.sign(t),i=0,a=Math.abs(t)):0===t?(e=0,i=Math.sign(n),a=Math.abs(n)):Math.abs(t)>Math.abs(n)?(o=n/t,u=Math.sign(t)*Math.sqrt(1+o*o),e=1/u,i=o*e,a=t*u):(o=t/n,u=Math.sign(t)*Math.sqrt(1+o*o),i=1/u,e=o*i,a=n*u),void 0!==r&&r.length>2?(r[0]=e,r[1]=i,r[2]=a,void 0):[e,i,a]}},{}],32:[function(t,n,r){"use strict";n.exports=function(t,n){var r,e=n.data,i=n.stride[0],a=n.offset;for(r=n.shape[0]-1;r>=0;r--,a+=i)e[a]*=t}},{}],33:[function(t,n,r){"use strict";n.exports=function(t,n){var r,e,i=t.data,a=n.data,o=t.stride[0],u=n.stride[0],s=t.offset,c=n.offset;for(r=t.shape[0]-1;r>=0;r--,s+=o,c+=u)e=i[s],i[s]=a[c],a[c]=e}},{}],34:[function(t,n,r){"use strict";function e(t){var n=t.dimension;if(1>=n)return t;for(var r=1<<30,e=0,a=t.shape,o=t.stride,u=0;n>u;++u)r=0|Math.min(r,a[u]),e+=o[u];return i(t.data,[r],[e],t.offset)}var i=t("ndarray");n.exports=e},{ndarray:61}],35:[function(t,n,r){"use strict";function e(t){if(!t)return u;for(var n=0;n<t.args.length;++n){var r=t.args[n];0===n?t.args[n]={
name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:t.args[n]={name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function i(t){return o({args:t.args,pre:e(t.pre),body:e(t.body),post:e(t.proc),funcName:t.funcName})}function a(t){for(var n=[],r=0;r<t.args.length;++r)n.push("a"+r);var e=new Function("P",["return function ",t.funcName,"_ndarrayops(",n.join(","),") {P(",n.join(","),");return a0}"].join(""));return e(i(t))}var o=t("cwise-compiler"),u={body:"",args:[],thisVars:[],localVars:[]},s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var n=s[t];r[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),r[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:t+"eq"}),r[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),r[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:t+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in c){var n=c[t];r[t]=a({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:t}),r[t+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var n=l[t];r[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),r[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),r[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<f.length;++t){var n=f[t];r[n]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),r[n+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var t=0;t<h.length;++t){var n=h[t];r[n]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),r[n+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),r[n+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),r[n+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var p=["atan2","pow"];!function(){for(var t=0;t<p.length;++t){var n=p[t];r[n+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),r[n+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),r[n+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),r[n+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),r.any=o({args:["array"],pre:u,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=o({args:["array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=o({args:["array","array"],pre:u,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":36}],36:[function(t,n,r){arguments[4][18][0].apply(r,arguments)},{"./lib/thunk.js":38,dup:18}],37:[function(t,n,r){arguments[4][19][0].apply(r,arguments)},{dup:19,uniq:39}],38:[function(t,n,r){arguments[4][20][0].apply(r,arguments)},{"./compile.js":37,dup:20}],39:[function(t,n,r){arguments[4][21][0].apply(r,arguments)},{dup:21}],40:[function(t,n,r){"use strict";function e(t,n,r,e,o){var u,s,c=void 0===o,l=i.dot;if(2!==t.dimension||t.shape[0]!==t.shape[1])throw new Error("ndarray-lup-solve:: L must be a square, two-dimensional ndarray");var f=t.shape[0];if(2!==n.dimension||n.shape[0]!==n.shape[1])throw new Error("ndarray-lup-solve:: U must be a square, two-dimensional ndarray");if(n!==t&&n.shape[0]!==f)throw new Error("ndarray-lup-solve:: shape of L must be the same as U");if(r.length!==f)throw new Error("ndarray-lup-solve:: P must be an Array with length matching the dimensions of L and U");if(e.shape[0]!==f)throw new Error("ndarray-lup-solve:: x must be an ndarray with length matching the dimensions of L and U");if(o&&o.shape[0]!==f)throw new Error("ndarray-lup-solve:: if provided, work vector must be an ndarray with length matching the dimensions of L and U");for(c&&(o=a.malloc([f])),u=0;f>u;u++)o.set(u,e.get(r[u]));for(i.copy(o,e),u=1;f>u;u++)e.set(u,e.get(u)-l(t.pick(u,null).hi(u),e.hi(u)));for(e.set(f-1,e.get(f-1)/n.get(f-1,f-1)),u=f-2;u>=0;u--){if(s=n.get(u,u),0===s)return!1;e.set(u,(e.get(u)-l(n.pick(u,null).lo(u+1),e.lo(u+1)))/s)}return c&&a.free(o),!0}var i=t("ndarray-blas-level1"),a=t("ndarray-scratch");n.exports=e},{"ndarray-blas-level1":47,"ndarray-scratch":60}],41:[function(t,n,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],42:[function(t,n,r){arguments[4][24][0].apply(r,arguments)},{dup:24}],43:[function(t,n,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],44:[function(t,n,r){arguments[4][26][0].apply(r,arguments)},{dup:26}],45:[function(t,n,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],46:[function(t,n,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],47:[function(t,n,r){arguments[4][29][0].apply(r,arguments)},{"./asum":41,"./axpy":42,"./copy":43,"./cpsc":44,"./dot":45,"./iamax":46,"./nrm2":48,"./rotg":49,"./scal":50,"./swap":51,dup:29}],48:[function(t,n,r){arguments[4][30][0].apply(r,arguments)},{dup:30}],49:[function(t,n,r){arguments[4][31][0].apply(r,arguments)},{dup:31}],50:[function(t,n,r){arguments[4][32][0].apply(r,arguments)},{dup:32}],51:[function(t,n,r){arguments[4][33][0].apply(r,arguments)},{dup:33}],52:[function(t,n,r){arguments[4][35][0].apply(r,arguments)},{"cwise-compiler":53,dup:35}],53:[function(t,n,r){arguments[4][18][0].apply(r,arguments)},{"./lib/thunk.js":55,dup:18}],54:[function(t,n,r){arguments[4][19][0].apply(r,arguments)},{dup:19,uniq:56}],55:[function(t,n,r){arguments[4][20][0].apply(r,arguments)},{"./compile.js":54,dup:20}],56:[function(t,n,r){arguments[4][21][0].apply(r,arguments)},{dup:21}],57:[function(t,n,r){"use strict";"use restrict";function e(t){var n=32;return t&=-t,t&&n--,65535&t&&(n-=16),16711935&t&&(n-=8),252645135&t&&(n-=4),858993459&t&&(n-=2),1431655765&t&&(n-=1),n}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(t){return(t>0)-(0>t)},r.abs=function(t){var n=t>>i-1;return(t^n)-n},r.min=function(t,n){return n^(t^n)&-(n>t)},r.max=function(t,n){return t^(t^n)&-(n>t)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var n,r;return n=(t>65535)<<4,t>>>=n,r=(t>255)<<3,t>>>=r,n|=r,r=(t>15)<<2,t>>>=r,n|=r,r=(t>3)<<1,t>>>=r,n|=r,n|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.countTrailingZeros=e,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var a=new Array(256);!function(t){for(var n=0;256>n;++n){var r=n,e=n,i=7;for(r>>>=1;r;r>>>=1)e<<=1,e|=1&r,--i;t[n]=e<<i&255}}(a),r.reverse=function(t){return a[255&t]<<24|a[t>>>8&255]<<16|a[t>>>16&255]<<8|a[t>>>24&255]},r.interleave2=function(t,n){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),t|n<<1},r.deinterleave2=function(t,n){return t=t>>>n&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,n,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|=n<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,n){return t=t>>>n&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextCombination=function(t){var n=t|t-1;return n+1|(~n&-~n)-1>>>e(t)+1}},{}],58:[function(t,n,r){"use strict";function e(t,n,r){var i=0|t[r];if(0>=i)return[];var a,o=new Array(i);if(r===t.length-1)for(a=0;i>a;++a)o[a]=n;else for(a=0;i>a;++a)o[a]=e(t,n,r+1);return o}function i(t,n){var r,e;for(r=new Array(t),e=0;t>e;++e)r[e]=n;return r}function a(t,n){switch("undefined"==typeof n&&(n=0),typeof t){case"number":if(t>0)return i(0|t,n);break;case"object":if("number"==typeof t.length)return e(t,n,0)}return[]}n.exports=a},{}],59:[function(t,n,r){(function(n,e){"use strict";function i(t){if(t){var n=t.length||t.byteLength,r=m.log2(n);w[r].push(t)}}function a(t){i(t.buffer)}function o(t){var t=m.nextPow2(t),n=m.log2(t),r=w[n];return r.length>0?r.pop():new ArrayBuffer(t)}function u(t){return new Uint8Array(o(t),0,t)}function s(t){return new Uint16Array(o(2*t),0,t)}function c(t){return new Uint32Array(o(4*t),0,t)}function l(t){return new Int8Array(o(t),0,t)}function f(t){return new Int16Array(o(2*t),0,t)}function h(t){return new Int32Array(o(4*t),0,t)}function p(t){return new Float32Array(o(4*t),0,t)}function g(t){return new Float64Array(o(8*t),0,t)}function d(t){return _?new Uint8ClampedArray(o(t),0,t):u(t)}function v(t){return new DataView(o(t),0,t)}function y(t){t=m.nextPow2(t);var n=m.log2(t),r=M[n];return r.length>0?r.pop():new e(t)}var m=t("bit-twiddle"),b=t("dup");n.__TYPEDARRAY_POOL||(n.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var _="undefined"!=typeof Uint8ClampedArray,x=n.__TYPEDARRAY_POOL;x.UINT8C||(x.UINT8C=b([32,0])),x.BUFFER||(x.BUFFER=b([32,0]));var w=x.DATA,M=x.BUFFER;r.free=function(t){if(e.isBuffer(t))M[m.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var n=t.length||t.byteLength,r=0|m.log2(n);w[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=a,r.freeArrayBuffer=i,r.freeBuffer=function(t){M[m.log2(t.length)].push(t)},r.malloc=function(t,n){if(void 0===n||"arraybuffer"===n)return o(t);switch(n){case"uint8":return u(t);case"uint16":return s(t);case"uint32":return c(t);case"int8":return l(t);case"int16":return f(t);case"int32":return h(t);case"float":case"float32":return p(t);case"double":case"float64":return g(t);case"uint8_clamped":return d(t);case"buffer":return y(t);case"data":case"dataview":return v(t);default:return null}return null},r.mallocArrayBuffer=o,r.mallocUint8=u,r.mallocUint16=s,r.mallocUint32=c,r.mallocInt8=l,r.mallocInt16=f,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=g,r.mallocUint8Clamped=d,r.mallocDataView=v,r.mallocBuffer=y,r.clearCache=function(){for(var t=0;32>t;++t)x.UINT8[t].length=0,x.UINT16[t].length=0,x.UINT32[t].length=0,x.INT8[t].length=0,x.INT16[t].length=0,x.INT32[t].length=0,x.FLOAT[t].length=0,x.DOUBLE[t].length=0,x.UINT8C[t].length=0,w[t].length=0,M[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":57,buffer:1,dup:58}],60:[function(t,n,r){"use strict";function e(t){var n=t.dtype;("generic"===n||"array"===n)&&(n="double");var r=f.malloc(t.size,n),e=c(r,t.shape);return l.assign(e,t),e}function i(t,n){n||(n="double");for(var r=1,e=new Array(t.length),i=t.length-1;i>=0;--i)e[i]=r,r*=t[i];return c(f.malloc(r,n),t,e,0)}function a(t){"generic"!==t.dtype&&"array"!==t.dtype&&f.free(t.data)}function o(t,n){n||(n="double");for(var r=1,e=new Array(t.length),i=t.length-1;i>=0;--i)e[i]=r,r*=t[i];for(var a=f.malloc(r,n),i=0;r>i;++i)a[i]=0;return c(a,t,e,0)}function u(t,n){n||(n="double");for(var r=1,e=new Array(t.length),i=t.length-1;i>=0;--i)e[i]=r,r*=t[i];for(var a=f.malloc(r,n),i=0;r>i;++i)a[i]=1;return c(a,t,e,0)}function s(t,n){var r,e;n||(n="double");var i=1,a=new Array(t.length);for(r=t.length-1;r>=0;--r)a[r]=i,i*=t[r];var o=f.malloc(i,n);for(r=0;i>r;++r)o[r]=0;var u=1/0,s=0;for(r=t.length-1;r>=0;r--)s+=a[r],u=Math.min(u,t[r]);for(r=0,e=0;u>r;r++,e+=s)o[e]=1;return c(o,t,a,0)}var c=t("ndarray"),l=t("ndarray-ops"),f=t("typedarray-pool");r.clone=e,r.malloc=i,r.free=a,r.zeros=o,r.ones=u,r.eye=s},{ndarray:61,"ndarray-ops":52,"typedarray-pool":59}],61:[function(t,n,r){function e(t,n){return t[0]-n[0]}function i(){var t,n=this.stride,r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(n[t]),t];r.sort(e);var i=new Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}function a(t,n){var r=["View",n,"d",t].join("");0>n&&(r="View_Nil"+t);var e="generic"===t;if(-1===n){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",o=new Function(a);return o()}if(0===n){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",o=new Function("TrivialArray",a);return o(f[t][0])}var a=["'use strict'"],u=s(n),c=u.map(function(t){return"i"+t}),l="this.offset+"+u.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=u.map(function(t){return"b"+t}).join(","),p=u.map(function(t){return"c"+t}).join(",");a.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+n),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===n?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),4>n?(a.push("function "+r+"_order(){"),2===n?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===n&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+c.join(",")+",v){"),e?a.push("return this.data.set("+l+",v)}"):a.push("return this.data["+l+"]=v}"),a.push("proto.get=function "+r+"_get("+c.join(",")+"){"),e?a.push("return this.data.get("+l+")}"):a.push("return this.data["+l+"]}"),a.push("proto.index=function "+r+"_index(",c.join(),"){return "+l+"}"),a.push("proto.hi=function "+r+"_hi("+c.join(",")+"){return new "+r+"(this.data,"+u.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+u.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var g=u.map(function(t){return"a"+t+"=this.shape["+t+"]"}),d=u.map(function(t){return"c"+t+"=this.stride["+t+"]"});a.push("proto.lo=function "+r+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+d.join(","));for(var v=0;n>v;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");a.push("return new "+r+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"c"+t}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+c.join(",")+"){var "+u.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+u.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;n>v;++v)a.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");a.push("return new "+r+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(n),m=new Array(n),v=0;n>v;++v)y[v]="a[i"+v+"]",m[v]="b[i"+v+"]";a.push("proto.transpose=function "+r+"_transpose("+c+"){"+c.map(function(t,n){return t+"=("+t+"===undefined?"+n+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+y.join(",")+","+m.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var v=0;n>v;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(t){return"shape["+t+"]"}).join(",")+","+u.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",a.join("\n"));return o(f[t],i)}function o(t){if(c(t))return"buffer";if(l)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function u(t,n,r,e){if(void 0===t){var i=f.array[0];return i([])}"number"==typeof t&&(t=[t]),void 0===n&&(n=[t.length]);var u=n.length;if(void 0===r){r=new Array(u);for(var s=u-1,c=1;s>=0;--s)r[s]=c,c*=n[s]}if(void 0===e){e=0;for(var s=0;u>s;++s)r[s]<0&&(e-=(n[s]-1)*r[s])}for(var l=o(t),h=f[l];h.length<=u+1;)h.push(a(l,h.length-1));var i=h[u+1];return i(t,n,r,e)}var s=t("iota-array"),c=t("is-buffer"),l="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};n.exports=u},{"iota-array":62,"is-buffer":63}],62:[function(t,n,r){"use strict";function e(t){for(var n=new Array(t),r=0;t>r;++r)n[r]=r;return n}n.exports=e},{}],63:[function(t,n,r){n.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],64:[function(t,n,r){!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof r?n.exports=e():t.newtonRaphson=e()}(this,function(){return function(t,n,r,e){e=e||{};for(var i=e.tolerance||1e-8,a=e.epsilon||1e-13,o=e.maxIterations||20,u=0;o>u;++u){var s=n(r);if(Math.abs(s)<a)return!1;result=r-t(r)/s;var c=Math.abs(result-r)<i;if(c)return result;r=result}return!1}})},{}],65:[function(t,n,r){"use strict";function e(t,n,r,e,s){this.a=t,this.A=n,this.b=r,this.B=e,this.g=s,this._f=i.bind(this),this._fp=a.bind(this),this._fXToTheta=o.bind(this),this._fpXToTheta=u.bind(this),this.evaluate=this._evaluate.bind(this),this.evaluateByX=this._evaluateByX.bind(this)}function i(t){return this._delta*(1-Math.cos(2*t))-2*t+Math.sin(2*t)}function a(t){return 2*(Math.cos(2*t)+this._delta*Math.sin(2*t)-1)}function o(t){return t=Math.min(1,Math.max(0,t)),this.a+this.beta*(Math.sin(2*t*this.theta0)-2*this.theta0*t)-this._xTarget}function u(t){return t=Math.min(1,Math.max(0,t)),2*this.theta0*this.beta*(Math.cos(2*t*this.theta0)-1)}n.exports=e;var s=t("newton-raphson");e.prototype._evaluate=function(t){var n=-t*this.theta0;return[this.a+this.beta*(2*n-Math.sin(2*n)),this.A-this.beta*(1-Math.cos(2*n))]},e.prototype.tabulate=function(t){for(var n=[],r=0;t>r;r++)n[r]=this.evaluate(r/(t-1));return n},e.prototype.solve=function(){var t=1/0,n=0,r=50;this._delta=(this.b-this.a)/(this.B-this.A);for(var e=r/2;r>e;e++){var i=-e/(r-1)*Math.PI,a=this._f(i);Math.abs(a)<t&&(t=Math.abs(a),n=i)}return this.theta0=s(this._f,this._fp,n),this.beta=(this.A-this.B)/(1-Math.cos(2*this.theta0)),this.theta0},e.prototype._evaluateByX=function(t){var n=this.xToTheta(t),r=this.evaluate(n);return r},e.prototype.xToTheta=function(t){this._xTarget=t;var n=Math.sqrt((t-this.a)/(this.b-this.a));return s(this._fXToTheta,this._fpXToTheta,n)}},{"newton-raphson":64}],66:[function(t,n,r){"use strict";function e(){at=!0,clearTimeout(rt),j.selectAll("circle").transition().duration(0).attr("opacity",1).attr("r",0)}function i(t){(L.classed("solution-visible")||0!==t)&&j.selectAll("circle").filter(function(n,r){return r===t}).transition().duration(350,"ease-out").ease("cubic-out").attr("opacity",0).attr("r",40)}function a(){j&&j.selectAll("circle").data(nt).transition().duration(0).attr("cx",function(t){return w(t[0])}).attr("cy",function(t){return M(t[1])})}function o(){tt[0]=J.positionAtDuration(it),tt[1]=K.positionAtDuration(it),U=I.selectAll("circle").data(tt),U.transition().duration(z).attr("cx",function(t){return w(t[0])}).attr("cy",function(t){return M(t[1])})}function u(){at=!1,et=Date.now(),j.selectAll("circle").transition().duration(0).attr("opacity",1).attr("r",0),x.timer(function(t){return it=.001*t,o(),it>J.duration&&i(0),it>K.duration&&i(1),at||it>Math.max(J.duration,K.duration)?(at?at=!1:rt=setTimeout(u,1500),!0):void 0})}function s(){R.fromAnchorPoints(Q)}function c(){Q=W.tabulate(G)}function l(){J.points=W.tabulate(Y),J.computeLength(),J.computeDuration(W),nt[0]=nt[1]=J.points[J.points.length-1],a()}function f(){K.points=R.tabulate(Y),K.computeLength(),K.computeDuration(W)}function h(){W.solve(),c(),l(),R=new B(4,G),Q=R.fitToFunction(W.evaluateByX,W.a,W.b),f()}function p(){Q=R.fitToFunction(W.evaluateByX,W.a,W.b),f()}function g(){W.solve(),l()}function d(){w=x.scale.linear().domain([Z,$]).range([0,F]),M=x.scale.linear().domain([H,X]).range([O,0]);var t=x.svg.axis().orient("bottom").scale(w).ticks(11,x.format(",d")),n=x.svg.axis().orient("left").scale(M);L=x.select("#plot").append("svg").attr("width",F+V.left+V.right).attr("height",O+V.top+V.bottom).append("g").attr("transform","translate("+V.left+","+V.top+")").attr("class","gRoot solution-visible"),L.append("g").attr("class","x axis").attr("transform","translate(0,"+O+")").call(t),L.append("text").attr("class","x label").attr("text-anchor","end").attr("x",F).attr("y",O-3).text("x, meters"),L.append("text").attr("class","y label").attr("text-anchor","end").attr("x",0).attr("y",15).attr("transform","rotate(-90)").text("y, meters"),L.append("g").attr("class","y axis").call(n),A=L.append("g").attr("class","lineplot"),I=L.append("g").attr("class","particle-plot"),j=L.append("g").attr("class","particle-dingers"),E=x.behavior.drag().on("dragstart",m).on("drag",b).on("dragend",_),k=x.svg.line().x(function(t){return w(t[0])}).y(function(t){return M(t[1])}),N=A.append("path").attr("class","ref-curve").attr("d",k(J.points)),S=A.append("path").attr("class","trial-path").attr("d",k(K.points)),x.select("#fit-to-solution").on("click",function(){z=300,p(),y(),z=0}),x.select("#toggle-solution").on("click",function(){L.classed("solution-visible",!L.classed("solution-visible")),x.select(this).text(function(){return L.classed("solution-visible")?"Hide Solution":"Show Solution"})}),x.select("#toggle-particles").on("click",function(){L.classed("particles-paused",!L.classed("particles-paused")),L.classed("particles-paused")?e():u(),x.select(this).text(function(){return L.classed("particles-paused")?"Play":"Pause"})}),C=j.selectAll("circle").data(nt).enter().append("circle").attr("cx",function(t){return w(t[0])}).attr("cy",function(t){return M(t[1])}).attr("r",0).attr("opacity",1).attr("class",function(t,n){return 0===n?"solution-dinger":"test-dinger"}).attr("fill",function(t,n){return 0===n?"red":"blue"}),U=I.selectAll("circle").data(tt),U.enter().append("circle").attr("cx",function(t){return w(t[0])}).attr("cy",function(t){return M(t[1])}).attr("r",5).attr("class",function(t,n){return 0===n?"solution-point":"test-point"}).attr("fill",function(t,n){return 0===n?"red":"blue"}),y()}function v(t,n){return 0===n||n===Q.length-1}function y(){T=A.selectAll("g").data(Q);var t=T.enter().append("g").attr("class","pt").attr("transform",function(t){return"translate("+w(t[0])+","+M(t[1])+")"}).call(E).on("mouseover",function(t,n){x.select(this).classed("hover",!0)}).on("mouseout",function(t,n){x.select(this).classed("hover",!1)});t.classed("draggable",!0),t.filter(function(t,n){return n===G-1||0===n?!0:void 0}).classed("draggable-nsew",!0),t.append("circle").attr("r",20).attr("class","handle").attr("opacity",.05),t.append("circle").attr("class","dot").attr("r",2),T.transition().duration(z).attr("transform",function(t){return"translate("+w(t[0])+","+M(t[1])+")"}),T.exit().remove(),S.transition().duration(z).attr("d",k(K.points)),N.transition().duration(z).attr("d",k(J.points)),x.select("#test-curve-details").text("Path duration: "+K.duration.toFixed(4)+"s"),x.select("#solution-details").text("Minimum duration: "+J.duration.toFixed(4)+"s")}function m(t,n){L.classed("drag-active",!0),x.event.sourceEvent.stopPropagation(),x.select(this).classed("dragging",!0),e()}function b(t,n){var r=Math.max(Z,Math.min($,w.invert(x.event.x))),e=Math.max(H,Math.min(X,M.invert(x.event.y)));n===G-1?(W.b=r,W.B=e):0===n&&(W.a=r,W.A=e),Q[n][0]=r,Q[n][1]=e,v(t,n)&&g(),s(),f(),y()}function _(t,n){u(),L.classed("drag-active",!1),
x.select(this).classed("dragging",!1),v(t,n)&&g(),s(),f(),y()}var x=t("d3");window.d3=x;var w,M,A,E,k,N,S,T,I,j,L,U,C,R,B=t("./spline"),P=t("./brachistochrone"),q=t("./polyline"),D=document.getElementById("plot"),V={top:40,right:40,bottom:40,left:50},z=0,F=D.offsetWidth-V.right-V.left,O=D.offsetHeight-V.top-V.bottom,Y=100,H=0,X=2,Z=0,$=Z+(X-H)*F/O,W=new P(Z+.1*($-Z),H+.9*(X-H),Z+.9*($-Z),H+.2*(X-H),9.81),G=4,J=new q([]),K=new q([]),Q=[],tt=[[0,0],[1,1]],nt=[];h(),d(),u();var rt,et=Date.now(),it=0,at=!1},{"./brachistochrone":65,"./polyline":68,"./spline":69,d3:8}],67:[function(t,n,r){"use strict";function e(t,n){for(var r,e=t.length,i=0,a=e-1;a>=0;a--)r=t[a]-n[a],i+=r*r;return Math.sqrt(i)}n.exports=e},{}],68:[function(t,n,r){"use strict";function e(t){this.points=t,this.cumLength=[],this.cumDuration=[],this.length=0,this.duration=0}n.exports=e;var i=(t("bisect"),t("binary-search-bounds")),a=t("./l2-distance");e.prototype.computeLength=function(){var t=this.points.length;this.cumLength[0]=0;for(var n=1;t>n;n++)this.cumLength[n]=this.cumLength[n-1]+a(this.points[n],this.points[n-1]);return this.length=this.cumLength[t-1],this.length},e.prototype.computeDuration=function(t){var n=t.g,r=t.A,e=this.points.length;this.cumDuration[0]=0;for(var i=0,a=this.points[0],o=1;e>o;o++){var u=this.points[o],s=Math.sqrt(Math.max(0,2*n*(r-u[1]))),c=.5*(i+s),l=u[1]-a[1],f=u[0]-a[0],h=Math.sqrt(f*f+l*l);this.cumDuration[o]=this.cumDuration[o-1]+h/c,a=u,i=s}this.duration=this.cumDuration[this.cumDuration.length-1]},e.prototype.durationIndex=function(t){return i.ge(this.cumDuration,t)},e.prototype.positionAtDuration=function(t){var n=Math.min(this.points.length-2,Math.max(this.durationIndex(t)-1,0)),r=(t-this.cumDuration[n])/(this.cumDuration[n+1]-this.cumDuration[n]);return n===this.points.length-2?[-1e3,-1e3]:[this.points[n][0]*(1-r)+this.points[n+1][0]*r,this.points[n][1]*(1-r)+this.points[n+1][1]*r]}},{"./l2-distance":67,"binary-search-bounds":6,bisect:7}],69:[function(t,n,r){"use strict";function e(t,n,r,e){this.order=t,Array.isArray(n)?(this.points=n,this.n=this.points.length):(this.points=[],this.n=n),this.knot=r,this.weight=e,this.knot||this.applyUniformKnotVector(),this.weight||this.applyUniformWeights()}var i=t("b-spline"),a=t("minimize-golden-section-1d"),o=t("./l2-distance"),u=t("ndarray"),s=t("ndarray-scratch"),c=t("ndarray-fill"),l=t("ndarray-lup-solve"),f=t("ndarray-lup-factorization"),h=t("minimize-powell");t("bisect");n.exports=e,e.prototype.tabulate=function(t){for(var n=[],r=0;t>r;r++){var e=r/(t-1);n[r]=this.at(e)}return n},e.prototype.fromFunction=function(t){for(var n=0;n<this.n;n++)this.points[n]=t(n/(this.n-1))},e.prototype.applyUniformKnotVector=function(){var t=this.n+this.order;this.knot=[];for(var n=0;n<this.order;n++)this.knot[n]=0,this.knot[t-n-1]=1;for(var n=0;n<this.n-this.order;n++)this.knot[this.order+n]=(n+1)/(this.n+1-this.order)},e.prototype.applyUniformWeights=function(){this.weight=[];for(var t=0;t<this.n;t++)this.weight[t]=1},e.prototype.at=function(t){return i(t,this.order,this.points,this.knot,this.weight)},e.prototype.tMin=function(){return this.knot?this.knot[0]:0},e.prototype.tMax=function(){return this.knot?this.knot[this.knot.length-1]:this.knot.length-1},e.prototype.argMinDistanceToPoint=function(t){return a(function(t){return o(p,this.at)}.bind(this),{lowerBound:this.tMin(),upperBound:this.tMax()})},e.prototype.minDistanceToPoint=function(t){return this.at(this.argMinDistanceToPoint(t))},e.prototype.minDistanceToFunction=function(t,n){var r=this.at(n),e=[n,t(n)];return o(r,e)},e.prototype.invertBasisFunction=function(){var t=this.n;this.M||(this.M=s.zeros([t,t])),this.P||(this.P=[]);for(var n=[],r=0;t>r;r++){for(var e=0;t>e;e++)n[e]=[r===e?1:0];c(this.M.pick(null,r),function(r){return i(r/(t-1),this.order,n,this.knot,this.weight)}.bind(this))}f(this.M,this.M,this.P)},e.prototype.fromAnchorPoints=function(t){this.M||this.invertBasisFunction();for(var n=[],r=[],e=0;e<this.n;e++)n[e]=t[e][0],r[e]=t[e][1];l(this.M,this.M,this.P,u(n)),l(this.M,this.M,this.P,u(r));for(var e=0;e<this.n;e++)this.points[e]=[],this.points[e][0]=n[e],this.points[e][1]=r[e]},e.prototype.fitToFunction=function(t,n,r){var e,i=Date.now(),a=this.n,o=[],u=20,s=t(n),c=t(r);s.length;for(e=0;a-2>e;e++)o[e]=n+(r-n)*(e+1)/(a-1);var l=[];l[0]=s,l[a-1]=c;for(var f=function(n){for(var r=1;a-1>r;r++)l[r]=t(n[r-1]);this.fromAnchorPoints(l);for(var e=0,r=0;u>r;r++){var i=(r+1)/(u+1),o=this.at(i),s=t(o[0]),c=s[1]-o[1];e+=c*c}return e}.bind(this),p=h(f,o,{tolerance:1e-4,tolerance1d:1e-8,maxIter:20,computeConstraints:function(t,e){for(var i=1/0,a=-(1/0),o=t.length,u=0;o>u;u++){var s=u>0?t[u-1]:-(1/0),c=o-1>u?t[u+1]:1/0;if(0!==e[u]){var l=(n-t[u])/e[u],f=(r-t[u])/e[u];Math.abs(l)<Math.abs(a)&&(a=l),Math.abs(s-t[u])<Math.abs(a)&&(a=s-t[u]),Math.abs(f)<Math.abs(i)&&(i=f),Math.abs(c-t[u])<Math.abs(i)&&(i=c-t[u])}}return{lowerBound:-Math.abs(a),upperBound:Math.abs(i)}}}),l=[],e=1;a-1>e;e++)l[e]=t(p[e-1]);l[0]=s,l[a-1]=c,this.fromAnchorPoints(l);var g=Date.now();return console.info("Spline curve fit completed in "+(g-i)+"ms"),l}},{"./l2-distance":67,"b-spline":5,bisect:7,"minimize-golden-section-1d":9,"minimize-powell":12,ndarray:61,"ndarray-fill":16,"ndarray-lup-factorization":22,"ndarray-lup-solve":40,"ndarray-scratch":60}]},{},[66]);
